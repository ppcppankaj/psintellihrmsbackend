=== STDOUT ===
Found 26 test(s).
Operations to perform:
  Synchronize unmigrated apps: channels, corsheaders, daphne, django_filters, drf_spectacular, messages, rest_framework, rest_framework_simplejwt, staticfiles
  Apply all migrations: abac, admin, ai_services, assets, attendance, auth, authentication, billing, chat, compliance, contenttypes, core, django_celery_beat, django_celery_results, employees, expenses, integrations, leave, notifications, onboarding, payroll, performance, recruitment, reports, sessions, token_blacklist, training, workflows
Synchronizing apps without migrations:
  Creating tables...
    Running deferred SQL...
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0001_initial... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying auth.0010_alter_group_name_max_length... OK
  Applying auth.0011_update_proxy_permissions... OK
  Applying auth.0012_alter_user_first_name_max_length... OK
  Applying authentication.0001_initial... OK
  Applying core.0001_initial... OK
  Applying core.0002_rename_core_announ_organiz_2721f4_idx_core_announ_organiz_f158c6_idx_and_more... OK
  Applying core.0003_organizationdomain... OK
  Applying core.0004_rename_core_orgdomain_primary_idx_core_organi_organiz_2e4965_idx_and_more... OK
  Applying core.0005_remove_auditlog_core_auditl_organiz_c0dcbd_idx_and_more... OK
  Applying abac.0001_initial... OK
  Applying abac.0002_alter_attributetype_unique_together_and_more... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying authentication.0002_emailverificationtoken_passwordresettoken_and_more... OK
  Applying authentication.0003_convert_org_uuid_to_fk... OK
  Applying employees.0001_initial... OK
  Applying attendance.0001_initial... OK
  Applying employees.0002_employee_shift... OK
  Applying ai_services.0001_initial... OK
  Applying ai_services.0002_alter_aimodelversion_organization_and_more... OK
  Applying ai_services.0003_alter_aimodelversion_is_active_and_more... OK
  Applying assets.0001_initial... OK
  Applying assets.0002_alter_asset_organization_and_more... OK
  Applying attendance.0002_attendancepunch_faceembedding_fraudlog_and_more... OK
  Applying attendance.0003_attendancepunch_att_punch_org_time_idx_and_more... OK
  Applying attendance.0004_attendancepunch_is_flagged_and_more... OK
  Applying auth.0013_user_is_new_employee... OK
  Applying auth.0014_remove_user_is_new_employee... OK
  Applying authentication.0004_remove_usersession_authenticat_organiz_139cd6_idx_and_more... OK
  Applying billing.0001_initial... OK
  Applying billing.0002_paymenttransaction... OK
  Applying billing.0003_gst_invoices... OK
  Applying billing.0004_alter_invoice_options_alter_plan_options_and_more... OK
  Applying billing.0005_organizationsubscription_expired_notice_sent_at_and_more... OK
  Applying billing.0006_organizationsubscription_grace_notice_sent_at_and_suspension_notice_sent_at... OK
  Applying billing.0007_alter_bankdetails_is_active_and_more... OK
  Applying chat.0001_initial... OK
  Applying chat.0002_alter_conversation_organization_and_more... OK
  Applying chat.0003_meetingroom... OK
  Applying chat.0004_meetingrecording_meetingschedule... OK
  Applying chat.0005_alter_conversation_organization_and_more... OK
  Applying employees.0003_certification_document_emergencycontact_and_more... OK
  Applying compliance.0001_initial... OK
  Applying compliance.0002_remove_consentrecord_compliance__organiz_5b7c03_idx_and_more... OK
  Applying core.0006_rls_policies... OK
  Applying core.0007_enforce_organization_not_null... OK
  Applying django_celery_beat.0001_initial... OK
  Applying django_celery_beat.0002_auto_20161118_0346... OK
  Applying django_celery_beat.0003_auto_20161209_0049... OK
  Applying django_celery_beat.0004_auto_20170221_0000... OK
  Applying django_celery_beat.0005_add_solarschedule_events_choices... OK
  Applying django_celery_beat.0006_auto_20180322_0932... OK
  Applying django_celery_beat.0007_auto_20180521_0826... OK
  Applying django_celery_beat.0008_auto_20180914_1922... OK
  Applying django_celery_beat.0006_auto_20180210_1226... OK
  Applying django_celery_beat.0006_periodictask_priority... OK
  Applying django_celery_beat.0009_periodictask_headers... OK
  Applying django_celery_beat.0010_auto_20190429_0326... OK
  Applying django_celery_beat.0011_auto_20190508_0153... OK
  Applying django_celery_beat.0012_periodictask_expire_seconds... OK
  Applying django_celery_beat.0013_auto_20200609_0727... OK
  Applying django_celery_beat.0014_remove_clockedschedule_enabled... OK
  Applying django_celery_beat.0015_edit_solarschedule_events_choices... OK
  Applying django_celery_beat.0016_alter_crontabschedule_timezone... OK
  Applying django_celery_beat.0017_alter_crontabschedule_month_of_year... OK
  Applying django_celery_beat.0018_improve_crontab_helptext... OK
  Applying django_celery_beat.0019_alter_periodictasks_options... OK
  Applying django_celery_results.0001_initial... OK
  Applying django_celery_results.0002_add_task_name_args_kwargs... OK
  Applying django_celery_results.0003_auto_20181106_1101... OK
  Applying django_celery_results.0004_auto_20190516_0412... OK
  Applying django_celery_results.0005_taskresult_worker... OK
  Applying django_celery_results.0006_taskresult_date_created... OK
  Applying django_celery_results.0007_remove_taskresult_hidden... OK
  Applying django_celery_results.0008_chordcounter... OK
  Applying django_celery_results.0009_groupresult... OK
  Applying django_celery_results.0010_remove_duplicate_indices... OK
  Applying django_celery_results.0011_taskresult_periodic_task_name... OK
  Applying django_celery_results.0012_taskresult_date_started... OK
  Applying django_celery_results.0013_taskresult_django_cele_periodi_1993cf_idx... OK
  Applying django_celery_results.0014_alter_taskresult_status... OK
  Applying employees.0004_employee_emp_org_status_idx_and_more... OK
  Applying employees.0005_alter_certification_organization_and_more... OK
  Applying payroll.0001_initial... OK
  Applying expenses.0001_initial... OK
  Applying expenses.0002_alter_advancesettlement_organization_and_more... OK
  Applying integrations.0001_initial... OK
  Applying integrations.0002_remove_apikey_integration_organiz_d53da8_idx_and_more... OK
  Applying leave.0001_initial... OK
  Applying leave.0002_alter_compensatoryleave_organization_and_more... OK
  Applying notifications.0001_initial... OK
  Applying notifications.0002_notification_delivery_fields... OK
  Applying notifications.0003_alter_notification_organization_and_more... OK
  Applying onboarding.0001_initial... OK
  Applying onboarding.0002_onboardingdocument_file_size... OK
  Applying onboarding.0003_alter_employeeonboarding_organization_and_more... OK
  Applying payroll.0002_remove_fullfinalsettlement_payroll_ful_organiz_feba69_idx_and_more... OK
  Applying performance.0001_initial... OK
  Applying performance.0002_alter_competency_is_active_and_more... OK
  Applying recruitment.0001_initial... OK
  Applying recruitment.0002_alter_candidate_organization_and_more... OK
  Applying reports.0001_initial... OK
  Applying reports.0002_reportexecution_rpt_exec_org_status_idx_and_more... OK
  Applying reports.0003_remove_generatedreport_reports_gen_organiz_155bcc_idx_and_more... OK
  Applying sessions.0001_initial... OK
  Applying token_blacklist.0001_initial... OK
  Applying token_blacklist.0002_outstandingtoken_jti_hex... OK
  Applying token_blacklist.0003_auto_20171017_2007... OK
  Applying token_blacklist.0004_auto_20171017_2013... OK
  Applying token_blacklist.0005_remove_outstandingtoken_jti... OK
  Applying token_blacklist.0006_auto_20171017_2113... OK
  Applying token_blacklist.0007_auto_20171017_2214... OK
  Applying token_blacklist.0008_migrate_to_bigautofield... OK
  Applying token_blacklist.0010_fix_migrate_to_bigautofield... OK
  Applying token_blacklist.0011_linearizes_history... OK
  Applying token_blacklist.0012_alter_outstandingtoken_user... OK
  Applying token_blacklist.0013_alter_blacklistedtoken_options_and_more... OK
  Applying training.0001_initial... OK
  Applying training.0002_alter_trainingcategory_organization_and_more... OK
  Applying workflows.0001_initial... OK
  Applying workflows.0002_alter_workflowaction_organization_and_more... OK
  Applying workflows.0003_workflow_action_choices... OK
  Applying workflows.0004_alter_workflowaction_organization_and_more... OK
System check identified no issues (0 silenced).

=== STDERR ===
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...

CREATE TABLE "django_migrations" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "app" varchar(255) NOT NULL, "name" varchar(255) NOT NULL, "applied" datetime NOT NULL); (params None)
CREATE TABLE "django_content_type" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL, "app_label" varchar(100) NOT NULL, "model" varchar(100) NOT NULL); (params None)
CREATE UNIQUE INDEX "django_content_type_app_label_model_76bd3d3b_uniq" ON "django_content_type" ("app_label", "model"); (params ())
CREATE TABLE "new__django_content_type" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "app_label" varchar(100) NOT NULL, "model" varchar(100) NOT NULL, "name" varchar(100) NULL); (params None)
INSERT INTO "new__django_content_type" ("id", "app_label", "model", "name") SELECT "id", "app_label", "model", "name" FROM "django_content_type"; (params ())
DROP TABLE "django_content_type"; (params ())
ALTER TABLE "new__django_content_type" RENAME TO "django_content_type"; (params ())
CREATE UNIQUE INDEX "django_content_type_app_label_model_76bd3d3b_uniq" ON "django_content_type" ("app_label", "model"); (params ())
ALTER TABLE "django_content_type" DROP COLUMN "name"; (params ())
CREATE TABLE "auth_permission" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(50) NOT NULL, "content_type_id" integer NOT NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED, "codename" varchar(100) NOT NULL); (params None)
CREATE TABLE "auth_group" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(80) NOT NULL UNIQUE); (params None)
CREATE TABLE "auth_group_permissions" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "group_id" integer NOT NULL REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED, "permission_id" integer NOT NULL REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE UNIQUE INDEX "auth_permission_content_type_id_codename_01ab375a_uniq" ON "auth_permission" ("content_type_id", "codename"); (params ())
CREATE INDEX "auth_permission_content_type_id_2f476e4b" ON "auth_permission" ("content_type_id"); (params ())
CREATE UNIQUE INDEX "auth_group_permissions_group_id_permission_id_0cd325b0_uniq" ON "auth_group_permissions" ("group_id", "permission_id"); (params ())
CREATE INDEX "auth_group_permissions_group_id_b120cbf9" ON "auth_group_permissions" ("group_id"); (params ())
CREATE INDEX "auth_group_permissions_permission_id_84c5c92e" ON "auth_group_permissions" ("permission_id"); (params ())
CREATE TABLE "new__auth_permission" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "content_type_id" integer NOT NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED, "codename" varchar(100) NOT NULL, "name" varchar(255) NOT NULL); (params None)
INSERT INTO "new__auth_permission" ("id", "content_type_id", "codename", "name") SELECT "id", "content_type_id", "codename", "name" FROM "auth_permission"; (params ())
DROP TABLE "auth_permission"; (params ())
ALTER TABLE "new__auth_permission" RENAME TO "auth_permission"; (params ())
CREATE UNIQUE INDEX "auth_permission_content_type_id_codename_01ab375a_uniq" ON "auth_permission" ("content_type_id", "codename"); (params ())
CREATE INDEX "auth_permission_content_type_id_2f476e4b" ON "auth_permission" ("content_type_id"); (params ())
CREATE TABLE "new__auth_group" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(150) NOT NULL UNIQUE); (params None)
INSERT INTO "new__auth_group" ("id", "name") SELECT "id", "name" FROM "auth_group"; (params ())
DROP TABLE "auth_group"; (params ())
ALTER TABLE "new__auth_group" RENAME TO "auth_group"; (params ())
CREATE TABLE "authentication_user" ("password" varchar(128) NOT NULL, "last_login" datetime NULL, "is_superuser" bool NOT NULL, "id" char(32) NOT NULL PRIMARY KEY, "organization_id" char(32) NULL, "email" varchar(254) NOT NULL UNIQUE, "username" varchar(255) NULL UNIQUE, "employee_id" varchar(50) NOT NULL, "slug" varchar(100) NOT NULL UNIQUE, "first_name" varchar(50) NOT NULL, "last_name" varchar(50) NOT NULL, "middle_name" varchar(50) NOT NULL, "phone" varchar(15) NOT NULL, "avatar" varchar(100) NULL, "date_of_birth" date NULL, "gender" varchar(30) NOT NULL, "is_active" bool NOT NULL, "is_staff" bool NOT NULL, "is_verified" bool NOT NULL, "is_org_admin" bool NOT NULL, "password_changed_at" datetime NULL, "must_change_password" bool NOT NULL, "failed_login_attempts" smallint unsigned NOT NULL CHECK ("failed_login_attempts" >= 0), "locked_until" datetime NULL, "is_2fa_enabled" bool NOT NULL, "two_factor_secret" varchar(255) NOT NULL, "backup_codes" text NOT NULL CHECK ((JSON_VALID("backup_codes") OR "backup_codes" IS NULL)), "last_login_ip" char(39) NULL, "last_login_device" varchar(255) NOT NULL, "date_joined" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "timezone" varchar(50) NOT NULL, "language" varchar(10) NOT NULL, "notification_preferences" text NOT NULL CHECK ((JSON_VALID("notification_preferences") OR "notification_preferences" IS NULL))); (params None)
CREATE TABLE "authentication_user_groups" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "group_id" integer NOT NULL REFERENCES "auth_group" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "authentication_user_user_permissions" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "permission_id" integer NOT NULL REFERENCES "auth_permission" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "branches" ("id" char(32) NOT NULL PRIMARY KEY, "organization_id" char(32) NOT NULL, "name" varchar(255) NOT NULL, "code" varchar(50) NOT NULL, "branch_type" varchar(50) NOT NULL, "is_headquarters" bool NOT NULL, "address_line1" varchar(255) NOT NULL, "address_line2" varchar(255) NOT NULL, "city" varchar(100) NOT NULL, "state" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "postal_code" varchar(20) NOT NULL, "phone" varchar(20) NOT NULL, "email" varchar(254) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "organization_users" ("id" char(32) NOT NULL PRIMARY KEY, "organization_id" char(32) NOT NULL, "role" varchar(20) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "branch_users" ("id" char(32) NOT NULL PRIMARY KEY, "role" varchar(20) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "branch_id" char(32) NOT NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE UNIQUE INDEX "authentication_user_organization_id_email_5c200c67_uniq" ON "authentication_user" ("organization_id", "email"); (params ())
CREATE INDEX "authenticat_organiz_91ea80_idx" ON "authentication_user" ("organization_id", "email"); (params None)
CREATE INDEX "authenticat_organiz_6ec5c1_idx" ON "authentication_user" ("organization_id", "employee_id"); (params None)
CREATE INDEX "authenticat_organiz_181dbb_idx" ON "authentication_user" ("organization_id", "is_active", "is_deleted"); (params None)
CREATE UNIQUE INDEX "organization_users_user_id_organization_id_32ec6d3b_uniq" ON "organization_users" ("user_id", "organization_id"); (params ())
CREATE UNIQUE INDEX "branch_users_user_id_branch_id_b2cf9da8_uniq" ON "branch_users" ("user_id", "branch_id"); (params ())
CREATE INDEX "authentication_user_organization_id_d85c0efb" ON "authentication_user" ("organization_id"); (params ())
CREATE INDEX "authentication_user_employee_id_262ee7aa" ON "authentication_user" ("employee_id"); (params ())
CREATE INDEX "authentication_user_is_org_admin_a4c872b1" ON "authentication_user" ("is_org_admin"); (params ())
CREATE UNIQUE INDEX "authentication_user_groups_user_id_group_id_8af031ac_uniq" ON "authentication_user_groups" ("user_id", "group_id"); (params ())
CREATE INDEX "authentication_user_groups_user_id_30868577" ON "authentication_user_groups" ("user_id"); (params ())
CREATE INDEX "authentication_user_groups_group_id_6b5c44b7" ON "authentication_user_groups" ("group_id"); (params ())
CREATE UNIQUE INDEX "authentication_user_user_permissions_user_id_permission_id_ec51b09f_uniq" ON "authentication_user_user_permissions" ("user_id", "permission_id"); (params ())
CREATE INDEX "authentication_user_user_permissions_user_id_736ebf7e" ON "authentication_user_user_permissions" ("user_id"); (params ())
CREATE INDEX "authentication_user_user_permissions_permission_id_ea6be19a" ON "authentication_user_user_permissions" ("permission_id"); (params ())
CREATE INDEX "branches_organization_id_49dd869c" ON "branches" ("organization_id"); (params ())
CREATE INDEX "branches_name_c3e4385e" ON "branches" ("name"); (params ())
CREATE INDEX "branches_code_f130de1a" ON "branches" ("code"); (params ())
CREATE INDEX "branches_is_active_3ebc6d77" ON "branches" ("is_active"); (params ())
CREATE INDEX "branches_created_by_id_22e070be" ON "branches" ("created_by_id"); (params ())
CREATE INDEX "organization_users_organization_id_73683316" ON "organization_users" ("organization_id"); (params ())
CREATE INDEX "organization_users_role_eaf7db44" ON "organization_users" ("role"); (params ())
CREATE INDEX "organization_users_is_active_ddf3dc97" ON "organization_users" ("is_active"); (params ())
CREATE INDEX "organization_users_created_by_id_ca90adce" ON "organization_users" ("created_by_id"); (params ())
CREATE INDEX "organization_users_user_id_e93e39b5" ON "organization_users" ("user_id"); (params ())
CREATE INDEX "branch_users_role_7da46f79" ON "branch_users" ("role"); (params ())
CREATE INDEX "branch_users_is_active_08c10577" ON "branch_users" ("is_active"); (params ())
CREATE INDEX "branch_users_branch_id_8f0cdda5" ON "branch_users" ("branch_id"); (params ())
CREATE INDEX "branch_users_created_by_id_af0808c6" ON "branch_users" ("created_by_id"); (params ())
CREATE INDEX "branch_users_user_id_f80d8495" ON "branch_users" ("user_id"); (params ())
CREATE TABLE "organizations" ("id" char(32) NOT NULL PRIMARY KEY, "name" varchar(255) NOT NULL, "logo" varchar(100) NULL, "email" varchar(254) NOT NULL, "phone" varchar(20) NOT NULL, "website" varchar(200) NOT NULL, "timezone" varchar(100) NOT NULL, "currency" varchar(3) NOT NULL, "subscription_status" varchar(20) NOT NULL, "trial_ends_at" datetime NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL); (params None)
CREATE TABLE "core_auditlog" ("id" char(32) NOT NULL PRIMARY KEY, "timestamp" datetime NOT NULL, "user_email" varchar(254) NULL, "action" varchar(50) NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "resource_repr" varchar(255) NULL, "old_values" text NULL CHECK ((JSON_VALID("old_values") OR "old_values" IS NULL)), "new_values" text NULL CHECK ((JSON_VALID("new_values") OR "new_values" IS NULL)), "changed_fields" text NOT NULL CHECK ((JSON_VALID("changed_fields") OR "changed_fields" IS NULL)), "ip_address" char(39) NULL, "user_agent" text NULL, "request_id" varchar(100) NULL, "organization_id" varchar(100) NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "core_featureflag" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "is_enabled" bool NOT NULL, "enabled_for_all" bool NOT NULL, "enabled_organizations" text NOT NULL CHECK ((JSON_VALID("enabled_organizations") OR "enabled_organizations" IS NULL)), "enabled_users" text NOT NULL CHECK ((JSON_VALID("enabled_users") OR "enabled_users" IS NULL)), "enabled_percentage" integer unsigned NOT NULL CHECK ("enabled_percentage" >= 0), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL); (params None)
CREATE TABLE "core_announcement" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "title" varchar(255) NOT NULL, "content" text NOT NULL, "priority" varchar(10) NOT NULL, "published_at" datetime NULL, "expires_at" datetime NULL, "is_published" bool NOT NULL, "is_pinned" bool NOT NULL, "target_all" bool NOT NULL, "target_departments" text NOT NULL CHECK ((JSON_VALID("target_departments") OR "target_departments" IS NULL)), "target_branches" text NOT NULL CHECK ((JSON_VALID("target_branches") OR "target_branches" IS NULL)), "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "core_organizationsettings" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date_format" varchar(20) NOT NULL, "time_format" varchar(5) NOT NULL, "week_start_day" smallint unsigned NOT NULL CHECK ("week_start_day" >= 0), "enable_geofencing" bool NOT NULL, "enable_face_recognition" bool NOT NULL, "enable_biometric" bool NOT NULL, "leave_approval_levels" smallint unsigned NOT NULL CHECK ("leave_approval_levels" >= 0), "expense_approval_levels" smallint unsigned NOT NULL CHECK ("expense_approval_levels" >= 0), "probation_period_days" integer unsigned NOT NULL CHECK ("probation_period_days" >= 0), "notice_period_days" integer unsigned NOT NULL CHECK ("notice_period_days" >= 0), "payroll_cycle_day" smallint unsigned NOT NULL CHECK ("payroll_cycle_day" >= 0), "enable_auto_payroll" bool NOT NULL, "branding_primary_color" varchar(7) NOT NULL, "branding_secondary_color" varchar(7) NOT NULL, "custom_settings" text NOT NULL CHECK ((JSON_VALID("custom_settings") OR "custom_settings" IS NULL)), "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "core_announ_organiz_2721f4_idx" ON "core_announcement" ("organization_id", "is_published", "published_at" DESC); (params None)
CREATE INDEX "organizations_name_eee39956" ON "organizations" ("name"); (params ())
CREATE INDEX "organizations_subscription_status_9593031b" ON "organizations" ("subscription_status"); (params ())
CREATE INDEX "organizations_is_active_81512a9c" ON "organizations" ("is_active"); (params ())
CREATE INDEX "organizations_created_at_c3d31430" ON "organizations" ("created_at"); (params ())
CREATE INDEX "organizatio_subscri_794bfa_idx" ON "organizations" ("subscription_status", "is_active"); (params ())
CREATE INDEX "core_auditlog_timestamp_c6ef4463" ON "core_auditlog" ("timestamp"); (params ())
CREATE INDEX "core_auditlog_action_978477aa" ON "core_auditlog" ("action"); (params ())
CREATE INDEX "core_auditlog_resource_type_cb47b03d" ON "core_auditlog" ("resource_type"); (params ())
CREATE INDEX "core_auditlog_resource_id_a085b9ea" ON "core_auditlog" ("resource_id"); (params ())
CREATE INDEX "core_auditlog_organization_id_182834db" ON "core_auditlog" ("organization_id"); (params ())
CREATE INDEX "core_auditlog_user_id_3797aaab" ON "core_auditlog" ("user_id"); (params ())
CREATE INDEX "core_announcement_is_active_67558c4c" ON "core_announcement" ("is_active"); (params ())
CREATE INDEX "core_announcement_created_at_1eab1ccc" ON "core_announcement" ("created_at"); (params ())
CREATE INDEX "core_announcement_organization_id_fe95b013" ON "core_announcement" ("organization_id"); (params ())
CREATE INDEX "core_organizationsettings_is_active_562d466b" ON "core_organizationsettings" ("is_active"); (params ())
CREATE INDEX "core_organizationsettings_created_at_22c24a6e" ON "core_organizationsettings" ("created_at"); (params ())
CREATE INDEX "core_organizationsettings_organization_id_391888ec" ON "core_organizationsettings" ("organization_id"); (params ())
DROP INDEX "core_announ_organiz_2721f4_idx"; (params ())
CREATE INDEX "core_announ_organiz_f158c6_idx" ON "core_announcement" ("organization_id", "is_published", "published_at" DESC); (params None)
DROP INDEX "organizatio_subscri_794bfa_idx"; (params ())
CREATE INDEX "organizatio_subscri_91546a_idx" ON "organizations" ("subscription_status", "is_active"); (params None)
ALTER TABLE "core_announcement" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_announcement" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "core_announcement" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_announcement" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "title" varchar(255) NOT NULL, "content" text NOT NULL, "priority" varchar(10) NOT NULL, "published_at" datetime NULL, "expires_at" datetime NULL, "is_published" bool NOT NULL, "is_pinned" bool NOT NULL, "target_all" bool NOT NULL, "target_departments" text NOT NULL CHECK ((JSON_VALID("target_departments") OR "target_departments" IS NULL)), "target_branches" text NOT NULL CHECK ((JSON_VALID("target_branches") OR "target_branches" IS NULL)), "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__core_announcement" ("id", "is_active", "created_at", "updated_at", "title", "content", "priority", "published_at", "expires_at", "is_published", "is_pinned", "target_all", "target_departments", "target_branches", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "title", "content", "priority", "published_at", "expires_at", "is_published", "is_pinned", "target_all", "target_departments", "target_branches", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "core_announcement"; (params ())
DROP TABLE "core_announcement"; (params ())
ALTER TABLE "new__core_announcement" RENAME TO "core_announcement"; (params ())
CREATE INDEX "core_announcement_is_active_67558c4c" ON "core_announcement" ("is_active"); (params ())
CREATE INDEX "core_announcement_created_at_1eab1ccc" ON "core_announcement" ("created_at"); (params ())
CREATE INDEX "core_announcement_organization_id_fe95b013" ON "core_announcement" ("organization_id"); (params ())
CREATE INDEX "core_announcement_created_by_id_86b3e573" ON "core_announcement" ("created_by_id"); (params ())
CREATE INDEX "core_announcement_deleted_by_id_6487ba4b" ON "core_announcement" ("deleted_by_id"); (params ())
CREATE INDEX "core_announcement_is_deleted_c48e0085" ON "core_announcement" ("is_deleted"); (params ())
CREATE INDEX "core_announ_organiz_f158c6_idx" ON "core_announcement" ("organization_id", "is_published", "published_at" DESC); (params ())
ALTER TABLE "core_announcement" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_organizationsettings" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_organizationsettings" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "core_organizationsettings" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_organizationsettings" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date_format" varchar(20) NOT NULL, "time_format" varchar(5) NOT NULL, "week_start_day" smallint unsigned NOT NULL CHECK ("week_start_day" >= 0), "enable_geofencing" bool NOT NULL, "enable_face_recognition" bool NOT NULL, "enable_biometric" bool NOT NULL, "leave_approval_levels" smallint unsigned NOT NULL CHECK ("leave_approval_levels" >= 0), "expense_approval_levels" smallint unsigned NOT NULL CHECK ("expense_approval_levels" >= 0), "probation_period_days" integer unsigned NOT NULL CHECK ("probation_period_days" >= 0), "notice_period_days" integer unsigned NOT NULL CHECK ("notice_period_days" >= 0), "payroll_cycle_day" smallint unsigned NOT NULL CHECK ("payroll_cycle_day" >= 0), "enable_auto_payroll" bool NOT NULL, "branding_primary_color" varchar(7) NOT NULL, "branding_secondary_color" varchar(7) NOT NULL, "custom_settings" text NOT NULL CHECK ((JSON_VALID("custom_settings") OR "custom_settings" IS NULL)), "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__core_organizationsettings" ("id", "is_active", "created_at", "updated_at", "date_format", "time_format", "week_start_day", "enable_geofencing", "enable_face_recognition", "enable_biometric", "leave_approval_levels", "expense_approval_levels", "probation_period_days", "notice_period_days", "payroll_cycle_day", "enable_auto_payroll", "branding_primary_color", "branding_secondary_color", "custom_settings", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "date_format", "time_format", "week_start_day", "enable_geofencing", "enable_face_recognition", "enable_biometric", "leave_approval_levels", "expense_approval_levels", "probation_period_days", "notice_period_days", "payroll_cycle_day", "enable_auto_payroll", "branding_primary_color", "branding_secondary_color", "custom_settings", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "core_organizationsettings"; (params ())
DROP TABLE "core_organizationsettings"; (params ())
ALTER TABLE "new__core_organizationsettings" RENAME TO "core_organizationsettings"; (params ())
CREATE INDEX "core_announcement_updated_by_id_e722dfcf" ON "core_announcement" ("updated_by_id"); (params ())
CREATE INDEX "core_organizationsettings_is_active_562d466b" ON "core_organizationsettings" ("is_active"); (params ())
CREATE INDEX "core_organizationsettings_created_at_22c24a6e" ON "core_organizationsettings" ("created_at"); (params ())
CREATE INDEX "core_organizationsettings_organization_id_391888ec" ON "core_organizationsettings" ("organization_id"); (params ())
CREATE INDEX "core_organizationsettings_created_by_id_a89906c6" ON "core_organizationsettings" ("created_by_id"); (params ())
CREATE INDEX "core_organizationsettings_deleted_by_id_241e53a2" ON "core_organizationsettings" ("deleted_by_id"); (params ())
CREATE INDEX "core_organizationsettings_is_deleted_8cac047f" ON "core_organizationsettings" ("is_deleted"); (params ())
ALTER TABLE "core_organizationsettings" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "core_auditl_organiz_c0dcbd_idx" ON "core_auditlog" ("organization_id", "timestamp"); (params None)
CREATE INDEX "core_auditl_user_id_7b678c_idx" ON "core_auditlog" ("user_id", "timestamp"); (params None)
CREATE INDEX "core_auditl_resourc_a674ad_idx" ON "core_auditlog" ("resource_type", "resource_id"); (params None)
CREATE INDEX "core_organizationsettings_updated_by_id_0041f13c" ON "core_organizationsettings" ("updated_by_id"); (params ())
CREATE TABLE "core_organizationdomain" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "domain_name" varchar(255) NOT NULL UNIQUE, "is_primary" bool NOT NULL, "is_active" bool NOT NULL, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "core_orgdomain_primary_idx" ON "core_organizationdomain" ("organization_id", "is_primary"); (params None)
CREATE INDEX "core_orgdomain_domain_idx" ON "core_organizationdomain" ("domain_name"); (params None)
CREATE INDEX "core_organizationdomain_created_at_e7542b12" ON "core_organizationdomain" ("created_at"); (params ())
CREATE INDEX "core_organizationdomain_organization_id_e79a8a75" ON "core_organizationdomain" ("organization_id"); (params ())
DROP INDEX "core_orgdomain_primary_idx"; (params ())
CREATE INDEX "core_organi_organiz_2e4965_idx" ON "core_organizationdomain" ("organization_id", "is_primary"); (params None)
DROP INDEX "core_orgdomain_domain_idx"; (params ())
CREATE INDEX "core_organi_domain__d8c0e7_idx" ON "core_organizationdomain" ("domain_name"); (params None)
DROP INDEX "core_auditl_organiz_c0dcbd_idx"; (params ())
CREATE TABLE "new__core_auditlog" ("id" char(32) NOT NULL PRIMARY KEY, "timestamp" datetime NOT NULL, "user_email" varchar(254) NULL, "action" varchar(50) NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "resource_repr" varchar(255) NULL, "old_values" text NULL CHECK ((JSON_VALID("old_values") OR "old_values" IS NULL)), "new_values" text NULL CHECK ((JSON_VALID("new_values") OR "new_values" IS NULL)), "changed_fields" text NOT NULL CHECK ((JSON_VALID("changed_fields") OR "changed_fields" IS NULL)), "ip_address" char(39) NULL, "user_agent" text NULL, "request_id" varchar(100) NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__core_auditlog" ("id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id") SELECT "id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id" FROM "core_auditlog"; (params ())
DROP TABLE "core_auditlog"; (params ())
ALTER TABLE "new__core_auditlog" RENAME TO "core_auditlog"; (params ())
CREATE INDEX "core_auditlog_timestamp_c6ef4463" ON "core_auditlog" ("timestamp"); (params ())
CREATE INDEX "core_auditlog_action_978477aa" ON "core_auditlog" ("action"); (params ())
CREATE INDEX "core_auditlog_resource_type_cb47b03d" ON "core_auditlog" ("resource_type"); (params ())
CREATE INDEX "core_auditlog_resource_id_a085b9ea" ON "core_auditlog" ("resource_id"); (params ())
CREATE INDEX "core_auditlog_user_id_3797aaab" ON "core_auditlog" ("user_id"); (params ())
CREATE INDEX "core_auditl_user_id_7b678c_idx" ON "core_auditlog" ("user_id", "timestamp"); (params ())
CREATE INDEX "core_auditl_resourc_a674ad_idx" ON "core_auditlog" ("resource_type", "resource_id"); (params ())
CREATE TABLE "new__core_auditlog" ("id" char(32) NOT NULL PRIMARY KEY, "timestamp" datetime NOT NULL, "user_email" varchar(254) NULL, "action" varchar(50) NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "resource_repr" varchar(255) NULL, "old_values" text NULL CHECK ((JSON_VALID("old_values") OR "old_values" IS NULL)), "new_values" text NULL CHECK ((JSON_VALID("new_values") OR "new_values" IS NULL)), "changed_fields" text NOT NULL CHECK ((JSON_VALID("changed_fields") OR "changed_fields" IS NULL)), "ip_address" char(39) NULL, "user_agent" text NULL, "request_id" varchar(100) NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_at" datetime NOT NULL); (params None)
INSERT INTO "new__core_auditlog" ("id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at") SELECT "id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", '2026-02-27 11:52:10.632464' FROM "core_auditlog"; (params ())
DROP TABLE "core_auditlog"; (params ())
ALTER TABLE "new__core_auditlog" RENAME TO "core_auditlog"; (params ())
CREATE INDEX "core_auditlog_timestamp_c6ef4463" ON "core_auditlog" ("timestamp"); (params ())
CREATE INDEX "core_auditlog_action_978477aa" ON "core_auditlog" ("action"); (params ())
CREATE INDEX "core_auditlog_resource_type_cb47b03d" ON "core_auditlog" ("resource_type"); (params ())
CREATE INDEX "core_auditlog_resource_id_a085b9ea" ON "core_auditlog" ("resource_id"); (params ())
CREATE INDEX "core_auditlog_user_id_3797aaab" ON "core_auditlog" ("user_id"); (params ())
CREATE INDEX "core_auditlog_created_at_3d40b819" ON "core_auditlog" ("created_at"); (params ())
CREATE INDEX "core_auditl_user_id_7b678c_idx" ON "core_auditlog" ("user_id", "timestamp"); (params ())
CREATE INDEX "core_auditl_resourc_a674ad_idx" ON "core_auditlog" ("resource_type", "resource_id"); (params ())
ALTER TABLE "core_auditlog" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_auditlog" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "core_auditlog" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_auditlog" ("id" char(32) NOT NULL PRIMARY KEY, "timestamp" datetime NOT NULL, "user_email" varchar(254) NULL, "action" varchar(50) NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "resource_repr" varchar(255) NULL, "old_values" text NULL CHECK ((JSON_VALID("old_values") OR "old_values" IS NULL)), "new_values" text NULL CHECK ((JSON_VALID("new_values") OR "new_values" IS NULL)), "changed_fields" text NOT NULL CHECK ((JSON_VALID("changed_fields") OR "changed_fields" IS NULL)), "ip_address" char(39) NULL, "user_agent" text NULL, "request_id" varchar(100) NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__core_auditlog" ("id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active") SELECT "id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at", "created_by_id", "deleted_at", "deleted_by_id", 1 FROM "core_auditlog"; (params ())
DROP TABLE "core_auditlog"; (params ())
ALTER TABLE "new__core_auditlog" RENAME TO "core_auditlog"; (params ())
CREATE INDEX "core_auditlog_timestamp_c6ef4463" ON "core_auditlog" ("timestamp"); (params ())
CREATE INDEX "core_auditlog_action_978477aa" ON "core_auditlog" ("action"); (params ())
CREATE INDEX "core_auditlog_resource_type_cb47b03d" ON "core_auditlog" ("resource_type"); (params ())
CREATE INDEX "core_auditlog_resource_id_a085b9ea" ON "core_auditlog" ("resource_id"); (params ())
CREATE INDEX "core_auditlog_user_id_3797aaab" ON "core_auditlog" ("user_id"); (params ())
CREATE INDEX "core_auditlog_created_at_3d40b819" ON "core_auditlog" ("created_at"); (params ())
CREATE INDEX "core_auditlog_created_by_id_3ff81466" ON "core_auditlog" ("created_by_id"); (params ())
CREATE INDEX "core_auditlog_deleted_by_id_a217ac67" ON "core_auditlog" ("deleted_by_id"); (params ())
CREATE INDEX "core_auditlog_is_active_db1bc011" ON "core_auditlog" ("is_active"); (params ())
CREATE INDEX "core_auditl_user_id_7b678c_idx" ON "core_auditlog" ("user_id", "timestamp"); (params ())
CREATE INDEX "core_auditl_resourc_a674ad_idx" ON "core_auditlog" ("resource_type", "resource_id"); (params ())
CREATE TABLE "new__core_auditlog" ("id" char(32) NOT NULL PRIMARY KEY, "timestamp" datetime NOT NULL, "user_email" varchar(254) NULL, "action" varchar(50) NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "resource_repr" varchar(255) NULL, "old_values" text NULL CHECK ((JSON_VALID("old_values") OR "old_values" IS NULL)), "new_values" text NULL CHECK ((JSON_VALID("new_values") OR "new_values" IS NULL)), "changed_fields" text NOT NULL CHECK ((JSON_VALID("changed_fields") OR "changed_fields" IS NULL)), "ip_address" char(39) NULL, "user_agent" text NULL, "request_id" varchar(100) NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__core_auditlog" ("id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted") SELECT "id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", 0 FROM "core_auditlog"; (params ())
DROP TABLE "core_auditlog"; (params ())
ALTER TABLE "new__core_auditlog" RENAME TO "core_auditlog"; (params ())
CREATE INDEX "core_auditlog_timestamp_c6ef4463" ON "core_auditlog" ("timestamp"); (params ())
CREATE INDEX "core_auditlog_action_978477aa" ON "core_auditlog" ("action"); (params ())
CREATE INDEX "core_auditlog_resource_type_cb47b03d" ON "core_auditlog" ("resource_type"); (params ())
CREATE INDEX "core_auditlog_resource_id_a085b9ea" ON "core_auditlog" ("resource_id"); (params ())
CREATE INDEX "core_auditlog_user_id_3797aaab" ON "core_auditlog" ("user_id"); (params ())
CREATE INDEX "core_auditlog_created_at_3d40b819" ON "core_auditlog" ("created_at"); (params ())
CREATE INDEX "core_auditlog_created_by_id_3ff81466" ON "core_auditlog" ("created_by_id"); (params ())
CREATE INDEX "core_auditlog_deleted_by_id_a217ac67" ON "core_auditlog" ("deleted_by_id"); (params ())
CREATE INDEX "core_auditlog_is_active_db1bc011" ON "core_auditlog" ("is_active"); (params ())
CREATE INDEX "core_auditlog_is_deleted_ce057d9b" ON "core_auditlog" ("is_deleted"); (params ())
CREATE INDEX "core_auditl_user_id_7b678c_idx" ON "core_auditlog" ("user_id", "timestamp"); (params ())
CREATE INDEX "core_auditl_resourc_a674ad_idx" ON "core_auditlog" ("resource_type", "resource_id"); (params ())
ALTER TABLE "core_auditlog" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_auditlog" ("id" char(32) NOT NULL PRIMARY KEY, "timestamp" datetime NOT NULL, "user_email" varchar(254) NULL, "action" varchar(50) NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "resource_repr" varchar(255) NULL, "old_values" text NULL CHECK ((JSON_VALID("old_values") OR "old_values" IS NULL)), "new_values" text NULL CHECK ((JSON_VALID("new_values") OR "new_values" IS NULL)), "changed_fields" text NOT NULL CHECK ((JSON_VALID("changed_fields") OR "changed_fields" IS NULL)), "ip_address" char(39) NULL, "user_agent" text NULL, "request_id" varchar(100) NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL, "is_deleted" bool NOT NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_at" datetime NOT NULL); (params None)
INSERT INTO "new__core_auditlog" ("id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_at") SELECT "id", "timestamp", "user_email", "action", "resource_type", "resource_id", "resource_repr", "old_values", "new_values", "changed_fields", "ip_address", "user_agent", "request_id", "user_id", "created_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", '2026-02-27 11:52:10.976679' FROM "core_auditlog"; (params ())
DROP TABLE "core_auditlog"; (params ())
ALTER TABLE "new__core_auditlog" RENAME TO "core_auditlog"; (params ())
CREATE INDEX "core_auditlog_timestamp_c6ef4463" ON "core_auditlog" ("timestamp"); (params ())
CREATE INDEX "core_auditlog_action_978477aa" ON "core_auditlog" ("action"); (params ())
CREATE INDEX "core_auditlog_resource_type_cb47b03d" ON "core_auditlog" ("resource_type"); (params ())
CREATE INDEX "core_auditlog_resource_id_a085b9ea" ON "core_auditlog" ("resource_id"); (params ())
CREATE INDEX "core_auditlog_user_id_3797aaab" ON "core_auditlog" ("user_id"); (params ())
CREATE INDEX "core_auditlog_created_at_3d40b819" ON "core_auditlog" ("created_at"); (params ())
CREATE INDEX "core_auditlog_created_by_id_3ff81466" ON "core_auditlog" ("created_by_id"); (params ())
CREATE INDEX "core_auditlog_deleted_by_id_a217ac67" ON "core_auditlog" ("deleted_by_id"); (params ())
CREATE INDEX "core_auditlog_is_active_db1bc011" ON "core_auditlog" ("is_active"); (params ())
CREATE INDEX "core_auditlog_is_deleted_ce057d9b" ON "core_auditlog" ("is_deleted"); (params ())
CREATE INDEX "core_auditlog_organization_id_182834db" ON "core_auditlog" ("organization_id"); (params ())
CREATE INDEX "core_auditl_user_id_7b678c_idx" ON "core_auditlog" ("user_id", "timestamp"); (params ())
CREATE INDEX "core_auditl_resourc_a674ad_idx" ON "core_auditlog" ("resource_type", "resource_id"); (params ())
ALTER TABLE "core_auditlog" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_featureflag" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_featureflag" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "core_featureflag" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_featureflag" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "is_enabled" bool NOT NULL, "enabled_for_all" bool NOT NULL, "enabled_organizations" text NOT NULL CHECK ((JSON_VALID("enabled_organizations") OR "enabled_organizations" IS NULL)), "enabled_users" text NOT NULL CHECK ((JSON_VALID("enabled_users") OR "enabled_users" IS NULL)), "enabled_percentage" integer unsigned NOT NULL CHECK ("enabled_percentage" >= 0), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__core_featureflag" ("id", "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active") SELECT "id", "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", 1 FROM "core_featureflag"; (params ())
DROP TABLE "core_featureflag"; (params ())
ALTER TABLE "new__core_featureflag" RENAME TO "core_featureflag"; (params ())
CREATE INDEX "core_auditlog_updated_by_id_2ea38a94" ON "core_auditlog" ("updated_by_id"); (params ())
CREATE INDEX "core_featureflag_created_by_id_4440631b" ON "core_featureflag" ("created_by_id"); (params ())
CREATE INDEX "core_featureflag_deleted_by_id_4ba06f90" ON "core_featureflag" ("deleted_by_id"); (params ())
CREATE INDEX "core_featureflag_is_active_62b7c21b" ON "core_featureflag" ("is_active"); (params ())
CREATE TABLE "new__core_featureflag" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "is_enabled" bool NOT NULL, "enabled_for_all" bool NOT NULL, "enabled_organizations" text NOT NULL CHECK ((JSON_VALID("enabled_organizations") OR "enabled_organizations" IS NULL)), "enabled_users" text NOT NULL CHECK ((JSON_VALID("enabled_users") OR "enabled_users" IS NULL)), "enabled_percentage" integer unsigned NOT NULL CHECK ("enabled_percentage" >= 0), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__core_featureflag" ("id", "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted") SELECT "id", "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", 0 FROM "core_featureflag"; (params ())
DROP TABLE "core_featureflag"; (params ())
ALTER TABLE "new__core_featureflag" RENAME TO "core_featureflag"; (params ())
CREATE INDEX "core_featureflag_created_by_id_4440631b" ON "core_featureflag" ("created_by_id"); (params ())
CREATE INDEX "core_featureflag_deleted_by_id_4ba06f90" ON "core_featureflag" ("deleted_by_id"); (params ())
CREATE INDEX "core_featureflag_is_active_62b7c21b" ON "core_featureflag" ("is_active"); (params ())
CREATE INDEX "core_featureflag_is_deleted_b292b891" ON "core_featureflag" ("is_deleted"); (params ())
ALTER TABLE "core_featureflag" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE UNIQUE INDEX "core_featureflag_organization_id_name_8f8d9655_uniq" ON "core_featureflag" ("organization_id", "name"); (params ())
ALTER TABLE "core_featureflag" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_organizationdomain" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "core_organizationdomain" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "core_organizationdomain" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_organizationdomain" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "domain_name" varchar(255) NOT NULL UNIQUE, "is_primary" bool NOT NULL, "is_active" bool NOT NULL, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__core_organizationdomain" ("id", "created_at", "updated_at", "domain_name", "is_primary", "is_active", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "created_at", "updated_at", "domain_name", "is_primary", "is_active", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "core_organizationdomain"; (params ())
DROP TABLE "core_organizationdomain"; (params ())
ALTER TABLE "new__core_organizationdomain" RENAME TO "core_organizationdomain"; (params ())
CREATE INDEX "core_featureflag_organization_id_0444dd66" ON "core_featureflag" ("organization_id"); (params ())
CREATE INDEX "core_featureflag_updated_by_id_5bd974a7" ON "core_featureflag" ("updated_by_id"); (params ())
CREATE INDEX "core_organizationdomain_created_at_e7542b12" ON "core_organizationdomain" ("created_at"); (params ())
CREATE INDEX "core_organizationdomain_organization_id_e79a8a75" ON "core_organizationdomain" ("organization_id"); (params ())
CREATE INDEX "core_organizationdomain_created_by_id_f0478e19" ON "core_organizationdomain" ("created_by_id"); (params ())
CREATE INDEX "core_organizationdomain_deleted_by_id_95246cc6" ON "core_organizationdomain" ("deleted_by_id"); (params ())
CREATE INDEX "core_organizationdomain_is_deleted_d7ffb356" ON "core_organizationdomain" ("is_deleted"); (params ())
CREATE INDEX "core_organi_organiz_2e4965_idx" ON "core_organizationdomain" ("organization_id", "is_primary"); (params ())
CREATE INDEX "core_organi_domain__d8c0e7_idx" ON "core_organizationdomain" ("domain_name"); (params ())
ALTER TABLE "core_organizationdomain" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__core_featureflag" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "is_enabled" bool NOT NULL, "enabled_for_all" bool NOT NULL, "enabled_organizations" text NOT NULL CHECK ((JSON_VALID("enabled_organizations") OR "enabled_organizations" IS NULL)), "enabled_users" text NOT NULL CHECK ((JSON_VALID("enabled_users") OR "enabled_users" IS NULL)), "enabled_percentage" integer unsigned NOT NULL CHECK ("enabled_percentage" >= 0), "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL, "is_deleted" bool NOT NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_at" datetime NOT NULL); (params None)
INSERT INTO "new__core_featureflag" ("id", "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_by_id", "created_at") SELECT "id", "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_by_id", "created_at" FROM "core_featureflag"; (params ())
DROP TABLE "core_featureflag"; (params ())
ALTER TABLE "new__core_featureflag" RENAME TO "core_featureflag"; (params ())
CREATE INDEX "core_organizationdomain_updated_by_id_de9e2c4f" ON "core_organizationdomain" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "core_featureflag_organization_id_name_8f8d9655_uniq" ON "core_featureflag" ("organization_id", "name"); (params ())
CREATE INDEX "core_featureflag_created_by_id_4440631b" ON "core_featureflag" ("created_by_id"); (params ())
CREATE INDEX "core_featureflag_deleted_by_id_4ba06f90" ON "core_featureflag" ("deleted_by_id"); (params ())
CREATE INDEX "core_featureflag_is_active_62b7c21b" ON "core_featureflag" ("is_active"); (params ())
CREATE INDEX "core_featureflag_is_deleted_b292b891" ON "core_featureflag" ("is_deleted"); (params ())
CREATE INDEX "core_featureflag_organization_id_0444dd66" ON "core_featureflag" ("organization_id"); (params ())
CREATE INDEX "core_featureflag_updated_by_id_5bd974a7" ON "core_featureflag" ("updated_by_id"); (params ())
CREATE INDEX "core_featureflag_created_at_df0913ed" ON "core_featureflag" ("created_at"); (params ())
CREATE TABLE "new__core_featureflag" ("name" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "is_enabled" bool NOT NULL, "enabled_for_all" bool NOT NULL, "enabled_organizations" text NOT NULL CHECK ((JSON_VALID("enabled_organizations") OR "enabled_organizations" IS NULL)), "enabled_users" text NOT NULL CHECK ((JSON_VALID("enabled_users") OR "enabled_users" IS NULL)), "enabled_percentage" integer unsigned NOT NULL CHECK ("enabled_percentage" >= 0), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL, "is_deleted" bool NOT NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "id" char(32) NOT NULL PRIMARY KEY); (params None)
INSERT INTO "new__core_featureflag" ("name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_by_id", "id") SELECT "name", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_by_id", "id" FROM "core_featureflag"; (params ())
DROP TABLE "core_featureflag"; (params ())
ALTER TABLE "new__core_featureflag" RENAME TO "core_featureflag"; (params ())
CREATE UNIQUE INDEX "core_featureflag_organization_id_name_8f8d9655_uniq" ON "core_featureflag" ("organization_id", "name"); (params ())
CREATE INDEX "core_featureflag_created_at_df0913ed" ON "core_featureflag" ("created_at"); (params ())
CREATE INDEX "core_featureflag_created_by_id_4440631b" ON "core_featureflag" ("created_by_id"); (params ())
CREATE INDEX "core_featureflag_deleted_by_id_4ba06f90" ON "core_featureflag" ("deleted_by_id"); (params ())
CREATE INDEX "core_featureflag_is_active_62b7c21b" ON "core_featureflag" ("is_active"); (params ())
CREATE INDEX "core_featureflag_is_deleted_b292b891" ON "core_featureflag" ("is_deleted"); (params ())
CREATE INDEX "core_featureflag_organization_id_0444dd66" ON "core_featureflag" ("organization_id"); (params ())
CREATE INDEX "core_featureflag_updated_by_id_5bd974a7" ON "core_featureflag" ("updated_by_id"); (params ())
CREATE TABLE "new__core_featureflag" ("id" char(32) NOT NULL PRIMARY KEY, "description" text NOT NULL, "is_enabled" bool NOT NULL, "enabled_for_all" bool NOT NULL, "enabled_organizations" text NOT NULL CHECK ((JSON_VALID("enabled_organizations") OR "enabled_organizations" IS NULL)), "enabled_users" text NOT NULL CHECK ((JSON_VALID("enabled_users") OR "enabled_users" IS NULL)), "enabled_percentage" integer unsigned NOT NULL CHECK ("enabled_percentage" >= 0), "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL, "is_deleted" bool NOT NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "name" varchar(100) NOT NULL); (params None)
INSERT INTO "new__core_featureflag" ("id", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_by_id", "name") SELECT "id", "description", "is_enabled", "enabled_for_all", "enabled_organizations", "enabled_users", "enabled_percentage", "created_at", "updated_at", "created_by_id", "deleted_at", "deleted_by_id", "is_active", "is_deleted", "organization_id", "updated_by_id", "name" FROM "core_featureflag"; (params ())
DROP TABLE "core_featureflag"; (params ())
ALTER TABLE "new__core_featureflag" RENAME TO "core_featureflag"; (params ())
CREATE UNIQUE INDEX "core_featureflag_organization_id_name_8f8d9655_uniq" ON "core_featureflag" ("organization_id", "name"); (params ())
CREATE INDEX "core_featureflag_created_at_df0913ed" ON "core_featureflag" ("created_at"); (params ())
CREATE INDEX "core_featureflag_created_by_id_4440631b" ON "core_featureflag" ("created_by_id"); (params ())
CREATE INDEX "core_featureflag_deleted_by_id_4ba06f90" ON "core_featureflag" ("deleted_by_id"); (params ())
CREATE INDEX "core_featureflag_is_active_62b7c21b" ON "core_featureflag" ("is_active"); (params ())
CREATE INDEX "core_featureflag_is_deleted_b292b891" ON "core_featureflag" ("is_deleted"); (params ())
CREATE INDEX "core_featureflag_organization_id_0444dd66" ON "core_featureflag" ("organization_id"); (params ())
CREATE INDEX "core_featureflag_updated_by_id_5bd974a7" ON "core_featureflag" ("updated_by_id"); (params ())
CREATE TABLE "new__core_organizationdomain" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "domain_name" varchar(255) NOT NULL UNIQUE, "is_primary" bool NOT NULL, "is_active" bool NOT NULL, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "id" char(32) NOT NULL PRIMARY KEY); (params None)
INSERT INTO "new__core_organizationdomain" ("created_at", "updated_at", "domain_name", "is_primary", "is_active", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "id") SELECT "created_at", "updated_at", "domain_name", "is_primary", "is_active", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "id" FROM "core_organizationdomain"; (params ())
DROP TABLE "core_organizationdomain"; (params ())
ALTER TABLE "new__core_organizationdomain" RENAME TO "core_organizationdomain"; (params ())
CREATE INDEX "core_organizationdomain_created_at_e7542b12" ON "core_organizationdomain" ("created_at"); (params ())
CREATE INDEX "core_organizationdomain_organization_id_e79a8a75" ON "core_organizationdomain" ("organization_id"); (params ())
CREATE INDEX "core_organizationdomain_created_by_id_f0478e19" ON "core_organizationdomain" ("created_by_id"); (params ())
CREATE INDEX "core_organizationdomain_deleted_by_id_95246cc6" ON "core_organizationdomain" ("deleted_by_id"); (params ())
CREATE INDEX "core_organizationdomain_is_deleted_d7ffb356" ON "core_organizationdomain" ("is_deleted"); (params ())
CREATE INDEX "core_organizationdomain_updated_by_id_de9e2c4f" ON "core_organizationdomain" ("updated_by_id"); (params ())
CREATE INDEX "core_organi_organiz_2e4965_idx" ON "core_organizationdomain" ("organization_id", "is_primary"); (params ())
CREATE INDEX "core_organi_domain__d8c0e7_idx" ON "core_organizationdomain" ("domain_name"); (params ())
CREATE TABLE "new__core_organizationdomain" ("id" char(32) NOT NULL PRIMARY KEY, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "domain_name" varchar(255) NOT NULL UNIQUE, "is_primary" bool NOT NULL, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__core_organizationdomain" ("id", "created_at", "updated_at", "domain_name", "is_primary", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "is_active") SELECT "id", "created_at", "updated_at", "domain_name", "is_primary", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "is_active" FROM "core_organizationdomain"; (params ())
DROP TABLE "core_organizationdomain"; (params ())
ALTER TABLE "new__core_organizationdomain" RENAME TO "core_organizationdomain"; (params ())
CREATE INDEX "core_organizationdomain_created_at_e7542b12" ON "core_organizationdomain" ("created_at"); (params ())
CREATE INDEX "core_organizationdomain_organization_id_e79a8a75" ON "core_organizationdomain" ("organization_id"); (params ())
CREATE INDEX "core_organizationdomain_created_by_id_f0478e19" ON "core_organizationdomain" ("created_by_id"); (params ())
CREATE INDEX "core_organizationdomain_deleted_by_id_95246cc6" ON "core_organizationdomain" ("deleted_by_id"); (params ())
CREATE INDEX "core_organizationdomain_is_deleted_d7ffb356" ON "core_organizationdomain" ("is_deleted"); (params ())
CREATE INDEX "core_organizationdomain_updated_by_id_de9e2c4f" ON "core_organizationdomain" ("updated_by_id"); (params ())
CREATE INDEX "core_organizationdomain_is_active_52a8d7d7" ON "core_organizationdomain" ("is_active"); (params ())
CREATE INDEX "core_organi_organiz_2e4965_idx" ON "core_organizationdomain" ("organization_id", "is_primary"); (params ())
CREATE INDEX "core_organi_domain__d8c0e7_idx" ON "core_organizationdomain" ("domain_name"); (params ())
CREATE TABLE "new__core_organizationdomain" ("id" char(32) NOT NULL PRIMARY KEY, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "domain_name" varchar(255) NOT NULL UNIQUE, "is_primary" bool NOT NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__core_organizationdomain" ("id", "created_at", "updated_at", "domain_name", "is_primary", "is_active", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "organization_id") SELECT "id", "created_at", "updated_at", "domain_name", "is_primary", "is_active", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "organization_id" FROM "core_organizationdomain"; (params ())
DROP TABLE "core_organizationdomain"; (params ())
ALTER TABLE "new__core_organizationdomain" RENAME TO "core_organizationdomain"; (params ())
CREATE INDEX "core_organizationdomain_created_at_e7542b12" ON "core_organizationdomain" ("created_at"); (params ())
CREATE INDEX "core_organizationdomain_is_active_52a8d7d7" ON "core_organizationdomain" ("is_active"); (params ())
CREATE INDEX "core_organizationdomain_created_by_id_f0478e19" ON "core_organizationdomain" ("created_by_id"); (params ())
CREATE INDEX "core_organizationdomain_deleted_by_id_95246cc6" ON "core_organizationdomain" ("deleted_by_id"); (params ())
CREATE INDEX "core_organizationdomain_is_deleted_d7ffb356" ON "core_organizationdomain" ("is_deleted"); (params ())
CREATE INDEX "core_organizationdomain_updated_by_id_de9e2c4f" ON "core_organizationdomain" ("updated_by_id"); (params ())
CREATE INDEX "core_organizationdomain_organization_id_e79a8a75" ON "core_organizationdomain" ("organization_id"); (params ())
CREATE INDEX "core_organi_organiz_2e4965_idx" ON "core_organizationdomain" ("organization_id", "is_primary"); (params ())
CREATE INDEX "core_organi_domain__d8c0e7_idx" ON "core_organizationdomain" ("domain_name"); (params ())
CREATE INDEX "core_auditl_organiz_c0dcbd_idx" ON "core_auditlog" ("organization_id", "timestamp"); (params None)
ALTER TABLE "core_featureflag" DROP COLUMN "enabled_organizations"; (params ())
CREATE TABLE "abac_attributetype" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(100) NOT NULL, "category" varchar(20) NOT NULL, "data_type" varchar(20) NOT NULL, "description" text NOT NULL, "allowed_values" text NULL CHECK ((JSON_VALID("allowed_values") OR "allowed_values" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_permission" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "module" varchar(50) NOT NULL, "action" varchar(50) NULL, "permission_type" varchar(50) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_policy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "code" varchar(100) NOT NULL UNIQUE, "description" text NOT NULL, "policy_type" varchar(20) NOT NULL, "effect" varchar(10) NOT NULL, "priority" integer NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "actions" text NOT NULL CHECK ((JSON_VALID("actions") OR "actions" IS NULL)), "combine_logic" varchar(10) NOT NULL, "is_active" bool NOT NULL, "valid_from" datetime NULL, "valid_until" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_policyrule" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "attribute_path" varchar(255) NOT NULL, "operator" varchar(20) NOT NULL, "value" text NOT NULL CHECK ((JSON_VALID("value") OR "value" IS NULL)), "negate" bool NOT NULL, "is_active" bool NOT NULL, "attribute_type_id" char(32) NOT NULL REFERENCES "abac_attributetype" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_role" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL, "description" text NOT NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_role_policies" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "role_id" char(32) NOT NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_grouppolicy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "group_type" varchar(50) NOT NULL, "group_value" varchar(200) NOT NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_grouppolicy_policies" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "grouppolicy_id" char(32) NOT NULL REFERENCES "abac_grouppolicy" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_policylog" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "action" varchar(50) NOT NULL, "result" bool NOT NULL, "evaluated_at" datetime NOT NULL, "subject_attributes" text NOT NULL CHECK ((JSON_VALID("subject_attributes") OR "subject_attributes" IS NULL)), "resource_attributes" text NOT NULL CHECK ((JSON_VALID("resource_attributes") OR "resource_attributes" IS NULL)), "environment_attributes" text NOT NULL CHECK ((JSON_VALID("environment_attributes") OR "environment_attributes" IS NULL)), "policies_evaluated" text NOT NULL CHECK ((JSON_VALID("policies_evaluated") OR "policies_evaluated" IS NULL)), "decision_reason" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_roleassignment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "scope" varchar(20) NOT NULL, "scope_id" char(32) NULL, "is_active" bool NOT NULL, "valid_from" datetime NULL, "valid_until" datetime NULL, "assigned_at" datetime NOT NULL, "assigned_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "role_id" char(32) NOT NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_rolepermission" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "permission_id" char(32) NOT NULL REFERENCES "abac_permission" ("id") DEFERRABLE INITIALLY DEFERRED, "role_id" char(32) NOT NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_userpolicy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "priority_override" integer NULL, "is_active" bool NOT NULL, "assigned_at" datetime NOT NULL, "valid_from" datetime NULL, "valid_until" datetime NULL, "assigned_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "abac_userrole" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "assigned_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "role_id" char(32) NOT NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE UNIQUE INDEX "abac_attributetype_code_d11cc8f1_uniq" ON "abac_attributetype" ("code"); (params ())
CREATE INDEX "abac_attributetype_created_at_a5340031" ON "abac_attributetype" ("created_at"); (params ())
CREATE INDEX "abac_attributetype_is_deleted_3b9970b0" ON "abac_attributetype" ("is_deleted"); (params ())
CREATE INDEX "abac_attributetype_is_active_fe42599d" ON "abac_attributetype" ("is_active"); (params ())
CREATE INDEX "abac_attributetype_code_d11cc8f1" ON "abac_attributetype" ("code"); (params ())
CREATE INDEX "abac_attributetype_created_by_id_42bf3014" ON "abac_attributetype" ("created_by_id"); (params ())
CREATE INDEX "abac_attributetype_deleted_by_id_beab9a46" ON "abac_attributetype" ("deleted_by_id"); (params ())
CREATE INDEX "abac_attributetype_updated_by_id_852aa056" ON "abac_attributetype" ("updated_by_id"); (params ())
CREATE INDEX "abac_permission_created_at_8511a8d0" ON "abac_permission" ("created_at"); (params ())
CREATE INDEX "abac_permission_is_deleted_c457f69f" ON "abac_permission" ("is_deleted"); (params ())
CREATE INDEX "abac_permission_is_active_3f6fb9f5" ON "abac_permission" ("is_active"); (params ())
CREATE INDEX "abac_permission_module_0dd38b29" ON "abac_permission" ("module"); (params ())
CREATE INDEX "abac_permission_action_5ecbcfcc" ON "abac_permission" ("action"); (params ())
CREATE INDEX "abac_permission_permission_type_6a625ad7" ON "abac_permission" ("permission_type"); (params ())
CREATE INDEX "abac_permission_created_by_id_7fb3f127" ON "abac_permission" ("created_by_id"); (params ())
CREATE INDEX "abac_permission_deleted_by_id_5114eccf" ON "abac_permission" ("deleted_by_id"); (params ())
CREATE INDEX "abac_permission_updated_by_id_4cb1e716" ON "abac_permission" ("updated_by_id"); (params ())
CREATE INDEX "abac_policy_created_at_9436c1e4" ON "abac_policy" ("created_at"); (params ())
CREATE INDEX "abac_policy_is_deleted_03ace784" ON "abac_policy" ("is_deleted"); (params ())
CREATE INDEX "abac_policy_created_by_id_2fe65a68" ON "abac_policy" ("created_by_id"); (params ())
CREATE INDEX "abac_policy_deleted_by_id_fe366ab8" ON "abac_policy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_policy_updated_by_id_6897ca52" ON "abac_policy" ("updated_by_id"); (params ())
CREATE INDEX "abac_policyrule_created_at_d6470d02" ON "abac_policyrule" ("created_at"); (params ())
CREATE INDEX "abac_policyrule_is_deleted_59d07225" ON "abac_policyrule" ("is_deleted"); (params ())
CREATE INDEX "abac_policyrule_attribute_type_id_252055aa" ON "abac_policyrule" ("attribute_type_id"); (params ())
CREATE INDEX "abac_policyrule_created_by_id_0ee21100" ON "abac_policyrule" ("created_by_id"); (params ())
CREATE INDEX "abac_policyrule_deleted_by_id_a3fc07af" ON "abac_policyrule" ("deleted_by_id"); (params ())
CREATE INDEX "abac_policyrule_policy_id_cc309c35" ON "abac_policyrule" ("policy_id"); (params ())
CREATE INDEX "abac_policyrule_updated_by_id_0a32536f" ON "abac_policyrule" ("updated_by_id"); (params ())
CREATE INDEX "abac_role_created_at_606afd7d" ON "abac_role" ("created_at"); (params ())
CREATE INDEX "abac_role_is_deleted_80b60557" ON "abac_role" ("is_deleted"); (params ())
CREATE INDEX "abac_role_code_72696b8b" ON "abac_role" ("code"); (params ())
CREATE INDEX "abac_role_created_by_id_38d826a9" ON "abac_role" ("created_by_id"); (params ())
CREATE INDEX "abac_role_deleted_by_id_c17d7b97" ON "abac_role" ("deleted_by_id"); (params ())
CREATE INDEX "abac_role_updated_by_id_dd535a3c" ON "abac_role" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "abac_role_policies_role_id_policy_id_819e39ba_uniq" ON "abac_role_policies" ("role_id", "policy_id"); (params ())
CREATE INDEX "abac_role_policies_role_id_5057ff45" ON "abac_role_policies" ("role_id"); (params ())
CREATE INDEX "abac_role_policies_policy_id_24a7a1e5" ON "abac_role_policies" ("policy_id"); (params ())
CREATE UNIQUE INDEX "abac_grouppolicy_group_type_group_value_8105a483_uniq" ON "abac_grouppolicy" ("group_type", "group_value"); (params ())
CREATE INDEX "abac_grouppolicy_created_at_58c69962" ON "abac_grouppolicy" ("created_at"); (params ())
CREATE INDEX "abac_grouppolicy_is_deleted_5c3bc772" ON "abac_grouppolicy" ("is_deleted"); (params ())
CREATE INDEX "abac_grouppolicy_created_by_id_271d8249" ON "abac_grouppolicy" ("created_by_id"); (params ())
CREATE INDEX "abac_grouppolicy_deleted_by_id_a4facc50" ON "abac_grouppolicy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_grouppolicy_updated_by_id_ebd2df7a" ON "abac_grouppolicy" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "abac_grouppolicy_policies_grouppolicy_id_policy_id_26e07f83_uniq" ON "abac_grouppolicy_policies" ("grouppolicy_id", "policy_id"); (params ())
CREATE INDEX "abac_grouppolicy_policies_grouppolicy_id_e71dec64" ON "abac_grouppolicy_policies" ("grouppolicy_id"); (params ())
CREATE INDEX "abac_grouppolicy_policies_policy_id_9cca8dcf" ON "abac_grouppolicy_policies" ("policy_id"); (params ())
CREATE INDEX "abac_policylog_created_at_56be5748" ON "abac_policylog" ("created_at"); (params ())
CREATE INDEX "abac_policylog_is_deleted_225d81fc" ON "abac_policylog" ("is_deleted"); (params ())
CREATE INDEX "abac_policylog_is_active_8b00a4e3" ON "abac_policylog" ("is_active"); (params ())
CREATE INDEX "abac_policylog_created_by_id_47b68767" ON "abac_policylog" ("created_by_id"); (params ())
CREATE INDEX "abac_policylog_deleted_by_id_f4bc078e" ON "abac_policylog" ("deleted_by_id"); (params ())
CREATE INDEX "abac_policylog_policy_id_dcdf1664" ON "abac_policylog" ("policy_id"); (params ())
CREATE INDEX "abac_policylog_updated_by_id_c0c463bf" ON "abac_policylog" ("updated_by_id"); (params ())
CREATE INDEX "abac_policylog_user_id_c0afa20b" ON "abac_policylog" ("user_id"); (params ())
CREATE INDEX "abac_policy_user_id_1a1394_idx" ON "abac_policylog" ("user_id", "evaluated_at" DESC); (params ())
CREATE INDEX "abac_policy_resourc_a07999_idx" ON "abac_policylog" ("resource_type", "action", "evaluated_at" DESC); (params ())
CREATE UNIQUE INDEX "abac_roleassignment_user_id_role_id_scope_scope_id_9175ac67_uniq" ON "abac_roleassignment" ("user_id", "role_id", "scope", "scope_id"); (params ())
CREATE INDEX "abac_roleassignment_created_at_00593674" ON "abac_roleassignment" ("created_at"); (params ())
CREATE INDEX "abac_roleassignment_is_deleted_45b4d13b" ON "abac_roleassignment" ("is_deleted"); (params ())
CREATE INDEX "abac_roleassignment_scope_id_00a755a6" ON "abac_roleassignment" ("scope_id"); (params ())
CREATE INDEX "abac_roleassignment_is_active_d984f010" ON "abac_roleassignment" ("is_active"); (params ())
CREATE INDEX "abac_roleassignment_assigned_by_id_56df4b39" ON "abac_roleassignment" ("assigned_by_id"); (params ())
CREATE INDEX "abac_roleassignment_created_by_id_b53ba900" ON "abac_roleassignment" ("created_by_id"); (params ())
CREATE INDEX "abac_roleassignment_deleted_by_id_a8db0597" ON "abac_roleassignment" ("deleted_by_id"); (params ())
CREATE INDEX "abac_roleassignment_role_id_13497459" ON "abac_roleassignment" ("role_id"); (params ())
CREATE INDEX "abac_roleassignment_updated_by_id_d645a9f4" ON "abac_roleassignment" ("updated_by_id"); (params ())
CREATE INDEX "abac_roleassignment_user_id_0454bcd0" ON "abac_roleassignment" ("user_id"); (params ())
CREATE INDEX "abac_roleas_user_id_c0a334_idx" ON "abac_roleassignment" ("user_id", "is_active"); (params ())
CREATE INDEX "abac_roleas_role_id_fd3cfd_idx" ON "abac_roleassignment" ("role_id", "is_active"); (params ())
CREATE UNIQUE INDEX "abac_rolepermission_role_id_permission_id_a0f9018a_uniq" ON "abac_rolepermission" ("role_id", "permission_id"); (params ())
CREATE INDEX "abac_rolepermission_created_at_c5829210" ON "abac_rolepermission" ("created_at"); (params ())
CREATE INDEX "abac_rolepermission_is_deleted_b62c3698" ON "abac_rolepermission" ("is_deleted"); (params ())
CREATE INDEX "abac_rolepermission_is_active_c4b8d867" ON "abac_rolepermission" ("is_active"); (params ())
CREATE INDEX "abac_rolepermission_created_by_id_5942d058" ON "abac_rolepermission" ("created_by_id"); (params ())
CREATE INDEX "abac_rolepermission_deleted_by_id_7ca0d328" ON "abac_rolepermission" ("deleted_by_id"); (params ())
CREATE INDEX "abac_rolepermission_permission_id_edc3105f" ON "abac_rolepermission" ("permission_id"); (params ())
CREATE INDEX "abac_rolepermission_role_id_4ddb05f2" ON "abac_rolepermission" ("role_id"); (params ())
CREATE INDEX "abac_rolepermission_updated_by_id_e3c556e9" ON "abac_rolepermission" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "abac_userpolicy_user_id_policy_id_3a6318db_uniq" ON "abac_userpolicy" ("user_id", "policy_id"); (params ())
CREATE INDEX "abac_userpolicy_created_at_268cb5e3" ON "abac_userpolicy" ("created_at"); (params ())
CREATE INDEX "abac_userpolicy_is_deleted_34e9a042" ON "abac_userpolicy" ("is_deleted"); (params ())
CREATE INDEX "abac_userpolicy_assigned_by_id_38334211" ON "abac_userpolicy" ("assigned_by_id"); (params ())
CREATE INDEX "abac_userpolicy_created_by_id_c914e664" ON "abac_userpolicy" ("created_by_id"); (params ())
CREATE INDEX "abac_userpolicy_deleted_by_id_2f155537" ON "abac_userpolicy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_userpolicy_policy_id_5117e219" ON "abac_userpolicy" ("policy_id"); (params ())
CREATE INDEX "abac_userpolicy_updated_by_id_c98a8953" ON "abac_userpolicy" ("updated_by_id"); (params ())
CREATE INDEX "abac_userpolicy_user_id_0a7cb9dc" ON "abac_userpolicy" ("user_id"); (params ())
CREATE UNIQUE INDEX "abac_userrole_user_id_role_id_b86cdf93_uniq" ON "abac_userrole" ("user_id", "role_id"); (params ())
CREATE INDEX "abac_userrole_created_at_c42ccb30" ON "abac_userrole" ("created_at"); (params ())
CREATE INDEX "abac_userrole_is_deleted_9cca476c" ON "abac_userrole" ("is_deleted"); (params ())
CREATE INDEX "abac_userrole_created_by_id_2bf03503" ON "abac_userrole" ("created_by_id"); (params ())
CREATE INDEX "abac_userrole_deleted_by_id_a39e8e76" ON "abac_userrole" ("deleted_by_id"); (params ())
CREATE INDEX "abac_userrole_role_id_99f79134" ON "abac_userrole" ("role_id"); (params ())
CREATE INDEX "abac_userrole_updated_by_id_15c534c5" ON "abac_userrole" ("updated_by_id"); (params ())
CREATE INDEX "abac_userrole_user_id_80283a68" ON "abac_userrole" ("user_id"); (params ())
DROP INDEX "abac_attributetype_code_d11cc8f1_uniq"; (params ())
DROP INDEX "abac_grouppolicy_group_type_group_value_8105a483_uniq"; (params ())
ALTER TABLE "abac_attributetype" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_grouppolicy" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_permission" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_policy" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_policylog" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_policyrule" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_role" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_roleassignment" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_rolepermission" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_userpolicy" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "abac_userrole" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__abac_grouppolicy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "group_type" varchar(50) NOT NULL, "group_value" varchar(200) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__abac_grouppolicy" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "group_type", "group_value", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "group_type", "group_value", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "is_active" FROM "abac_grouppolicy"; (params ())
DROP TABLE "abac_grouppolicy"; (params ())
ALTER TABLE "new__abac_grouppolicy" RENAME TO "abac_grouppolicy"; (params ())
CREATE INDEX "abac_attributetype_organization_id_9cbdea0a" ON "abac_attributetype" ("organization_id"); (params ())
CREATE INDEX "abac_permission_organization_id_3bbc67ec" ON "abac_permission" ("organization_id"); (params ())
CREATE INDEX "abac_policy_organization_id_d14e260c" ON "abac_policy" ("organization_id"); (params ())
CREATE INDEX "abac_policylog_organization_id_62fb32d6" ON "abac_policylog" ("organization_id"); (params ())
CREATE INDEX "abac_policyrule_organization_id_911cf220" ON "abac_policyrule" ("organization_id"); (params ())
CREATE INDEX "abac_role_organization_id_36732b68" ON "abac_role" ("organization_id"); (params ())
CREATE INDEX "abac_roleassignment_organization_id_7173cacf" ON "abac_roleassignment" ("organization_id"); (params ())
CREATE INDEX "abac_rolepermission_organization_id_33720d1c" ON "abac_rolepermission" ("organization_id"); (params ())
CREATE INDEX "abac_userpolicy_organization_id_19fd14fe" ON "abac_userpolicy" ("organization_id"); (params ())
CREATE INDEX "abac_userrole_organization_id_1090f8c8" ON "abac_userrole" ("organization_id"); (params ())
CREATE INDEX "abac_grouppolicy_created_at_58c69962" ON "abac_grouppolicy" ("created_at"); (params ())
CREATE INDEX "abac_grouppolicy_is_deleted_5c3bc772" ON "abac_grouppolicy" ("is_deleted"); (params ())
CREATE INDEX "abac_grouppolicy_created_by_id_271d8249" ON "abac_grouppolicy" ("created_by_id"); (params ())
CREATE INDEX "abac_grouppolicy_deleted_by_id_a4facc50" ON "abac_grouppolicy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_grouppolicy_updated_by_id_ebd2df7a" ON "abac_grouppolicy" ("updated_by_id"); (params ())
CREATE INDEX "abac_grouppolicy_organization_id_9e0cea4c" ON "abac_grouppolicy" ("organization_id"); (params ())
CREATE INDEX "abac_grouppolicy_is_active_8d59c16b" ON "abac_grouppolicy" ("is_active"); (params ())
CREATE TABLE "new__abac_permission" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "description" text NOT NULL, "module" varchar(50) NOT NULL, "action" varchar(50) NULL, "permission_type" varchar(50) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "code" varchar(100) NOT NULL); (params None)
INSERT INTO "new__abac_permission" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "description", "module", "action", "permission_type", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "code") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "description", "module", "action", "permission_type", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "code" FROM "abac_permission"; (params ())
DROP TABLE "abac_permission"; (params ())
ALTER TABLE "new__abac_permission" RENAME TO "abac_permission"; (params ())
CREATE INDEX "abac_permission_created_at_8511a8d0" ON "abac_permission" ("created_at"); (params ())
CREATE INDEX "abac_permission_is_deleted_c457f69f" ON "abac_permission" ("is_deleted"); (params ())
CREATE INDEX "abac_permission_is_active_3f6fb9f5" ON "abac_permission" ("is_active"); (params ())
CREATE INDEX "abac_permission_module_0dd38b29" ON "abac_permission" ("module"); (params ())
CREATE INDEX "abac_permission_action_5ecbcfcc" ON "abac_permission" ("action"); (params ())
CREATE INDEX "abac_permission_permission_type_6a625ad7" ON "abac_permission" ("permission_type"); (params ())
CREATE INDEX "abac_permission_created_by_id_7fb3f127" ON "abac_permission" ("created_by_id"); (params ())
CREATE INDEX "abac_permission_deleted_by_id_5114eccf" ON "abac_permission" ("deleted_by_id"); (params ())
CREATE INDEX "abac_permission_updated_by_id_4cb1e716" ON "abac_permission" ("updated_by_id"); (params ())
CREATE INDEX "abac_permission_organization_id_3bbc67ec" ON "abac_permission" ("organization_id"); (params ())
CREATE TABLE "new__abac_policy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "description" text NOT NULL, "policy_type" varchar(20) NOT NULL, "effect" varchar(10) NOT NULL, "priority" integer NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "actions" text NOT NULL CHECK ((JSON_VALID("actions") OR "actions" IS NULL)), "combine_logic" varchar(10) NOT NULL, "is_active" bool NOT NULL, "valid_from" datetime NULL, "valid_until" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "code" varchar(100) NOT NULL); (params None)
INSERT INTO "new__abac_policy" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "description", "policy_type", "effect", "priority", "resource_type", "resource_id", "actions", "combine_logic", "is_active", "valid_from", "valid_until", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "code") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "description", "policy_type", "effect", "priority", "resource_type", "resource_id", "actions", "combine_logic", "is_active", "valid_from", "valid_until", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "code" FROM "abac_policy"; (params ())
DROP TABLE "abac_policy"; (params ())
ALTER TABLE "new__abac_policy" RENAME TO "abac_policy"; (params ())
CREATE INDEX "abac_policy_created_at_9436c1e4" ON "abac_policy" ("created_at"); (params ())
CREATE INDEX "abac_policy_is_deleted_03ace784" ON "abac_policy" ("is_deleted"); (params ())
CREATE INDEX "abac_policy_created_by_id_2fe65a68" ON "abac_policy" ("created_by_id"); (params ())
CREATE INDEX "abac_policy_deleted_by_id_fe366ab8" ON "abac_policy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_policy_updated_by_id_6897ca52" ON "abac_policy" ("updated_by_id"); (params ())
CREATE INDEX "abac_policy_organization_id_d14e260c" ON "abac_policy" ("organization_id"); (params ())
CREATE INDEX "abac_policy_code_00f9b51b" ON "abac_policy" ("code"); (params ())
CREATE TABLE "new__abac_policy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "code" varchar(100) NOT NULL, "description" text NOT NULL, "policy_type" varchar(20) NOT NULL, "effect" varchar(10) NOT NULL, "priority" integer NOT NULL, "resource_type" varchar(100) NOT NULL, "resource_id" varchar(100) NOT NULL, "actions" text NOT NULL CHECK ((JSON_VALID("actions") OR "actions" IS NULL)), "combine_logic" varchar(10) NOT NULL, "valid_from" datetime NULL, "valid_until" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__abac_policy" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "policy_type", "effect", "priority", "resource_type", "resource_id", "actions", "combine_logic", "valid_from", "valid_until", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "policy_type", "effect", "priority", "resource_type", "resource_id", "actions", "combine_logic", "valid_from", "valid_until", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "is_active" FROM "abac_policy"; (params ())
DROP TABLE "abac_policy"; (params ())
ALTER TABLE "new__abac_policy" RENAME TO "abac_policy"; (params ())
CREATE INDEX "abac_policy_created_at_9436c1e4" ON "abac_policy" ("created_at"); (params ())
CREATE INDEX "abac_policy_is_deleted_03ace784" ON "abac_policy" ("is_deleted"); (params ())
CREATE INDEX "abac_policy_code_00f9b51b" ON "abac_policy" ("code"); (params ())
CREATE INDEX "abac_policy_created_by_id_2fe65a68" ON "abac_policy" ("created_by_id"); (params ())
CREATE INDEX "abac_policy_deleted_by_id_fe366ab8" ON "abac_policy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_policy_updated_by_id_6897ca52" ON "abac_policy" ("updated_by_id"); (params ())
CREATE INDEX "abac_policy_organization_id_d14e260c" ON "abac_policy" ("organization_id"); (params ())
CREATE INDEX "abac_policy_is_active_0656d030" ON "abac_policy" ("is_active"); (params ())
CREATE TABLE "new__abac_policyrule" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "attribute_path" varchar(255) NOT NULL, "operator" varchar(20) NOT NULL, "value" text NOT NULL CHECK ((JSON_VALID("value") OR "value" IS NULL)), "negate" bool NOT NULL, "attribute_type_id" char(32) NOT NULL REFERENCES "abac_attributetype" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__abac_policyrule" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "attribute_path", "operator", "value", "negate", "attribute_type_id", "created_by_id", "deleted_by_id", "policy_id", "updated_by_id", "organization_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "attribute_path", "operator", "value", "negate", "attribute_type_id", "created_by_id", "deleted_by_id", "policy_id", "updated_by_id", "organization_id", "is_active" FROM "abac_policyrule"; (params ())
DROP TABLE "abac_policyrule"; (params ())
ALTER TABLE "new__abac_policyrule" RENAME TO "abac_policyrule"; (params ())
CREATE INDEX "abac_policyrule_created_at_d6470d02" ON "abac_policyrule" ("created_at"); (params ())
CREATE INDEX "abac_policyrule_is_deleted_59d07225" ON "abac_policyrule" ("is_deleted"); (params ())
CREATE INDEX "abac_policyrule_attribute_type_id_252055aa" ON "abac_policyrule" ("attribute_type_id"); (params ())
CREATE INDEX "abac_policyrule_created_by_id_0ee21100" ON "abac_policyrule" ("created_by_id"); (params ())
CREATE INDEX "abac_policyrule_deleted_by_id_a3fc07af" ON "abac_policyrule" ("deleted_by_id"); (params ())
CREATE INDEX "abac_policyrule_policy_id_cc309c35" ON "abac_policyrule" ("policy_id"); (params ())
CREATE INDEX "abac_policyrule_updated_by_id_0a32536f" ON "abac_policyrule" ("updated_by_id"); (params ())
CREATE INDEX "abac_policyrule_organization_id_911cf220" ON "abac_policyrule" ("organization_id"); (params ())
CREATE INDEX "abac_policyrule_is_active_5217410a" ON "abac_policyrule" ("is_active"); (params ())
CREATE TABLE "new__abac_role" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL, "description" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__abac_role" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id", "is_active" FROM "abac_role"; (params ())
DROP TABLE "abac_role"; (params ())
ALTER TABLE "new__abac_role" RENAME TO "abac_role"; (params ())
CREATE INDEX "abac_role_created_at_606afd7d" ON "abac_role" ("created_at"); (params ())
CREATE INDEX "abac_role_is_deleted_80b60557" ON "abac_role" ("is_deleted"); (params ())
CREATE INDEX "abac_role_code_72696b8b" ON "abac_role" ("code"); (params ())
CREATE INDEX "abac_role_created_by_id_38d826a9" ON "abac_role" ("created_by_id"); (params ())
CREATE INDEX "abac_role_deleted_by_id_c17d7b97" ON "abac_role" ("deleted_by_id"); (params ())
CREATE INDEX "abac_role_updated_by_id_dd535a3c" ON "abac_role" ("updated_by_id"); (params ())
CREATE INDEX "abac_role_organization_id_36732b68" ON "abac_role" ("organization_id"); (params ())
CREATE INDEX "abac_role_is_active_75a1e9ea" ON "abac_role" ("is_active"); (params ())
CREATE TABLE "new__abac_userpolicy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "priority_override" integer NULL, "assigned_at" datetime NOT NULL, "valid_from" datetime NULL, "valid_until" datetime NULL, "assigned_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "abac_policy" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__abac_userpolicy" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "priority_override", "assigned_at", "valid_from", "valid_until", "assigned_by_id", "created_by_id", "deleted_by_id", "policy_id", "updated_by_id", "user_id", "organization_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "priority_override", "assigned_at", "valid_from", "valid_until", "assigned_by_id", "created_by_id", "deleted_by_id", "policy_id", "updated_by_id", "user_id", "organization_id", "is_active" FROM "abac_userpolicy"; (params ())
DROP TABLE "abac_userpolicy"; (params ())
ALTER TABLE "new__abac_userpolicy" RENAME TO "abac_userpolicy"; (params ())
CREATE UNIQUE INDEX "abac_userpolicy_user_id_policy_id_3a6318db_uniq" ON "abac_userpolicy" ("user_id", "policy_id"); (params ())
CREATE INDEX "abac_userpolicy_created_at_268cb5e3" ON "abac_userpolicy" ("created_at"); (params ())
CREATE INDEX "abac_userpolicy_is_deleted_34e9a042" ON "abac_userpolicy" ("is_deleted"); (params ())
CREATE INDEX "abac_userpolicy_assigned_by_id_38334211" ON "abac_userpolicy" ("assigned_by_id"); (params ())
CREATE INDEX "abac_userpolicy_created_by_id_c914e664" ON "abac_userpolicy" ("created_by_id"); (params ())
CREATE INDEX "abac_userpolicy_deleted_by_id_2f155537" ON "abac_userpolicy" ("deleted_by_id"); (params ())
CREATE INDEX "abac_userpolicy_policy_id_5117e219" ON "abac_userpolicy" ("policy_id"); (params ())
CREATE INDEX "abac_userpolicy_updated_by_id_c98a8953" ON "abac_userpolicy" ("updated_by_id"); (params ())
CREATE INDEX "abac_userpolicy_user_id_0a7cb9dc" ON "abac_userpolicy" ("user_id"); (params ())
CREATE INDEX "abac_userpolicy_organization_id_19fd14fe" ON "abac_userpolicy" ("organization_id"); (params ())
CREATE INDEX "abac_userpolicy_is_active_94964c89" ON "abac_userpolicy" ("is_active"); (params ())
CREATE TABLE "new__abac_userrole" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "assigned_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "role_id" char(32) NOT NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__abac_userrole" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "assigned_at", "created_by_id", "deleted_by_id", "role_id", "updated_by_id", "user_id", "organization_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "assigned_at", "created_by_id", "deleted_by_id", "role_id", "updated_by_id", "user_id", "organization_id", "is_active" FROM "abac_userrole"; (params ())
DROP TABLE "abac_userrole"; (params ())
ALTER TABLE "new__abac_userrole" RENAME TO "abac_userrole"; (params ())
CREATE UNIQUE INDEX "abac_userrole_user_id_role_id_b86cdf93_uniq" ON "abac_userrole" ("user_id", "role_id"); (params ())
CREATE INDEX "abac_userrole_created_at_c42ccb30" ON "abac_userrole" ("created_at"); (params ())
CREATE INDEX "abac_userrole_is_deleted_9cca476c" ON "abac_userrole" ("is_deleted"); (params ())
CREATE INDEX "abac_userrole_created_by_id_2bf03503" ON "abac_userrole" ("created_by_id"); (params ())
CREATE INDEX "abac_userrole_deleted_by_id_a39e8e76" ON "abac_userrole" ("deleted_by_id"); (params ())
CREATE INDEX "abac_userrole_role_id_99f79134" ON "abac_userrole" ("role_id"); (params ())
CREATE INDEX "abac_userrole_updated_by_id_15c534c5" ON "abac_userrole" ("updated_by_id"); (params ())
CREATE INDEX "abac_userrole_user_id_80283a68" ON "abac_userrole" ("user_id"); (params ())
CREATE INDEX "abac_userrole_organization_id_1090f8c8" ON "abac_userrole" ("organization_id"); (params ())
CREATE INDEX "abac_userrole_is_active_a5ec2665" ON "abac_userrole" ("is_active"); (params ())
CREATE UNIQUE INDEX "abac_attributetype_organization_id_code_2512d8e5_uniq" ON "abac_attributetype" ("organization_id", "code"); (params ())
CREATE UNIQUE INDEX "abac_grouppolicy_organization_id_group_type_group_value_28d5c797_uniq" ON "abac_grouppolicy" ("organization_id", "group_type", "group_value"); (params ())
CREATE UNIQUE INDEX "abac_permission_organization_id_code_dd1b8696_uniq" ON "abac_permission" ("organization_id", "code"); (params ())
CREATE UNIQUE INDEX "abac_policy_organization_id_code_ee4c3888_uniq" ON "abac_policy" ("organization_id", "code"); (params ())
CREATE UNIQUE INDEX "abac_role_organization_id_code_4665282c_uniq" ON "abac_role" ("organization_id", "code"); (params ())
CREATE TABLE "django_admin_log" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "action_time" datetime NOT NULL, "object_id" text NULL, "object_repr" varchar(200) NOT NULL, "action_flag" smallint unsigned NOT NULL CHECK ("action_flag" >= 0), "change_message" text NOT NULL, "content_type_id" integer NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "django_admin_log_content_type_id_c4bce8eb" ON "django_admin_log" ("content_type_id"); (params ())
CREATE INDEX "django_admin_log_user_id_c564eba6" ON "django_admin_log" ("user_id"); (params ())
CREATE TABLE "new__django_admin_log" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "object_id" text NULL, "object_repr" varchar(200) NOT NULL, "action_flag" smallint unsigned NOT NULL CHECK ("action_flag" >= 0), "change_message" text NOT NULL, "content_type_id" integer NULL REFERENCES "django_content_type" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "action_time" datetime NOT NULL); (params None)
INSERT INTO "new__django_admin_log" ("id", "object_id", "object_repr", "action_flag", "change_message", "content_type_id", "user_id", "action_time") SELECT "id", "object_id", "object_repr", "action_flag", "change_message", "content_type_id", "user_id", "action_time" FROM "django_admin_log"; (params ())
DROP TABLE "django_admin_log"; (params ())
ALTER TABLE "new__django_admin_log" RENAME TO "django_admin_log"; (params ())
CREATE INDEX "django_admin_log_content_type_id_c4bce8eb" ON "django_admin_log" ("content_type_id"); (params ())
CREATE INDEX "django_admin_log_user_id_c564eba6" ON "django_admin_log" ("user_id"); (params ())
CREATE TABLE "authentication_emailverificationtoken" ("id" char(32) NOT NULL PRIMARY KEY, "token" varchar(100) NOT NULL UNIQUE, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "is_used" bool NOT NULL); (params None)
CREATE TABLE "authentication_passwordresettoken" ("id" char(32) NOT NULL PRIMARY KEY, "token" varchar(100) NOT NULL UNIQUE, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "is_used" bool NOT NULL); (params None)
CREATE TABLE "authentication_usersession" ("id" char(32) NOT NULL PRIMARY KEY, "organization_id" char(32) NULL, "session_key" varchar(100) NOT NULL UNIQUE, "refresh_token" text NOT NULL, "ip_address" char(39) NOT NULL, "user_agent" text NOT NULL, "device_type" varchar(50) NOT NULL, "device_name" varchar(255) NOT NULL, "browser" varchar(100) NOT NULL, "os" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "city" varchar(100) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "last_activity" datetime NOT NULL, "expires_at" datetime NOT NULL); (params None)
DROP INDEX "authenticat_organiz_91ea80_idx"; (params ())
CREATE INDEX "authenticat_organiz_1fed11_idx" ON "authentication_user" ("organization_id", "email"); (params None)
DROP INDEX "authenticat_organiz_6ec5c1_idx"; (params ())
CREATE INDEX "authenticat_organiz_9eaf5f_idx" ON "authentication_user" ("organization_id", "employee_id"); (params None)
DROP INDEX "authenticat_organiz_181dbb_idx"; (params ())
CREATE INDEX "authenticat_organiz_3f6976_idx" ON "authentication_user" ("organization_id", "is_active", "is_deleted"); (params None)
CREATE TABLE "new__authentication_user" ("password" varchar(128) NOT NULL, "last_login" datetime NULL, "is_superuser" bool NOT NULL, "id" char(32) NOT NULL PRIMARY KEY, "organization_id" char(32) NULL, "email" varchar(254) NOT NULL UNIQUE, "employee_id" varchar(50) NOT NULL, "slug" varchar(100) NOT NULL UNIQUE, "first_name" varchar(50) NOT NULL, "last_name" varchar(50) NOT NULL, "middle_name" varchar(50) NOT NULL, "phone" varchar(15) NOT NULL, "avatar" varchar(100) NULL, "date_of_birth" date NULL, "gender" varchar(30) NOT NULL, "is_active" bool NOT NULL, "is_staff" bool NOT NULL, "is_verified" bool NOT NULL, "is_org_admin" bool NOT NULL, "password_changed_at" datetime NULL, "must_change_password" bool NOT NULL, "failed_login_attempts" smallint unsigned NOT NULL CHECK ("failed_login_attempts" >= 0), "locked_until" datetime NULL, "is_2fa_enabled" bool NOT NULL, "two_factor_secret" varchar(255) NOT NULL, "backup_codes" text NOT NULL CHECK ((JSON_VALID("backup_codes") OR "backup_codes" IS NULL)), "last_login_ip" char(39) NULL, "last_login_device" varchar(255) NOT NULL, "date_joined" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "timezone" varchar(50) NOT NULL, "language" varchar(10) NOT NULL, "notification_preferences" text NOT NULL CHECK ((JSON_VALID("notification_preferences") OR "notification_preferences" IS NULL)), "username" varchar(255) NULL UNIQUE); (params None)
INSERT INTO "new__authentication_user" ("password", "last_login", "is_superuser", "id", "organization_id", "email", "employee_id", "slug", "first_name", "last_name", "middle_name", "phone", "avatar", "date_of_birth", "gender", "is_active", "is_staff", "is_verified", "is_org_admin", "password_changed_at", "must_change_password", "failed_login_attempts", "locked_until", "is_2fa_enabled", "two_factor_secret", "backup_codes", "last_login_ip", "last_login_device", "date_joined", "updated_at", "is_deleted", "deleted_at", "timezone", "language", "notification_preferences", "username") SELECT "password", "last_login", "is_superuser", "id", "organization_id", "email", "employee_id", "slug", "first_name", "last_name", "middle_name", "phone", "avatar", "date_of_birth", "gender", "is_active", "is_staff", "is_verified", "is_org_admin", "password_changed_at", "must_change_password", "failed_login_attempts", "locked_until", "is_2fa_enabled", "two_factor_secret", "backup_codes", "last_login_ip", "last_login_device", "date_joined", "updated_at", "is_deleted", "deleted_at", "timezone", "language", "notification_preferences", "username" FROM "authentication_user"; (params ())
DROP TABLE "authentication_user"; (params ())
ALTER TABLE "new__authentication_user" RENAME TO "authentication_user"; (params ())
CREATE INDEX "authentication_usersession_organization_id_7c64ae64" ON "authentication_usersession" ("organization_id"); (params ())
CREATE UNIQUE INDEX "authentication_user_organization_id_email_5c200c67_uniq" ON "authentication_user" ("organization_id", "email"); (params ())
CREATE INDEX "authentication_user_organization_id_d85c0efb" ON "authentication_user" ("organization_id"); (params ())
CREATE INDEX "authentication_user_employee_id_262ee7aa" ON "authentication_user" ("employee_id"); (params ())
CREATE INDEX "authentication_user_is_org_admin_a4c872b1" ON "authentication_user" ("is_org_admin"); (params ())
CREATE INDEX "authenticat_organiz_1fed11_idx" ON "authentication_user" ("organization_id", "email"); (params ())
CREATE INDEX "authenticat_organiz_9eaf5f_idx" ON "authentication_user" ("organization_id", "employee_id"); (params ())
CREATE INDEX "authenticat_organiz_3f6976_idx" ON "authentication_user" ("organization_id", "is_active", "is_deleted"); (params ())
CREATE UNIQUE INDEX "branches_organization_id_name_f3536873_uniq" ON "branches" ("organization_id", "name"); (params ())
CREATE INDEX "branches_organiz_8da68f_idx" ON "branches" ("organization_id", "is_active"); (params None)
CREATE INDEX "branches_name_3c7ed7_idx" ON "branches" ("name", "is_active"); (params None)
CREATE INDEX "branch_user_user_id_467177_idx" ON "branch_users" ("user_id", "is_active"); (params None)
CREATE INDEX "branch_user_branch__de6748_idx" ON "branch_users" ("branch_id", "role", "is_active"); (params None)
CREATE INDEX "organizatio_user_id_5200f6_idx" ON "organization_users" ("user_id", "is_active"); (params None)
CREATE INDEX "organizatio_organiz_a637ab_idx" ON "organization_users" ("organization_id", "role", "is_active"); (params None)
CREATE TABLE "new__authentication_emailverificationtoken" ("id" char(32) NOT NULL PRIMARY KEY, "token" varchar(100) NOT NULL UNIQUE, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "is_used" bool NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__authentication_emailverificationtoken" ("id", "token", "created_at", "expires_at", "is_used", "user_id") SELECT "id", "token", "created_at", "expires_at", "is_used", NULL FROM "authentication_emailverificationtoken"; (params ())
DROP TABLE "authentication_emailverificationtoken"; (params ())
ALTER TABLE "new__authentication_emailverificationtoken" RENAME TO "authentication_emailverificationtoken"; (params ())
CREATE INDEX "authentication_emailverificationtoken_user_id_50a58bb8" ON "authentication_emailverificationtoken" ("user_id"); (params ())
CREATE TABLE "new__authentication_passwordresettoken" ("id" char(32) NOT NULL PRIMARY KEY, "token" varchar(100) NOT NULL UNIQUE, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "is_used" bool NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__authentication_passwordresettoken" ("id", "token", "created_at", "expires_at", "is_used", "user_id") SELECT "id", "token", "created_at", "expires_at", "is_used", NULL FROM "authentication_passwordresettoken"; (params ())
DROP TABLE "authentication_passwordresettoken"; (params ())
ALTER TABLE "new__authentication_passwordresettoken" RENAME TO "authentication_passwordresettoken"; (params ())
CREATE INDEX "authentication_passwordresettoken_user_id_167c3ac5" ON "authentication_passwordresettoken" ("user_id"); (params ())
CREATE TABLE "new__authentication_usersession" ("id" char(32) NOT NULL PRIMARY KEY, "organization_id" char(32) NULL, "session_key" varchar(100) NOT NULL UNIQUE, "refresh_token" text NOT NULL, "ip_address" char(39) NOT NULL, "user_agent" text NOT NULL, "device_type" varchar(50) NOT NULL, "device_name" varchar(255) NOT NULL, "browser" varchar(100) NOT NULL, "os" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "city" varchar(100) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "last_activity" datetime NOT NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__authentication_usersession" ("id", "organization_id", "session_key", "refresh_token", "ip_address", "user_agent", "device_type", "device_name", "browser", "os", "country", "city", "is_active", "created_at", "last_activity", "expires_at", "user_id") SELECT "id", "organization_id", "session_key", "refresh_token", "ip_address", "user_agent", "device_type", "device_name", "browser", "os", "country", "city", "is_active", "created_at", "last_activity", "expires_at", NULL FROM "authentication_usersession"; (params ())
DROP TABLE "authentication_usersession"; (params ())
ALTER TABLE "new__authentication_usersession" RENAME TO "authentication_usersession"; (params ())
CREATE INDEX "authentication_usersession_organization_id_7c64ae64" ON "authentication_usersession" ("organization_id"); (params ())
CREATE INDEX "authentication_usersession_user_id_5aad142d" ON "authentication_usersession" ("user_id"); (params ())
CREATE INDEX "authenticat_organiz_139cd6_idx" ON "authentication_usersession" ("organization_id", "user_id", "is_active"); (params None)
CREATE INDEX "authenticat_user_id_f427c8_idx" ON "authentication_usersession" ("user_id", "is_active"); (params None)
ALTER TABLE "organization_users" RENAME COLUMN "organization_id" TO "organization"; (params ())
ALTER TABLE "branches" RENAME COLUMN "organization_id" TO "organization"; (params ())
DROP INDEX "branches_organiz_8da68f_idx"; (params ())
DROP INDEX "organizatio_organiz_a637ab_idx"; (params ())
CREATE TABLE "new__organization_users" ("id" char(32) NOT NULL PRIMARY KEY, "role" varchar(20) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__organization_users" ("id", "role", "is_active", "created_at", "updated_at", "created_by_id", "user_id", "organization_id") SELECT "id", "role", "is_active", "created_at", "updated_at", "created_by_id", "user_id", "organization" FROM "organization_users"; (params ())
DROP TABLE "organization_users"; (params ())
ALTER TABLE "new__organization_users" RENAME TO "organization_users"; (params ())
CREATE UNIQUE INDEX "organization_users_user_id_organization_id_32ec6d3b_uniq" ON "organization_users" ("user_id", "organization_id"); (params ())
CREATE INDEX "organization_users_role_eaf7db44" ON "organization_users" ("role"); (params ())
CREATE INDEX "organization_users_is_active_ddf3dc97" ON "organization_users" ("is_active"); (params ())
CREATE INDEX "organization_users_created_by_id_ca90adce" ON "organization_users" ("created_by_id"); (params ())
CREATE INDEX "organization_users_user_id_e93e39b5" ON "organization_users" ("user_id"); (params ())
CREATE INDEX "organization_users_organization_id_73683316" ON "organization_users" ("organization_id"); (params ())
CREATE INDEX "organizatio_user_id_5200f6_idx" ON "organization_users" ("user_id", "is_active"); (params ())
CREATE TABLE "new__branches" ("id" char(32) NOT NULL PRIMARY KEY, "name" varchar(255) NOT NULL, "code" varchar(50) NOT NULL, "branch_type" varchar(50) NOT NULL, "is_headquarters" bool NOT NULL, "address_line1" varchar(255) NOT NULL, "address_line2" varchar(255) NOT NULL, "city" varchar(100) NOT NULL, "state" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "postal_code" varchar(20) NOT NULL, "phone" varchar(20) NOT NULL, "email" varchar(254) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__branches" ("id", "name", "code", "branch_type", "is_headquarters", "address_line1", "address_line2", "city", "state", "country", "postal_code", "phone", "email", "is_active", "created_at", "updated_at", "created_by_id", "organization_id") SELECT "id", "name", "code", "branch_type", "is_headquarters", "address_line1", "address_line2", "city", "state", "country", "postal_code", "phone", "email", "is_active", "created_at", "updated_at", "created_by_id", "organization" FROM "branches"; (params ())
DROP TABLE "branches"; (params ())
ALTER TABLE "new__branches" RENAME TO "branches"; (params ())
CREATE UNIQUE INDEX "branches_organization_id_name_f3536873_uniq" ON "branches" ("organization_id", "name"); (params ())
CREATE INDEX "branches_name_c3e4385e" ON "branches" ("name"); (params ())
CREATE INDEX "branches_code_f130de1a" ON "branches" ("code"); (params ())
CREATE INDEX "branches_is_active_3ebc6d77" ON "branches" ("is_active"); (params ())
CREATE INDEX "branches_created_by_id_22e070be" ON "branches" ("created_by_id"); (params ())
CREATE INDEX "branches_organization_id_49dd869c" ON "branches" ("organization_id"); (params ())
CREATE INDEX "branches_name_3c7ed7_idx" ON "branches" ("name", "is_active"); (params ())
CREATE INDEX "branches_organiz_8da68f_idx" ON "branches" ("organization_id", "is_active"); (params None)
CREATE INDEX "organizatio_organiz_a637ab_idx" ON "organization_users" ("organization_id", "role", "is_active"); (params None)
CREATE TABLE "employees_department" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "cost_center" varchar(50) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "employees_designation" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "level" smallint unsigned NOT NULL CHECK ("level" >= 0), "grade" varchar(20) NOT NULL, "job_family" varchar(50) NOT NULL, "min_salary" decimal NULL, "max_salary" decimal NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "employees_location" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "address_line1" varchar(255) NOT NULL, "address_line2" varchar(255) NOT NULL, "city" varchar(100) NOT NULL, "state" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "postal_code" varchar(20) NOT NULL, "latitude" decimal NULL, "longitude" decimal NULL, "geo_fence_radius" integer unsigned NOT NULL CHECK ("geo_fence_radius" >= 0), "phone" varchar(20) NOT NULL, "email" varchar(254) NOT NULL, "timezone" varchar(50) NOT NULL, "is_headquarters" bool NOT NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" varchar(255) NOT NULL, "aadhaar_number" varchar(255) NOT NULL, "passport_number" varchar(255) NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "pf_number" varchar(255) NOT NULL, "esi_number" varchar(255) NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
ALTER TABLE "employees_department" ADD COLUMN "head_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_department" ADD COLUMN "parent_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "idx_department_org_name" ON "employees_department" ("organization_id", "name"); (params None)
CREATE UNIQUE INDEX "employees_department_organization_id_code_ee8f5d04_uniq" ON "employees_department" ("organization_id", "code"); (params ())
CREATE UNIQUE INDEX "employees_designation_organization_id_code_8b53f22b_uniq" ON "employees_designation" ("organization_id", "code"); (params ())
CREATE INDEX "employees_e_employe_080927_idx" ON "employees_employee" ("employee_id"); (params None)
CREATE INDEX "employees_e_departm_27a5fc_idx" ON "employees_employee" ("department_id", "employment_status"); (params None)
CREATE INDEX "employees_e_reporti_77852f_idx" ON "employees_employee" ("reporting_manager_id"); (params None)
CREATE UNIQUE INDEX "employees_employee_organization_id_employee_id_893baa29_uniq" ON "employees_employee" ("organization_id", "employee_id"); (params ())
CREATE INDEX "employees_department_is_active_1bde0a96" ON "employees_department" ("is_active"); (params ())
CREATE INDEX "employees_department_created_at_40762079" ON "employees_department" ("created_at"); (params ())
CREATE INDEX "employees_department_branch_id_e28e5abc" ON "employees_department" ("branch_id"); (params ())
CREATE INDEX "employees_department_organization_id_af9a19f4" ON "employees_department" ("organization_id"); (params ())
CREATE INDEX "employees_designation_is_active_efb5f39b" ON "employees_designation" ("is_active"); (params ())
CREATE INDEX "employees_designation_created_at_4f8a7979" ON "employees_designation" ("created_at"); (params ())
CREATE INDEX "employees_designation_organization_id_ae03b414" ON "employees_designation" ("organization_id"); (params ())
CREATE INDEX "employees_location_is_active_7cdd1381" ON "employees_location" ("is_active"); (params ())
CREATE INDEX "employees_location_created_at_5933a487" ON "employees_location" ("created_at"); (params ())
CREATE INDEX "employees_location_organization_id_53763061" ON "employees_location" ("organization_id"); (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_department_head_id_760e2cc0" ON "employees_department" ("head_id"); (params ())
CREATE INDEX "employees_department_parent_id_80dafee0" ON "employees_department" ("parent_id"); (params ())
CREATE TABLE "attendance_shift" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "start_time" time NOT NULL, "end_time" time NOT NULL, "grace_in_minutes" smallint unsigned NOT NULL CHECK ("grace_in_minutes" >= 0), "grace_out_minutes" smallint unsigned NOT NULL CHECK ("grace_out_minutes" >= 0), "break_duration_minutes" smallint unsigned NOT NULL CHECK ("break_duration_minutes" >= 0), "working_hours" decimal NOT NULL, "half_day_hours" decimal NOT NULL, "overtime_allowed" bool NOT NULL, "max_overtime_hours" decimal NOT NULL, "is_night_shift" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "attendance_geofence" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "latitude" decimal NOT NULL, "longitude" decimal NOT NULL, "radius_meters" integer unsigned NOT NULL CHECK ("radius_meters" >= 0), "is_primary" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NOT NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "clock_in" datetime NULL, "clock_out" datetime NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "attendance_shift_is_active_17c70b74" ON "attendance_shift" ("is_active"); (params ())
CREATE INDEX "attendance_shift_created_at_2605f875" ON "attendance_shift" ("created_at"); (params ())
CREATE INDEX "attendance_shift_branch_id_9b233a35" ON "attendance_shift" ("branch_id"); (params ())
CREATE INDEX "attendance_shift_organization_id_d730a94a" ON "attendance_shift" ("organization_id"); (params ())
CREATE INDEX "attendance_geofence_is_active_001c9dc8" ON "attendance_geofence" ("is_active"); (params ())
CREATE INDEX "attendance_geofence_created_at_67e35274" ON "attendance_geofence" ("created_at"); (params ())
CREATE INDEX "attendance_geofence_branch_id_8af8c549" ON "attendance_geofence" ("branch_id"); (params ())
CREATE INDEX "attendance_geofence_location_id_cd48aae3" ON "attendance_geofence" ("location_id"); (params ())
CREATE INDEX "attendance_geofence_organization_id_52f554e9" ON "attendance_geofence" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
ALTER TABLE "employees_employee" ADD COLUMN "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE TABLE "ai_services_aimodelversion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "model_type" varchar(50) NOT NULL, "version" varchar(20) NOT NULL, "model_path" varchar(500) NOT NULL, "is_active" bool NOT NULL, "accuracy" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "ai_services_aiprediction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NOT NULL, "prediction" text NOT NULL CHECK ((JSON_VALID("prediction") OR "prediction" IS NULL)), "confidence" decimal NOT NULL, "human_reviewed" bool NOT NULL, "human_override" text NULL CHECK ((JSON_VALID("human_override") OR "human_override" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "model_version_id" char(32) NULL REFERENCES "ai_services_aimodelversion" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "reviewed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "ai_services_aimodelversion_created_at_79056a32" ON "ai_services_aimodelversion" ("created_at"); (params ())
CREATE INDEX "ai_services_aimodelversion_is_deleted_62073ad9" ON "ai_services_aimodelversion" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aimodelversion_created_by_id_02923ec7" ON "ai_services_aimodelversion" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_deleted_by_id_37859d5e" ON "ai_services_aimodelversion" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_organization_id_dc147883" ON "ai_services_aimodelversion" ("organization_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_updated_by_id_be563877" ON "ai_services_aimodelversion" ("updated_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_created_at_10b89e55" ON "ai_services_aiprediction" ("created_at"); (params ())
CREATE INDEX "ai_services_aiprediction_is_deleted_871510b8" ON "ai_services_aiprediction" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aiprediction_is_active_2a64a6f0" ON "ai_services_aiprediction" ("is_active"); (params ())
CREATE INDEX "ai_services_aiprediction_created_by_id_58c84173" ON "ai_services_aiprediction" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_deleted_by_id_81c1a3be" ON "ai_services_aiprediction" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_model_version_id_9282aae4" ON "ai_services_aiprediction" ("model_version_id"); (params ())
CREATE INDEX "ai_services_aiprediction_organization_id_81083f74" ON "ai_services_aiprediction" ("organization_id"); (params ())
CREATE INDEX "ai_services_aiprediction_reviewed_by_id_ca713743" ON "ai_services_aiprediction" ("reviewed_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_updated_by_id_46b26670" ON "ai_services_aiprediction" ("updated_by_id"); (params ())
CREATE TABLE "new__ai_services_aimodelversion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "model_type" varchar(50) NOT NULL, "version" varchar(20) NOT NULL, "model_path" varchar(500) NOT NULL, "is_active" bool NOT NULL, "accuracy" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__ai_services_aimodelversion" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "model_type", "version", "model_path", "is_active", "accuracy", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "model_type", "version", "model_path", "is_active", "accuracy", "created_by_id", "deleted_by_id", "updated_by_id", coalesce("organization_id", NULL) FROM "ai_services_aimodelversion"; (params ())
DROP TABLE "ai_services_aimodelversion"; (params ())
ALTER TABLE "new__ai_services_aimodelversion" RENAME TO "ai_services_aimodelversion"; (params ())
CREATE INDEX "ai_services_aimodelversion_created_at_79056a32" ON "ai_services_aimodelversion" ("created_at"); (params ())
CREATE INDEX "ai_services_aimodelversion_is_deleted_62073ad9" ON "ai_services_aimodelversion" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aimodelversion_created_by_id_02923ec7" ON "ai_services_aimodelversion" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_deleted_by_id_37859d5e" ON "ai_services_aimodelversion" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_updated_by_id_be563877" ON "ai_services_aimodelversion" ("updated_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_organization_id_dc147883" ON "ai_services_aimodelversion" ("organization_id"); (params ())
CREATE TABLE "new__ai_services_aiprediction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NOT NULL, "prediction" text NOT NULL CHECK ((JSON_VALID("prediction") OR "prediction" IS NULL)), "confidence" decimal NOT NULL, "human_reviewed" bool NOT NULL, "human_override" text NULL CHECK ((JSON_VALID("human_override") OR "human_override" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "model_version_id" char(32) NULL REFERENCES "ai_services_aimodelversion" ("id") DEFERRABLE INITIALLY DEFERRED, "reviewed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__ai_services_aiprediction" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "prediction", "confidence", "human_reviewed", "human_override", "created_by_id", "deleted_by_id", "model_version_id", "reviewed_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "prediction", "confidence", "human_reviewed", "human_override", "created_by_id", "deleted_by_id", "model_version_id", "reviewed_by_id", "updated_by_id", coalesce("organization_id", NULL) FROM "ai_services_aiprediction"; (params ())
DROP TABLE "ai_services_aiprediction"; (params ())
ALTER TABLE "new__ai_services_aiprediction" RENAME TO "ai_services_aiprediction"; (params ())
CREATE INDEX "ai_services_aiprediction_created_at_10b89e55" ON "ai_services_aiprediction" ("created_at"); (params ())
CREATE INDEX "ai_services_aiprediction_is_deleted_871510b8" ON "ai_services_aiprediction" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aiprediction_is_active_2a64a6f0" ON "ai_services_aiprediction" ("is_active"); (params ())
CREATE INDEX "ai_services_aiprediction_created_by_id_58c84173" ON "ai_services_aiprediction" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_deleted_by_id_81c1a3be" ON "ai_services_aiprediction" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_model_version_id_9282aae4" ON "ai_services_aiprediction" ("model_version_id"); (params ())
CREATE INDEX "ai_services_aiprediction_reviewed_by_id_ca713743" ON "ai_services_aiprediction" ("reviewed_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_updated_by_id_46b26670" ON "ai_services_aiprediction" ("updated_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_organization_id_81083f74" ON "ai_services_aiprediction" ("organization_id"); (params ())
CREATE INDEX "ai_services_organiz_9552d1_idx" ON "ai_services_aimodelversion" ("organization_id", "created_at"); (params None)
CREATE INDEX "ai_services_organiz_6bffef_idx" ON "ai_services_aiprediction" ("organization_id", "created_at"); (params None)
CREATE TABLE "new__ai_services_aimodelversion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "model_type" varchar(50) NOT NULL, "version" varchar(20) NOT NULL, "model_path" varchar(500) NOT NULL, "accuracy" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__ai_services_aimodelversion" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "model_type", "version", "model_path", "accuracy", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "model_type", "version", "model_path", "accuracy", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "ai_services_aimodelversion"; (params ())
DROP TABLE "ai_services_aimodelversion"; (params ())
ALTER TABLE "new__ai_services_aimodelversion" RENAME TO "ai_services_aimodelversion"; (params ())
CREATE INDEX "ai_services_aimodelversion_created_at_79056a32" ON "ai_services_aimodelversion" ("created_at"); (params ())
CREATE INDEX "ai_services_aimodelversion_is_deleted_62073ad9" ON "ai_services_aimodelversion" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aimodelversion_created_by_id_02923ec7" ON "ai_services_aimodelversion" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_deleted_by_id_37859d5e" ON "ai_services_aimodelversion" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_organization_id_dc147883" ON "ai_services_aimodelversion" ("organization_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_updated_by_id_be563877" ON "ai_services_aimodelversion" ("updated_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_is_active_76ba0ae0" ON "ai_services_aimodelversion" ("is_active"); (params ())
CREATE INDEX "ai_services_organiz_9552d1_idx" ON "ai_services_aimodelversion" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__ai_services_aimodelversion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "model_type" varchar(50) NOT NULL, "version" varchar(20) NOT NULL, "model_path" varchar(500) NOT NULL, "is_active" bool NOT NULL, "accuracy" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__ai_services_aimodelversion" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "model_type", "version", "model_path", "is_active", "accuracy", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "model_type", "version", "model_path", "is_active", "accuracy", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id" FROM "ai_services_aimodelversion"; (params ())
DROP TABLE "ai_services_aimodelversion"; (params ())
ALTER TABLE "new__ai_services_aimodelversion" RENAME TO "ai_services_aimodelversion"; (params ())
CREATE INDEX "ai_services_aimodelversion_created_at_79056a32" ON "ai_services_aimodelversion" ("created_at"); (params ())
CREATE INDEX "ai_services_aimodelversion_is_deleted_62073ad9" ON "ai_services_aimodelversion" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aimodelversion_is_active_76ba0ae0" ON "ai_services_aimodelversion" ("is_active"); (params ())
CREATE INDEX "ai_services_aimodelversion_created_by_id_02923ec7" ON "ai_services_aimodelversion" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_deleted_by_id_37859d5e" ON "ai_services_aimodelversion" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_updated_by_id_be563877" ON "ai_services_aimodelversion" ("updated_by_id"); (params ())
CREATE INDEX "ai_services_aimodelversion_organization_id_dc147883" ON "ai_services_aimodelversion" ("organization_id"); (params ())
CREATE INDEX "ai_services_organiz_9552d1_idx" ON "ai_services_aimodelversion" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__ai_services_aiprediction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NOT NULL, "prediction" text NOT NULL CHECK ((JSON_VALID("prediction") OR "prediction" IS NULL)), "confidence" decimal NOT NULL, "human_reviewed" bool NOT NULL, "human_override" text NULL CHECK ((JSON_VALID("human_override") OR "human_override" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "model_version_id" char(32) NULL REFERENCES "ai_services_aimodelversion" ("id") DEFERRABLE INITIALLY DEFERRED, "reviewed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__ai_services_aiprediction" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "prediction", "confidence", "human_reviewed", "human_override", "created_by_id", "deleted_by_id", "model_version_id", "reviewed_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "prediction", "confidence", "human_reviewed", "human_override", "created_by_id", "deleted_by_id", "model_version_id", "reviewed_by_id", "updated_by_id", "organization_id" FROM "ai_services_aiprediction"; (params ())
DROP TABLE "ai_services_aiprediction"; (params ())
ALTER TABLE "new__ai_services_aiprediction" RENAME TO "ai_services_aiprediction"; (params ())
CREATE INDEX "ai_services_aiprediction_created_at_10b89e55" ON "ai_services_aiprediction" ("created_at"); (params ())
CREATE INDEX "ai_services_aiprediction_is_deleted_871510b8" ON "ai_services_aiprediction" ("is_deleted"); (params ())
CREATE INDEX "ai_services_aiprediction_is_active_2a64a6f0" ON "ai_services_aiprediction" ("is_active"); (params ())
CREATE INDEX "ai_services_aiprediction_created_by_id_58c84173" ON "ai_services_aiprediction" ("created_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_deleted_by_id_81c1a3be" ON "ai_services_aiprediction" ("deleted_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_model_version_id_9282aae4" ON "ai_services_aiprediction" ("model_version_id"); (params ())
CREATE INDEX "ai_services_aiprediction_reviewed_by_id_ca713743" ON "ai_services_aiprediction" ("reviewed_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_updated_by_id_46b26670" ON "ai_services_aiprediction" ("updated_by_id"); (params ())
CREATE INDEX "ai_services_aiprediction_organization_id_81083f74" ON "ai_services_aiprediction" ("organization_id"); (params ())
CREATE INDEX "ai_services_organiz_6bffef_idx" ON "ai_services_aiprediction" ("organization_id", "created_at"); (params ())
CREATE TABLE "assets_asset" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(200) NOT NULL, "asset_tag" varchar(50) NOT NULL UNIQUE, "serial_number" varchar(100) NOT NULL, "description" text NOT NULL, "status" varchar(20) NOT NULL, "purchase_date" date NULL, "purchase_price" decimal NULL, "vendor" varchar(200) NOT NULL, "warranty_expires" date NULL, "location" varchar(200) NOT NULL, "notes" text NOT NULL, "image" varchar(100) NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_assignee_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "assets_assetassignment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "assigned_date" date NOT NULL, "notes" text NOT NULL, "returned_date" date NULL, "return_notes" text NOT NULL, "asset_id" char(32) NOT NULL REFERENCES "assets_asset" ("id") DEFERRABLE INITIALLY DEFERRED, "assigned_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "assets_assetcategory" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL UNIQUE, "description" text NOT NULL, "icon" varchar(50) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__assets_asset" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(200) NOT NULL, "asset_tag" varchar(50) NOT NULL UNIQUE, "serial_number" varchar(100) NOT NULL, "description" text NOT NULL, "status" varchar(20) NOT NULL, "purchase_date" date NULL, "purchase_price" decimal NULL, "vendor" varchar(200) NOT NULL, "warranty_expires" date NULL, "location" varchar(200) NOT NULL, "notes" text NOT NULL, "image" varchar(100) NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_assignee_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "category_id" char(32) NOT NULL REFERENCES "assets_assetcategory" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__assets_asset" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "asset_tag", "serial_number", "description", "status", "purchase_date", "purchase_price", "vendor", "warranty_expires", "location", "notes", "image", "branch_id", "created_by_id", "current_assignee_id", "deleted_by_id", "organization_id", "updated_by_id", "category_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "asset_tag", "serial_number", "description", "status", "purchase_date", "purchase_price", "vendor", "warranty_expires", "location", "notes", "image", "branch_id", "created_by_id", "current_assignee_id", "deleted_by_id", "organization_id", "updated_by_id", NULL FROM "assets_asset"; (params ())
DROP TABLE "assets_asset"; (params ())
ALTER TABLE "new__assets_asset" RENAME TO "assets_asset"; (params ())
CREATE INDEX "assets_assetassignment_created_at_86e8ce25" ON "assets_assetassignment" ("created_at"); (params ())
CREATE INDEX "assets_assetassignment_is_deleted_220d6003" ON "assets_assetassignment" ("is_deleted"); (params ())
CREATE INDEX "assets_assetassignment_asset_id_dc1a4798" ON "assets_assetassignment" ("asset_id"); (params ())
CREATE INDEX "assets_assetassignment_assigned_by_id_de4248ee" ON "assets_assetassignment" ("assigned_by_id"); (params ())
CREATE INDEX "assets_assetassignment_branch_id_0a22d41d" ON "assets_assetassignment" ("branch_id"); (params ())
CREATE INDEX "assets_assetassignment_created_by_id_65dfb183" ON "assets_assetassignment" ("created_by_id"); (params ())
CREATE INDEX "assets_assetassignment_deleted_by_id_190295c3" ON "assets_assetassignment" ("deleted_by_id"); (params ())
CREATE INDEX "assets_assetassignment_employee_id_b89c8743" ON "assets_assetassignment" ("employee_id"); (params ())
CREATE INDEX "assets_assetassignment_organization_id_a5644b95" ON "assets_assetassignment" ("organization_id"); (params ())
CREATE INDEX "assets_assetassignment_updated_by_id_8375bba7" ON "assets_assetassignment" ("updated_by_id"); (params ())
CREATE INDEX "assets_assetcategory_created_at_4c555ad9" ON "assets_assetcategory" ("created_at"); (params ())
CREATE INDEX "assets_assetcategory_is_deleted_d80e243f" ON "assets_assetcategory" ("is_deleted"); (params ())
CREATE INDEX "assets_assetcategory_is_active_40eefe68" ON "assets_assetcategory" ("is_active"); (params ())
CREATE INDEX "assets_assetcategory_created_by_id_a8c8b244" ON "assets_assetcategory" ("created_by_id"); (params ())
CREATE INDEX "assets_assetcategory_deleted_by_id_718d4f8c" ON "assets_assetcategory" ("deleted_by_id"); (params ())
CREATE INDEX "assets_assetcategory_organization_id_6285c98d" ON "assets_assetcategory" ("organization_id"); (params ())
CREATE INDEX "assets_assetcategory_updated_by_id_bed1933c" ON "assets_assetcategory" ("updated_by_id"); (params ())
CREATE INDEX "assets_asset_created_at_adc31ba0" ON "assets_asset" ("created_at"); (params ())
CREATE INDEX "assets_asset_is_deleted_79a13b17" ON "assets_asset" ("is_deleted"); (params ())
CREATE INDEX "assets_asset_is_active_b644cf44" ON "assets_asset" ("is_active"); (params ())
CREATE INDEX "assets_asset_branch_id_170790ba" ON "assets_asset" ("branch_id"); (params ())
CREATE INDEX "assets_asset_created_by_id_4d70f031" ON "assets_asset" ("created_by_id"); (params ())
CREATE INDEX "assets_asset_current_assignee_id_76653d60" ON "assets_asset" ("current_assignee_id"); (params ())
CREATE INDEX "assets_asset_deleted_by_id_a4695d6e" ON "assets_asset" ("deleted_by_id"); (params ())
CREATE INDEX "assets_asset_organization_id_e165e4fc" ON "assets_asset" ("organization_id"); (params ())
CREATE INDEX "assets_asset_updated_by_id_01b5e5c9" ON "assets_asset" ("updated_by_id"); (params ())
CREATE INDEX "assets_asset_category_id_b30c6baf" ON "assets_asset" ("category_id"); (params ())
CREATE TABLE "assets_assetmaintenance" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "maintenance_type" varchar(20) NOT NULL, "status" varchar(20) NOT NULL, "title" varchar(200) NOT NULL, "description" text NOT NULL, "scheduled_date" date NOT NULL, "completed_date" date NULL, "cost" decimal NULL, "vendor" varchar(200) NOT NULL, "notes" text NOT NULL, "asset_id" char(32) NOT NULL REFERENCES "assets_asset" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "performed_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "assets_assetrequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "description" text NOT NULL, "justification" text NOT NULL, "status" varchar(20) NOT NULL, "requested_date" date NOT NULL, "needed_by" date NULL, "reviewed_at" datetime NULL, "review_notes" text NOT NULL, "category_id" char(32) NULL REFERENCES "assets_assetcategory" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "fulfilled_asset_id" char(32) NULL REFERENCES "assets_asset" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "reviewed_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "assets_assetmaintenance_created_at_e53c40e3" ON "assets_assetmaintenance" ("created_at"); (params ())
CREATE INDEX "assets_assetmaintenance_is_deleted_7c5865ee" ON "assets_assetmaintenance" ("is_deleted"); (params ())
CREATE INDEX "assets_assetmaintenance_is_active_23a56da9" ON "assets_assetmaintenance" ("is_active"); (params ())
CREATE INDEX "assets_assetmaintenance_asset_id_5f3dbcf6" ON "assets_assetmaintenance" ("asset_id"); (params ())
CREATE INDEX "assets_assetmaintenance_created_by_id_eeaaeac0" ON "assets_assetmaintenance" ("created_by_id"); (params ())
CREATE INDEX "assets_assetmaintenance_deleted_by_id_db3b01f3" ON "assets_assetmaintenance" ("deleted_by_id"); (params ())
CREATE INDEX "assets_assetmaintenance_organization_id_4a90bbea" ON "assets_assetmaintenance" ("organization_id"); (params ())
CREATE INDEX "assets_assetmaintenance_performed_by_id_d21ae372" ON "assets_assetmaintenance" ("performed_by_id"); (params ())
CREATE INDEX "assets_assetmaintenance_updated_by_id_6c966cee" ON "assets_assetmaintenance" ("updated_by_id"); (params ())
CREATE INDEX "assets_assetrequest_created_at_484df70f" ON "assets_assetrequest" ("created_at"); (params ())
CREATE INDEX "assets_assetrequest_is_deleted_5ab9c634" ON "assets_assetrequest" ("is_deleted"); (params ())
CREATE INDEX "assets_assetrequest_is_active_093ed7ed" ON "assets_assetrequest" ("is_active"); (params ())
CREATE INDEX "assets_assetrequest_category_id_4e40e728" ON "assets_assetrequest" ("category_id"); (params ())
CREATE INDEX "assets_assetrequest_created_by_id_0243a039" ON "assets_assetrequest" ("created_by_id"); (params ())
CREATE INDEX "assets_assetrequest_deleted_by_id_8cf00fb2" ON "assets_assetrequest" ("deleted_by_id"); (params ())
CREATE INDEX "assets_assetrequest_employee_id_3386648a" ON "assets_assetrequest" ("employee_id"); (params ())
CREATE INDEX "assets_assetrequest_fulfilled_asset_id_7ae0b2a4" ON "assets_assetrequest" ("fulfilled_asset_id"); (params ())
CREATE INDEX "assets_assetrequest_organization_id_51e72637" ON "assets_assetrequest" ("organization_id"); (params ())
CREATE INDEX "assets_assetrequest_reviewed_by_id_6a133169" ON "assets_assetrequest" ("reviewed_by_id"); (params ())
CREATE INDEX "assets_assetrequest_updated_by_id_80aa1272" ON "assets_assetrequest" ("updated_by_id"); (params ())
CREATE TABLE "attendance_attendancepunch" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "punch_type" varchar(10) NOT NULL, "punch_time" datetime NOT NULL, "latitude" decimal NULL, "longitude" decimal NULL, "accuracy" decimal NULL, "face_verified" bool NOT NULL, "face_confidence" decimal NULL, "liveness_verified" bool NOT NULL, "device_id" varchar(255) NOT NULL, "device_model" varchar(100) NOT NULL, "is_rooted" bool NOT NULL, "is_emulator" bool NOT NULL, "is_mock_gps" bool NOT NULL, "fraud_score" decimal NOT NULL, "fraud_flags" text NOT NULL CHECK ((JSON_VALID("fraud_flags") OR "fraud_flags" IS NULL)), "selfie" varchar(100) NULL); (params None)
CREATE TABLE "attendance_faceembedding" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "embedding" BLOB NOT NULL, "embedding_model" varchar(50) NOT NULL, "is_primary" bool NOT NULL, "quality_score" decimal NULL); (params None)
CREATE TABLE "attendance_fraudlog" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "fraud_type" varchar(50) NOT NULL, "severity" varchar(20) NOT NULL, "details" text NOT NULL CHECK ((JSON_VALID("details") OR "details" IS NULL)), "action_taken" varchar(50) NOT NULL, "reviewed_at" datetime NULL); (params None)
CREATE TABLE "attendance_overtimerequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "requested_hours" decimal NOT NULL, "approved_hours" decimal NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "reviewed_at" datetime NULL, "review_notes" text NOT NULL); (params None)
CREATE TABLE "attendance_shiftassignment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "effective_from" date NOT NULL, "effective_to" date NULL, "is_primary" bool NOT NULL); (params None)
ALTER TABLE "attendance_attendancerecord" RENAME COLUMN "clock_in" TO "check_in"; (params ())
ALTER TABLE "attendance_attendancerecord" RENAME COLUMN "clock_out" TO "check_out"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", '0.00' FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE INDEX "attendance_attendancepunch_created_at_450b0aa8" ON "attendance_attendancepunch" ("created_at"); (params ())
CREATE INDEX "attendance_attendancepunch_is_deleted_f112b428" ON "attendance_attendancepunch" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancepunch_is_active_fd0874f8" ON "attendance_attendancepunch" ("is_active"); (params ())
CREATE INDEX "attendance_faceembedding_created_at_9f36cc0a" ON "attendance_faceembedding" ("created_at"); (params ())
CREATE INDEX "attendance_faceembedding_is_deleted_0ee8a789" ON "attendance_faceembedding" ("is_deleted"); (params ())
CREATE INDEX "attendance_faceembedding_is_active_553fe95a" ON "attendance_faceembedding" ("is_active"); (params ())
CREATE INDEX "attendance_fraudlog_created_at_58248746" ON "attendance_fraudlog" ("created_at"); (params ())
CREATE INDEX "attendance_fraudlog_is_deleted_cb5281e4" ON "attendance_fraudlog" ("is_deleted"); (params ())
CREATE INDEX "attendance_fraudlog_is_active_5755b01a" ON "attendance_fraudlog" ("is_active"); (params ())
CREATE INDEX "attendance_overtimerequest_created_at_62025459" ON "attendance_overtimerequest" ("created_at"); (params ())
CREATE INDEX "attendance_overtimerequest_is_deleted_25eeb8dd" ON "attendance_overtimerequest" ("is_deleted"); (params ())
CREATE INDEX "attendance_overtimerequest_is_active_47863a1e" ON "attendance_overtimerequest" ("is_active"); (params ())
CREATE INDEX "attendance_shiftassignment_created_at_94504eef" ON "attendance_shiftassignment" ("created_at"); (params ())
CREATE INDEX "attendance_shiftassignment_is_deleted_9c5468fe" ON "attendance_shiftassignment" ("is_deleted"); (params ())
CREATE INDEX "attendance_shiftassignment_is_active_5734e2a9" ON "attendance_shiftassignment" ("is_active"); (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "check_in_latitude" decimal NULL; (params [])
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "check_in_longitude" decimal NULL; (params [])
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", '0.00' FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "check_out_latitude" decimal NULL; (params [])
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "check_out_longitude" decimal NULL; (params [])
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", '' FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0)); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", 0 FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", 0 FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL, "is_flagged" bool NOT NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", 0 FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL, "is_flagged" bool NOT NULL, "late_minutes" smallint unsigned NOT NULL CHECK ("late_minutes" >= 0)); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", 0 FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
ALTER TABLE "attendance_attendancerecord" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_geofence" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_geofence" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "attendance_geofence" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_geofence" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "latitude" decimal NOT NULL, "longitude" decimal NOT NULL, "radius_meters" integer unsigned NOT NULL CHECK ("radius_meters" >= 0), "is_primary" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NOT NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__attendance_geofence" ("id", "is_active", "created_at", "updated_at", "name", "latitude", "longitude", "radius_meters", "is_primary", "branch_id", "location_id", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "name", "latitude", "longitude", "radius_meters", "is_primary", "branch_id", "location_id", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "attendance_geofence"; (params ())
DROP TABLE "attendance_geofence"; (params ())
ALTER TABLE "new__attendance_geofence" RENAME TO "attendance_geofence"; (params ())
CREATE INDEX "attendance_attendancerecord_updated_by_id_fd8f630f" ON "attendance_attendancerecord" ("updated_by_id"); (params ())
CREATE INDEX "attendance_geofence_is_active_001c9dc8" ON "attendance_geofence" ("is_active"); (params ())
CREATE INDEX "attendance_geofence_created_at_67e35274" ON "attendance_geofence" ("created_at"); (params ())
CREATE INDEX "attendance_geofence_branch_id_8af8c549" ON "attendance_geofence" ("branch_id"); (params ())
CREATE INDEX "attendance_geofence_location_id_cd48aae3" ON "attendance_geofence" ("location_id"); (params ())
CREATE INDEX "attendance_geofence_organization_id_52f554e9" ON "attendance_geofence" ("organization_id"); (params ())
CREATE INDEX "attendance_geofence_created_by_id_705ae853" ON "attendance_geofence" ("created_by_id"); (params ())
CREATE INDEX "attendance_geofence_deleted_by_id_ad71d66e" ON "attendance_geofence" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_geofence_is_deleted_eae08c4a" ON "attendance_geofence" ("is_deleted"); (params ())
ALTER TABLE "attendance_geofence" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_shift" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_shift" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "attendance_shift" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_shift" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "start_time" time NOT NULL, "end_time" time NOT NULL, "grace_in_minutes" smallint unsigned NOT NULL CHECK ("grace_in_minutes" >= 0), "grace_out_minutes" smallint unsigned NOT NULL CHECK ("grace_out_minutes" >= 0), "break_duration_minutes" smallint unsigned NOT NULL CHECK ("break_duration_minutes" >= 0), "working_hours" decimal NOT NULL, "half_day_hours" decimal NOT NULL, "overtime_allowed" bool NOT NULL, "max_overtime_hours" decimal NOT NULL, "is_night_shift" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__attendance_shift" ("id", "is_active", "created_at", "updated_at", "name", "code", "start_time", "end_time", "grace_in_minutes", "grace_out_minutes", "break_duration_minutes", "working_hours", "half_day_hours", "overtime_allowed", "max_overtime_hours", "is_night_shift", "branch_id", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "name", "code", "start_time", "end_time", "grace_in_minutes", "grace_out_minutes", "break_duration_minutes", "working_hours", "half_day_hours", "overtime_allowed", "max_overtime_hours", "is_night_shift", "branch_id", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "attendance_shift"; (params ())
DROP TABLE "attendance_shift"; (params ())
ALTER TABLE "new__attendance_shift" RENAME TO "attendance_shift"; (params ())
CREATE INDEX "attendance_geofence_updated_by_id_02d728c9" ON "attendance_geofence" ("updated_by_id"); (params ())
CREATE INDEX "attendance_shift_is_active_17c70b74" ON "attendance_shift" ("is_active"); (params ())
CREATE INDEX "attendance_shift_created_at_2605f875" ON "attendance_shift" ("created_at"); (params ())
CREATE INDEX "attendance_shift_branch_id_9b233a35" ON "attendance_shift" ("branch_id"); (params ())
CREATE INDEX "attendance_shift_organization_id_d730a94a" ON "attendance_shift" ("organization_id"); (params ())
CREATE INDEX "attendance_shift_created_by_id_27e956d5" ON "attendance_shift" ("created_by_id"); (params ())
CREATE INDEX "attendance_shift_deleted_by_id_fdd1d9e3" ON "attendance_shift" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_shift_is_deleted_1482393b" ON "attendance_shift" ("is_deleted"); (params ())
ALTER TABLE "attendance_shift" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "overtime_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL, "is_flagged" bool NOT NULL, "late_minutes" smallint unsigned NOT NULL CHECK ("late_minutes" >= 0), "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "date" date NOT NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id", "date") SELECT "id", "is_active", "created_at", "updated_at", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id", "date" FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE INDEX "attendance_shift_updated_by_id_de84bb5c" ON "attendance_shift" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancerecord_updated_by_id_fd8f630f" ON "attendance_attendancerecord" ("updated_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_date_6d9bcb97" ON "attendance_attendancerecord" ("date"); (params ())
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NOT NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL, "is_flagged" bool NOT NULL, "late_minutes" smallint unsigned NOT NULL CHECK ("late_minutes" >= 0), "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "overtime_hours" decimal NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id", "overtime_hours") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id", "overtime_hours" FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_date_6d9bcb97" ON "attendance_attendancerecord" ("date"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancerecord_updated_by_id_fd8f630f" ON "attendance_attendancerecord" ("updated_by_id"); (params ())
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "overtime_hours" decimal NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL, "is_flagged" bool NOT NULL, "late_minutes" smallint unsigned NOT NULL CHECK ("late_minutes" >= 0), "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "total_hours" decimal NULL); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id", "total_hours") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "shift_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id", "total_hours" FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_date_6d9bcb97" ON "attendance_attendancerecord" ("date"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_shift_id_57e71be8" ON "attendance_attendancerecord" ("shift_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancerecord_updated_by_id_fd8f630f" ON "attendance_attendancerecord" ("updated_by_id"); (params ())
CREATE INDEX "attendance__employe_b6a945_idx" ON "attendance_attendancerecord" ("employee_id", "date"); (params None)
CREATE INDEX "attendance__date_64c311_idx" ON "attendance_attendancerecord" ("date", "status"); (params None)
CREATE TABLE "new__attendance_attendancepunch" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "punch_type" varchar(10) NOT NULL, "punch_time" datetime NOT NULL, "latitude" decimal NULL, "longitude" decimal NULL, "accuracy" decimal NULL, "face_verified" bool NOT NULL, "face_confidence" decimal NULL, "liveness_verified" bool NOT NULL, "device_id" varchar(255) NOT NULL, "device_model" varchar(100) NOT NULL, "is_rooted" bool NOT NULL, "is_emulator" bool NOT NULL, "is_mock_gps" bool NOT NULL, "fraud_score" decimal NOT NULL, "fraud_flags" text NOT NULL CHECK ((JSON_VALID("fraud_flags") OR "fraud_flags" IS NULL)), "selfie" varchar(100) NULL, "attendance_id" char(32) NOT NULL REFERENCES "attendance_attendancerecord" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_attendancepunch" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "punch_type", "punch_time", "latitude", "longitude", "accuracy", "face_verified", "face_confidence", "liveness_verified", "device_id", "device_model", "is_rooted", "is_emulator", "is_mock_gps", "fraud_score", "fraud_flags", "selfie", "attendance_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "punch_type", "punch_time", "latitude", "longitude", "accuracy", "face_verified", "face_confidence", "liveness_verified", "device_id", "device_model", "is_rooted", "is_emulator", "is_mock_gps", "fraud_score", "fraud_flags", "selfie", NULL FROM "attendance_attendancepunch"; (params ())
DROP TABLE "attendance_attendancepunch"; (params ())
ALTER TABLE "new__attendance_attendancepunch" RENAME TO "attendance_attendancepunch"; (params ())
CREATE INDEX "attendance_attendancepunch_created_at_450b0aa8" ON "attendance_attendancepunch" ("created_at"); (params ())
CREATE INDEX "attendance_attendancepunch_is_deleted_f112b428" ON "attendance_attendancepunch" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancepunch_is_active_fd0874f8" ON "attendance_attendancepunch" ("is_active"); (params ())
CREATE INDEX "attendance_attendancepunch_attendance_id_2a0f1ca5" ON "attendance_attendancepunch" ("attendance_id"); (params ())
ALTER TABLE "attendance_attendancepunch" ADD COLUMN "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_attendancepunch" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_attendancepunch" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_attendancepunch" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "punch_type" varchar(10) NOT NULL, "punch_time" datetime NOT NULL, "latitude" decimal NULL, "longitude" decimal NULL, "accuracy" decimal NULL, "face_verified" bool NOT NULL, "face_confidence" decimal NULL, "liveness_verified" bool NOT NULL, "device_id" varchar(255) NOT NULL, "device_model" varchar(100) NOT NULL, "is_rooted" bool NOT NULL, "is_emulator" bool NOT NULL, "is_mock_gps" bool NOT NULL, "fraud_score" decimal NOT NULL, "fraud_flags" text NOT NULL CHECK ((JSON_VALID("fraud_flags") OR "fraud_flags" IS NULL)), "selfie" varchar(100) NULL, "attendance_id" char(32) NOT NULL REFERENCES "attendance_attendancerecord" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_attendancepunch" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "punch_type", "punch_time", "latitude", "longitude", "accuracy", "face_verified", "face_confidence", "liveness_verified", "device_id", "device_model", "is_rooted", "is_emulator", "is_mock_gps", "fraud_score", "fraud_flags", "selfie", "attendance_id", "branch_id", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "punch_type", "punch_time", "latitude", "longitude", "accuracy", "face_verified", "face_confidence", "liveness_verified", "device_id", "device_model", "is_rooted", "is_emulator", "is_mock_gps", "fraud_score", "fraud_flags", "selfie", "attendance_id", "branch_id", "created_by_id", "deleted_by_id", NULL FROM "attendance_attendancepunch"; (params ())
DROP TABLE "attendance_attendancepunch"; (params ())
ALTER TABLE "new__attendance_attendancepunch" RENAME TO "attendance_attendancepunch"; (params ())
CREATE INDEX "attendance_attendancepunch_created_at_450b0aa8" ON "attendance_attendancepunch" ("created_at"); (params ())
CREATE INDEX "attendance_attendancepunch_is_deleted_f112b428" ON "attendance_attendancepunch" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancepunch_is_active_fd0874f8" ON "attendance_attendancepunch" ("is_active"); (params ())
CREATE INDEX "attendance_attendancepunch_attendance_id_2a0f1ca5" ON "attendance_attendancepunch" ("attendance_id"); (params ())
CREATE INDEX "attendance_attendancepunch_branch_id_1147bc44" ON "attendance_attendancepunch" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancepunch_created_by_id_1df264ca" ON "attendance_attendancepunch" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancepunch_deleted_by_id_ffb28290" ON "attendance_attendancepunch" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancepunch_employee_id_a68fdf78" ON "attendance_attendancepunch" ("employee_id"); (params ())
ALTER TABLE "attendance_attendancepunch" ADD COLUMN "geo_fence_id" char(32) NULL REFERENCES "attendance_geofence" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_attendancepunch" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_attendancepunch" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_faceembedding" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_faceembedding" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_faceembedding" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "embedding" BLOB NOT NULL, "embedding_model" varchar(50) NOT NULL, "is_primary" bool NOT NULL, "quality_score" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_faceembedding" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "embedding", "embedding_model", "is_primary", "quality_score", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "embedding", "embedding_model", "is_primary", "quality_score", "created_by_id", "deleted_by_id", NULL FROM "attendance_faceembedding"; (params ())
DROP TABLE "attendance_faceembedding"; (params ())
ALTER TABLE "new__attendance_faceembedding" RENAME TO "attendance_faceembedding"; (params ())
CREATE INDEX "attendance_attendancepunch_geo_fence_id_7bcefc92" ON "attendance_attendancepunch" ("geo_fence_id"); (params ())
CREATE INDEX "attendance_attendancepunch_organization_id_5b67685c" ON "attendance_attendancepunch" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancepunch_updated_by_id_b87956a4" ON "attendance_attendancepunch" ("updated_by_id"); (params ())
CREATE INDEX "attendance_faceembedding_created_at_9f36cc0a" ON "attendance_faceembedding" ("created_at"); (params ())
CREATE INDEX "attendance_faceembedding_is_deleted_0ee8a789" ON "attendance_faceembedding" ("is_deleted"); (params ())
CREATE INDEX "attendance_faceembedding_is_active_553fe95a" ON "attendance_faceembedding" ("is_active"); (params ())
CREATE INDEX "attendance_faceembedding_created_by_id_9f977fcd" ON "attendance_faceembedding" ("created_by_id"); (params ())
CREATE INDEX "attendance_faceembedding_deleted_by_id_35bfaa66" ON "attendance_faceembedding" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_faceembedding_employee_id_2984e691" ON "attendance_faceembedding" ("employee_id"); (params ())
ALTER TABLE "attendance_faceembedding" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_faceembedding" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_fraudlog" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_fraudlog" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_fraudlog" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "fraud_type" varchar(50) NOT NULL, "severity" varchar(20) NOT NULL, "details" text NOT NULL CHECK ((JSON_VALID("details") OR "details" IS NULL)), "action_taken" varchar(50) NOT NULL, "reviewed_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_fraudlog" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "fraud_type", "severity", "details", "action_taken", "reviewed_at", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "fraud_type", "severity", "details", "action_taken", "reviewed_at", "created_by_id", "deleted_by_id", NULL FROM "attendance_fraudlog"; (params ())
DROP TABLE "attendance_fraudlog"; (params ())
ALTER TABLE "new__attendance_fraudlog" RENAME TO "attendance_fraudlog"; (params ())
CREATE INDEX "attendance_faceembedding_organization_id_11cfacc5" ON "attendance_faceembedding" ("organization_id"); (params ())
CREATE INDEX "attendance_faceembedding_updated_by_id_b37e4968" ON "attendance_faceembedding" ("updated_by_id"); (params ())
CREATE INDEX "attendance_fraudlog_created_at_58248746" ON "attendance_fraudlog" ("created_at"); (params ())
CREATE INDEX "attendance_fraudlog_is_deleted_cb5281e4" ON "attendance_fraudlog" ("is_deleted"); (params ())
CREATE INDEX "attendance_fraudlog_is_active_5755b01a" ON "attendance_fraudlog" ("is_active"); (params ())
CREATE INDEX "attendance_fraudlog_created_by_id_f6b954ac" ON "attendance_fraudlog" ("created_by_id"); (params ())
CREATE INDEX "attendance_fraudlog_deleted_by_id_28405ea1" ON "attendance_fraudlog" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_fraudlog_employee_id_01a09720" ON "attendance_fraudlog" ("employee_id"); (params ())
ALTER TABLE "attendance_fraudlog" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_fraudlog" ADD COLUMN "punch_id" char(32) NULL REFERENCES "attendance_attendancepunch" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_fraudlog" ADD COLUMN "reviewed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_fraudlog" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_overtimerequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "requested_hours" decimal NOT NULL, "approved_hours" decimal NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "reviewed_at" datetime NULL, "review_notes" text NOT NULL, "attendance_id" char(32) NOT NULL REFERENCES "attendance_attendancerecord" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_overtimerequest" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "requested_hours", "approved_hours", "reason", "status", "reviewed_at", "review_notes", "attendance_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "requested_hours", "approved_hours", "reason", "status", "reviewed_at", "review_notes", NULL FROM "attendance_overtimerequest"; (params ())
DROP TABLE "attendance_overtimerequest"; (params ())
ALTER TABLE "new__attendance_overtimerequest" RENAME TO "attendance_overtimerequest"; (params ())
CREATE INDEX "attendance_fraudlog_organization_id_f20e5cfe" ON "attendance_fraudlog" ("organization_id"); (params ())
CREATE INDEX "attendance_fraudlog_punch_id_5ea4640f" ON "attendance_fraudlog" ("punch_id"); (params ())
CREATE INDEX "attendance_fraudlog_reviewed_by_id_07cfafe4" ON "attendance_fraudlog" ("reviewed_by_id"); (params ())
CREATE INDEX "attendance_fraudlog_updated_by_id_3b99e1fd" ON "attendance_fraudlog" ("updated_by_id"); (params ())
CREATE INDEX "attendance_overtimerequest_created_at_62025459" ON "attendance_overtimerequest" ("created_at"); (params ())
CREATE INDEX "attendance_overtimerequest_is_deleted_25eeb8dd" ON "attendance_overtimerequest" ("is_deleted"); (params ())
CREATE INDEX "attendance_overtimerequest_is_active_47863a1e" ON "attendance_overtimerequest" ("is_active"); (params ())
CREATE INDEX "attendance_overtimerequest_attendance_id_2596db43" ON "attendance_overtimerequest" ("attendance_id"); (params ())
ALTER TABLE "attendance_overtimerequest" ADD COLUMN "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_overtimerequest" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_overtimerequest" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_overtimerequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "requested_hours" decimal NOT NULL, "approved_hours" decimal NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "reviewed_at" datetime NULL, "review_notes" text NOT NULL, "attendance_id" char(32) NOT NULL REFERENCES "attendance_attendancerecord" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_overtimerequest" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "requested_hours", "approved_hours", "reason", "status", "reviewed_at", "review_notes", "attendance_id", "branch_id", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "requested_hours", "approved_hours", "reason", "status", "reviewed_at", "review_notes", "attendance_id", "branch_id", "created_by_id", "deleted_by_id", NULL FROM "attendance_overtimerequest"; (params ())
DROP TABLE "attendance_overtimerequest"; (params ())
ALTER TABLE "new__attendance_overtimerequest" RENAME TO "attendance_overtimerequest"; (params ())
CREATE INDEX "attendance_overtimerequest_created_at_62025459" ON "attendance_overtimerequest" ("created_at"); (params ())
CREATE INDEX "attendance_overtimerequest_is_deleted_25eeb8dd" ON "attendance_overtimerequest" ("is_deleted"); (params ())
CREATE INDEX "attendance_overtimerequest_is_active_47863a1e" ON "attendance_overtimerequest" ("is_active"); (params ())
CREATE INDEX "attendance_overtimerequest_attendance_id_2596db43" ON "attendance_overtimerequest" ("attendance_id"); (params ())
CREATE INDEX "attendance_overtimerequest_branch_id_7441193f" ON "attendance_overtimerequest" ("branch_id"); (params ())
CREATE INDEX "attendance_overtimerequest_created_by_id_f256404d" ON "attendance_overtimerequest" ("created_by_id"); (params ())
CREATE INDEX "attendance_overtimerequest_deleted_by_id_77aea07b" ON "attendance_overtimerequest" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_overtimerequest_employee_id_de9c8da3" ON "attendance_overtimerequest" ("employee_id"); (params ())
ALTER TABLE "attendance_overtimerequest" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_overtimerequest" ADD COLUMN "reviewed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_overtimerequest" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_shiftassignment" ADD COLUMN "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_shiftassignment" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "attendance_shiftassignment" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_shiftassignment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "effective_from" date NOT NULL, "effective_to" date NULL, "is_primary" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_shiftassignment" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "effective_from", "effective_to", "is_primary", "branch_id", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "effective_from", "effective_to", "is_primary", "branch_id", "created_by_id", "deleted_by_id", NULL FROM "attendance_shiftassignment"; (params ())
DROP TABLE "attendance_shiftassignment"; (params ())
ALTER TABLE "new__attendance_shiftassignment" RENAME TO "attendance_shiftassignment"; (params ())
CREATE INDEX "attendance_overtimerequest_organization_id_00f03b31" ON "attendance_overtimerequest" ("organization_id"); (params ())
CREATE INDEX "attendance_overtimerequest_reviewed_by_id_f006cfa7" ON "attendance_overtimerequest" ("reviewed_by_id"); (params ())
CREATE INDEX "attendance_overtimerequest_updated_by_id_7814bc13" ON "attendance_overtimerequest" ("updated_by_id"); (params ())
CREATE INDEX "attendance_shiftassignment_created_at_94504eef" ON "attendance_shiftassignment" ("created_at"); (params ())
CREATE INDEX "attendance_shiftassignment_is_deleted_9c5468fe" ON "attendance_shiftassignment" ("is_deleted"); (params ())
CREATE INDEX "attendance_shiftassignment_is_active_5734e2a9" ON "attendance_shiftassignment" ("is_active"); (params ())
CREATE INDEX "attendance_shiftassignment_branch_id_3df355fe" ON "attendance_shiftassignment" ("branch_id"); (params ())
CREATE INDEX "attendance_shiftassignment_created_by_id_c07c0e44" ON "attendance_shiftassignment" ("created_by_id"); (params ())
CREATE INDEX "attendance_shiftassignment_deleted_by_id_ad7fcf89" ON "attendance_shiftassignment" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_shiftassignment_employee_id_c981221c" ON "attendance_shiftassignment" ("employee_id"); (params ())
ALTER TABLE "attendance_shiftassignment" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_shiftassignment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "effective_from" date NOT NULL, "effective_to" date NULL, "is_primary" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NOT NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_shiftassignment" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "effective_from", "effective_to", "is_primary", "branch_id", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "shift_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "effective_from", "effective_to", "is_primary", "branch_id", "created_by_id", "deleted_by_id", "employee_id", "organization_id", NULL FROM "attendance_shiftassignment"; (params ())
DROP TABLE "attendance_shiftassignment"; (params ())
ALTER TABLE "new__attendance_shiftassignment" RENAME TO "attendance_shiftassignment"; (params ())
CREATE INDEX "attendance_shiftassignment_created_at_94504eef" ON "attendance_shiftassignment" ("created_at"); (params ())
CREATE INDEX "attendance_shiftassignment_is_deleted_9c5468fe" ON "attendance_shiftassignment" ("is_deleted"); (params ())
CREATE INDEX "attendance_shiftassignment_is_active_5734e2a9" ON "attendance_shiftassignment" ("is_active"); (params ())
CREATE INDEX "attendance_shiftassignment_branch_id_3df355fe" ON "attendance_shiftassignment" ("branch_id"); (params ())
CREATE INDEX "attendance_shiftassignment_created_by_id_c07c0e44" ON "attendance_shiftassignment" ("created_by_id"); (params ())
CREATE INDEX "attendance_shiftassignment_deleted_by_id_ad7fcf89" ON "attendance_shiftassignment" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_shiftassignment_employee_id_c981221c" ON "attendance_shiftassignment" ("employee_id"); (params ())
CREATE INDEX "attendance_shiftassignment_organization_id_1fe0e1fc" ON "attendance_shiftassignment" ("organization_id"); (params ())
CREATE INDEX "attendance_shiftassignment_shift_id_4ecbd3a7" ON "attendance_shiftassignment" ("shift_id"); (params ())
ALTER TABLE "attendance_shiftassignment" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__attendance_attendancerecord" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "date" date NOT NULL, "status" varchar(20) NOT NULL, "total_hours" decimal NULL, "overtime_hours" decimal NULL, "is_regularized" bool NOT NULL, "regularization_reason" text NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in" datetime NULL, "check_out" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "check_in_fraud_score" decimal NOT NULL, "check_in_latitude" decimal NULL, "check_in_longitude" decimal NULL, "check_out_fraud_score" decimal NOT NULL, "check_out_latitude" decimal NULL, "check_out_longitude" decimal NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "device_id" varchar(255) NOT NULL, "early_out_minutes" smallint unsigned NOT NULL CHECK ("early_out_minutes" >= 0), "is_deleted" bool NOT NULL, "is_flagged" bool NOT NULL, "late_minutes" smallint unsigned NOT NULL CHECK ("late_minutes" >= 0), "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__attendance_attendancerecord" ("id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id") SELECT "id", "is_active", "created_at", "updated_at", "date", "status", "total_hours", "overtime_hours", "is_regularized", "regularization_reason", "branch_id", "employee_id", "organization_id", "check_in", "check_out", "approved_by_id", "check_in_fraud_score", "check_in_latitude", "check_in_longitude", "check_out_fraud_score", "check_out_latitude", "check_out_longitude", "created_by_id", "deleted_at", "deleted_by_id", "device_id", "early_out_minutes", "is_deleted", "is_flagged", "late_minutes", "updated_by_id" FROM "attendance_attendancerecord"; (params ())
DROP TABLE "attendance_attendancerecord"; (params ())
ALTER TABLE "new__attendance_attendancerecord" RENAME TO "attendance_attendancerecord"; (params ())
CREATE INDEX "attendance_shiftassignment_updated_by_id_e54d425f" ON "attendance_shiftassignment" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "attendance_attendancerecord_employee_id_date_ad4160fa_uniq" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance_attendancerecord_is_active_75874341" ON "attendance_attendancerecord" ("is_active"); (params ())
CREATE INDEX "attendance_attendancerecord_created_at_e1da7f78" ON "attendance_attendancerecord" ("created_at"); (params ())
CREATE INDEX "attendance_attendancerecord_date_6d9bcb97" ON "attendance_attendancerecord" ("date"); (params ())
CREATE INDEX "attendance_attendancerecord_branch_id_87d685c6" ON "attendance_attendancerecord" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancerecord_employee_id_e7066fe9" ON "attendance_attendancerecord" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancerecord_organization_id_5c498be0" ON "attendance_attendancerecord" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancerecord_approved_by_id_4236985b" ON "attendance_attendancerecord" ("approved_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_created_by_id_83e5b726" ON "attendance_attendancerecord" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_deleted_by_id_81ef0f79" ON "attendance_attendancerecord" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancerecord_is_deleted_7657592b" ON "attendance_attendancerecord" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancerecord_updated_by_id_fd8f630f" ON "attendance_attendancerecord" ("updated_by_id"); (params ())
CREATE INDEX "attendance__employe_b6a945_idx" ON "attendance_attendancerecord" ("employee_id", "date"); (params ())
CREATE INDEX "attendance__date_64c311_idx" ON "attendance_attendancerecord" ("date", "status"); (params ())
CREATE INDEX "attendance__employe_7bfc75_idx" ON "attendance_shiftassignment" ("employee_id", "effective_from"); (params None)
CREATE INDEX "attendance__shift_i_e3ac43_idx" ON "attendance_shiftassignment" ("shift_id", "effective_from"); (params None)
CREATE INDEX "att_punch_org_time_idx" ON "attendance_attendancepunch" ("organization_id", "punch_time"); (params None)
CREATE INDEX "att_org_date_idx" ON "attendance_attendancerecord" ("organization_id", "date"); (params None)
CREATE INDEX "att_org_emp_date_idx" ON "attendance_attendancerecord" ("organization_id", "employee_id", "date"); (params None)
CREATE TABLE "new__attendance_attendancepunch" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "punch_type" varchar(10) NOT NULL, "punch_time" datetime NOT NULL, "latitude" decimal NULL, "longitude" decimal NULL, "accuracy" decimal NULL, "face_verified" bool NOT NULL, "face_confidence" decimal NULL, "liveness_verified" bool NOT NULL, "device_id" varchar(255) NOT NULL, "device_model" varchar(100) NOT NULL, "is_rooted" bool NOT NULL, "is_emulator" bool NOT NULL, "is_mock_gps" bool NOT NULL, "fraud_score" decimal NOT NULL, "fraud_flags" text NOT NULL CHECK ((JSON_VALID("fraud_flags") OR "fraud_flags" IS NULL)), "selfie" varchar(100) NULL, "attendance_id" char(32) NOT NULL REFERENCES "attendance_attendancerecord" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "geo_fence_id" char(32) NULL REFERENCES "attendance_geofence" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_flagged" bool NOT NULL); (params None)
INSERT INTO "new__attendance_attendancepunch" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "punch_type", "punch_time", "latitude", "longitude", "accuracy", "face_verified", "face_confidence", "liveness_verified", "device_id", "device_model", "is_rooted", "is_emulator", "is_mock_gps", "fraud_score", "fraud_flags", "selfie", "attendance_id", "branch_id", "created_by_id", "deleted_by_id", "employee_id", "geo_fence_id", "organization_id", "updated_by_id", "is_flagged") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "punch_type", "punch_time", "latitude", "longitude", "accuracy", "face_verified", "face_confidence", "liveness_verified", "device_id", "device_model", "is_rooted", "is_emulator", "is_mock_gps", "fraud_score", "fraud_flags", "selfie", "attendance_id", "branch_id", "created_by_id", "deleted_by_id", "employee_id", "geo_fence_id", "organization_id", "updated_by_id", 0 FROM "attendance_attendancepunch"; (params ())
DROP TABLE "attendance_attendancepunch"; (params ())
ALTER TABLE "new__attendance_attendancepunch" RENAME TO "attendance_attendancepunch"; (params ())
CREATE INDEX "attendance_attendancepunch_created_at_450b0aa8" ON "attendance_attendancepunch" ("created_at"); (params ())
CREATE INDEX "attendance_attendancepunch_is_deleted_f112b428" ON "attendance_attendancepunch" ("is_deleted"); (params ())
CREATE INDEX "attendance_attendancepunch_is_active_fd0874f8" ON "attendance_attendancepunch" ("is_active"); (params ())
CREATE INDEX "attendance_attendancepunch_attendance_id_2a0f1ca5" ON "attendance_attendancepunch" ("attendance_id"); (params ())
CREATE INDEX "attendance_attendancepunch_branch_id_1147bc44" ON "attendance_attendancepunch" ("branch_id"); (params ())
CREATE INDEX "attendance_attendancepunch_created_by_id_1df264ca" ON "attendance_attendancepunch" ("created_by_id"); (params ())
CREATE INDEX "attendance_attendancepunch_deleted_by_id_ffb28290" ON "attendance_attendancepunch" ("deleted_by_id"); (params ())
CREATE INDEX "attendance_attendancepunch_employee_id_a68fdf78" ON "attendance_attendancepunch" ("employee_id"); (params ())
CREATE INDEX "attendance_attendancepunch_geo_fence_id_7bcefc92" ON "attendance_attendancepunch" ("geo_fence_id"); (params ())
CREATE INDEX "attendance_attendancepunch_organization_id_5b67685c" ON "attendance_attendancepunch" ("organization_id"); (params ())
CREATE INDEX "attendance_attendancepunch_updated_by_id_b87956a4" ON "attendance_attendancepunch" ("updated_by_id"); (params ())
CREATE INDEX "att_punch_org_time_idx" ON "attendance_attendancepunch" ("organization_id", "punch_time"); (params ())
DROP INDEX "authenticat_organiz_139cd6_idx"; (params ())
CREATE TABLE "new__authentication_usersession" ("id" char(32) NOT NULL PRIMARY KEY, "session_key" varchar(100) NOT NULL UNIQUE, "refresh_token" text NOT NULL, "ip_address" char(39) NOT NULL, "user_agent" text NOT NULL, "device_type" varchar(50) NOT NULL, "device_name" varchar(255) NOT NULL, "browser" varchar(100) NOT NULL, "os" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "city" varchar(100) NOT NULL, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "last_activity" datetime NOT NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__authentication_usersession" ("id", "session_key", "refresh_token", "ip_address", "user_agent", "device_type", "device_name", "browser", "os", "country", "city", "is_active", "created_at", "last_activity", "expires_at", "user_id") SELECT "id", "session_key", "refresh_token", "ip_address", "user_agent", "device_type", "device_name", "browser", "os", "country", "city", "is_active", "created_at", "last_activity", "expires_at", "user_id" FROM "authentication_usersession"; (params ())
DROP TABLE "authentication_usersession"; (params ())
ALTER TABLE "new__authentication_usersession" RENAME TO "authentication_usersession"; (params ())
CREATE INDEX "authentication_usersession_user_id_5aad142d" ON "authentication_usersession" ("user_id"); (params ())
CREATE INDEX "authenticat_user_id_f427c8_idx" ON "authentication_usersession" ("user_id", "is_active"); (params ())
ALTER TABLE "authentication_usersession" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "authenticat_organiz_139cd6_idx" ON "authentication_usersession" ("organization_id", "user_id", "is_active"); (params None)
CREATE INDEX "authentication_usersession_organization_id_7c64ae64" ON "authentication_usersession" ("organization_id"); (params ())
CREATE TABLE "billing_bankdetails" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "account_name" varchar(255) NOT NULL, "account_number" varchar(50) NOT NULL, "bank_name" varchar(255) NOT NULL, "ifsc_code" varchar(20) NOT NULL, "swift_code" varchar(20) NULL, "branch_name" varchar(255) NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "tax" decimal NOT NULL, "total" decimal NOT NULL, "billing_period_start" date NOT NULL, "billing_period_end" date NOT NULL, "status" varchar(20) NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "billing_payment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "amount" decimal NOT NULL, "payment_method" varchar(50) NOT NULL, "transaction_id" varchar(100) NOT NULL UNIQUE, "status" varchar(20) NOT NULL, "gateway_response" text NOT NULL CHECK ((JSON_VALID("gateway_response") OR "gateway_response" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "invoice_id" char(32) NOT NULL REFERENCES "billing_invoice" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "price_monthly" decimal NOT NULL, "price_yearly" decimal NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "max_admins" integer unsigned NULL CHECK ("max_admins" >= 0), "features" text NOT NULL CHECK ((JSON_VALID("features") OR "features" IS NULL)), "is_trial" bool NOT NULL, "trial_days" smallint unsigned NOT NULL CHECK ("trial_days" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "billing_subscription" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "billing_cycle" varchar(10) NOT NULL, "price" decimal NOT NULL, "start_date" date NOT NULL, "end_date" date NOT NULL, "next_billing_date" date NOT NULL, "status" varchar(20) NOT NULL, "payment_method" text NOT NULL CHECK ((JSON_VALID("payment_method") OR "payment_method" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL UNIQUE REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "tax" decimal NOT NULL, "total" decimal NOT NULL, "billing_period_start" date NOT NULL, "billing_period_end" date NOT NULL, "status" varchar(20) NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_subscription" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "tax", "total", "billing_period_start", "billing_period_end", "status", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "tax", "total", "billing_period_start", "billing_period_end", "status", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", NULL FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_bankdetails_created_at_cf6c9c32" ON "billing_bankdetails" ("created_at"); (params ())
CREATE INDEX "billing_bankdetails_is_deleted_0fe43aeb" ON "billing_bankdetails" ("is_deleted"); (params ())
CREATE INDEX "billing_bankdetails_created_by_id_3d834d7b" ON "billing_bankdetails" ("created_by_id"); (params ())
CREATE INDEX "billing_bankdetails_deleted_by_id_080e5ded" ON "billing_bankdetails" ("deleted_by_id"); (params ())
CREATE INDEX "billing_bankdetails_organization_id_55d60b88" ON "billing_bankdetails" ("organization_id"); (params ())
CREATE INDEX "billing_bankdetails_updated_by_id_f01167d1" ON "billing_bankdetails" ("updated_by_id"); (params ())
CREATE INDEX "billing_payment_created_at_6f2d4c95" ON "billing_payment" ("created_at"); (params ())
CREATE INDEX "billing_payment_is_deleted_e250b8fe" ON "billing_payment" ("is_deleted"); (params ())
CREATE INDEX "billing_payment_is_active_a61eea38" ON "billing_payment" ("is_active"); (params ())
CREATE INDEX "billing_payment_created_by_id_d3ad50b7" ON "billing_payment" ("created_by_id"); (params ())
CREATE INDEX "billing_payment_deleted_by_id_6f7e1d54" ON "billing_payment" ("deleted_by_id"); (params ())
CREATE INDEX "billing_payment_invoice_id_998dd3c5" ON "billing_payment" ("invoice_id"); (params ())
CREATE INDEX "billing_payment_organization_id_efd5b976" ON "billing_payment" ("organization_id"); (params ())
CREATE INDEX "billing_payment_updated_by_id_5a0e867e" ON "billing_payment" ("updated_by_id"); (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE INDEX "billing_subscription_created_at_b9217e59" ON "billing_subscription" ("created_at"); (params ())
CREATE INDEX "billing_subscription_is_deleted_32e7ec77" ON "billing_subscription" ("is_deleted"); (params ())
CREATE INDEX "billing_subscription_is_active_db3aac33" ON "billing_subscription" ("is_active"); (params ())
CREATE INDEX "billing_subscription_created_by_id_fd6c0008" ON "billing_subscription" ("created_by_id"); (params ())
CREATE INDEX "billing_subscription_deleted_by_id_0af6b626" ON "billing_subscription" ("deleted_by_id"); (params ())
CREATE INDEX "billing_subscription_plan_id_4e20d4ad" ON "billing_subscription" ("plan_id"); (params ())
CREATE INDEX "billing_subscription_updated_by_id_2b7cc4c2" ON "billing_subscription" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
ALTER TABLE "billing_subscription" RENAME TO "billing_organizationsubscription"; (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "tax" decimal NOT NULL, "total" decimal NOT NULL, "billing_period_start" date NOT NULL, "billing_period_end" date NOT NULL, "status" varchar(20) NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "tax", "total", "billing_period_start", "billing_period_end", "status", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "tax", "total", "billing_period_start", "billing_period_end", "status", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id" FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
ALTER TABLE "billing_organizationsubscription" RENAME COLUMN "end_date" TO "expiry_date"; (params ())
ALTER TABLE "billing_organizationsubscription" DROP COLUMN "billing_cycle"; (params ())
ALTER TABLE "billing_organizationsubscription" DROP COLUMN "next_billing_date"; (params ())
ALTER TABLE "billing_organizationsubscription" DROP COLUMN "payment_method"; (params ())
ALTER TABLE "billing_organizationsubscription" DROP COLUMN "price"; (params ())
ALTER TABLE "billing_organizationsubscription" DROP COLUMN "status"; (params ())
CREATE TABLE "new__billing_organizationsubscription" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_date" date NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL UNIQUE REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "expiry_date" date NOT NULL, "is_trial" bool NOT NULL); (params None)
INSERT INTO "new__billing_organizationsubscription" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", 1 FROM "billing_organizationsubscription"; (params ())
DROP TABLE "billing_organizationsubscription"; (params ())
ALTER TABLE "new__billing_organizationsubscription" RENAME TO "billing_organizationsubscription"; (params ())
CREATE INDEX "billing_organizationsubscription_created_at_5fe929bc" ON "billing_organizationsubscription" ("created_at"); (params ())
CREATE INDEX "billing_organizationsubscription_is_deleted_d21af953" ON "billing_organizationsubscription" ("is_deleted"); (params ())
CREATE INDEX "billing_organizationsubscription_is_active_235982dd" ON "billing_organizationsubscription" ("is_active"); (params ())
CREATE INDEX "billing_organizationsubscription_created_by_id_77b66299" ON "billing_organizationsubscription" ("created_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_deleted_by_id_d525f581" ON "billing_organizationsubscription" ("deleted_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_plan_id_f44ce89f" ON "billing_organizationsubscription" ("plan_id"); (params ())
CREATE INDEX "billing_organizationsubscription_updated_by_id_895cdc81" ON "billing_organizationsubscription" ("updated_by_id"); (params ())
ALTER TABLE "billing_organizationsubscription" ADD COLUMN "trial_end_date" date NULL; (params [])
CREATE TABLE "new__billing_organizationsubscription" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_date" date NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "expiry_date" date NOT NULL, "is_trial" bool NOT NULL, "trial_end_date" date NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__billing_organizationsubscription" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "created_by_id", "deleted_by_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "created_by_id", "deleted_by_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "organization_id" FROM "billing_organizationsubscription"; (params ())
DROP TABLE "billing_organizationsubscription"; (params ())
ALTER TABLE "new__billing_organizationsubscription" RENAME TO "billing_organizationsubscription"; (params ())
CREATE INDEX "billing_organizationsubscription_created_at_5fe929bc" ON "billing_organizationsubscription" ("created_at"); (params ())
CREATE INDEX "billing_organizationsubscription_is_deleted_d21af953" ON "billing_organizationsubscription" ("is_deleted"); (params ())
CREATE INDEX "billing_organizationsubscription_is_active_235982dd" ON "billing_organizationsubscription" ("is_active"); (params ())
CREATE INDEX "billing_organizationsubscription_created_by_id_77b66299" ON "billing_organizationsubscription" ("created_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_deleted_by_id_d525f581" ON "billing_organizationsubscription" ("deleted_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_plan_id_f44ce89f" ON "billing_organizationsubscription" ("plan_id"); (params ())
CREATE INDEX "billing_organizationsubscription_updated_by_id_895cdc81" ON "billing_organizationsubscription" ("updated_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_organization_id_2200a266" ON "billing_organizationsubscription" ("organization_id"); (params ())
CREATE UNIQUE INDEX "uq_active_subscription_per_org" ON "billing_organizationsubscription" ("organization_id") WHERE "is_active"; (params None)
ALTER TABLE "billing_plan" RENAME COLUMN "price_monthly" TO "monthly_price"; (params ())
ALTER TABLE "billing_plan" RENAME COLUMN "price_yearly" TO "yearly_price"; (params ())
ALTER TABLE "billing_plan" DROP COLUMN "features"; (params ())
ALTER TABLE "billing_plan" DROP COLUMN "is_trial"; (params ())
ALTER TABLE "billing_plan" DROP COLUMN "max_admins"; (params ())
ALTER TABLE "billing_plan" DROP COLUMN "trial_days"; (params ())
ALTER TABLE "billing_plan" ADD COLUMN "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0); (params [])
ALTER TABLE "billing_plan" ADD COLUMN "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0); (params [])
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL, "helpdesk_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL, "helpdesk_enabled" bool NOT NULL, "payroll_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL, "helpdesk_enabled" bool NOT NULL, "payroll_enabled" bool NOT NULL, "recruitment_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL, "helpdesk_enabled" bool NOT NULL, "payroll_enabled" bool NOT NULL, "recruitment_enabled" bool NOT NULL, "timesheet_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled", "timesheet_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL, "helpdesk_enabled" bool NOT NULL, "payroll_enabled" bool NOT NULL, "recruitment_enabled" bool NOT NULL, "timesheet_enabled" bool NOT NULL, "workflow_enabled" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled", "timesheet_enabled", "workflow_enabled") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled", "timesheet_enabled", 1 FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_is_active_f924896c" ON "billing_plan" ("is_active"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
CREATE TABLE "billing_paymenttransaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "amount" decimal NOT NULL, "currency" varchar(10) NOT NULL, "status" varchar(20) NOT NULL, "razorpay_order_id" varchar(100) NOT NULL, "razorpay_payment_id" varchar(100) NOT NULL, "razorpay_signature" varchar(255) NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "paid_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "billing_paymenttransaction_created_at_204bd0bc" ON "billing_paymenttransaction" ("created_at"); (params ())
CREATE INDEX "billing_paymenttransaction_is_deleted_7a69c16b" ON "billing_paymenttransaction" ("is_deleted"); (params ())
CREATE INDEX "billing_paymenttransaction_is_active_3273095b" ON "billing_paymenttransaction" ("is_active"); (params ())
CREATE INDEX "billing_paymenttransaction_created_by_id_afc54ac3" ON "billing_paymenttransaction" ("created_by_id"); (params ())
CREATE INDEX "billing_paymenttransaction_deleted_by_id_ef7e110e" ON "billing_paymenttransaction" ("deleted_by_id"); (params ())
CREATE INDEX "billing_paymenttransaction_organization_id_73242618" ON "billing_paymenttransaction" ("organization_id"); (params ())
CREATE INDEX "billing_paymenttransaction_plan_id_1d95095f" ON "billing_paymenttransaction" ("plan_id"); (params ())
CREATE INDEX "billing_paymenttransaction_subscription_id_03d9f9f5" ON "billing_paymenttransaction" ("subscription_id"); (params ())
CREATE INDEX "billing_paymenttransaction_updated_by_id_270eb4a1" ON "billing_paymenttransaction" ("updated_by_id"); (params ())
CREATE TABLE "billing_organizationbillingprofile" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "legal_name" varchar(255) NOT NULL, "billing_address" text NOT NULL, "gstin" varchar(15) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__billing_organizationbillingprofile" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "legal_name" varchar(255) NOT NULL, "billing_address" text NOT NULL, "gstin" varchar(15) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_billing_profile_per_org" UNIQUE ("organization_id")); (params None)
INSERT INTO "new__billing_organizationbillingprofile" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "legal_name", "billing_address", "gstin", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "legal_name", "billing_address", "gstin", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id" FROM "billing_organizationbillingprofile"; (params ())
DROP TABLE "billing_organizationbillingprofile"; (params ())
ALTER TABLE "new__billing_organizationbillingprofile" RENAME TO "billing_organizationbillingprofile"; (params ())
CREATE INDEX "billing_organizationbillingprofile_created_at_3052fd71" ON "billing_organizationbillingprofile" ("created_at"); (params ())
CREATE INDEX "billing_organizationbillingprofile_is_deleted_2c1fd382" ON "billing_organizationbillingprofile" ("is_deleted"); (params ())
CREATE INDEX "billing_organizationbillingprofile_is_active_648fa28a" ON "billing_organizationbillingprofile" ("is_active"); (params ())
CREATE INDEX "billing_organizationbillingprofile_created_by_id_a0001e54" ON "billing_organizationbillingprofile" ("created_by_id"); (params ())
CREATE INDEX "billing_organizationbillingprofile_deleted_by_id_09549985" ON "billing_organizationbillingprofile" ("deleted_by_id"); (params ())
CREATE INDEX "billing_organizationbillingprofile_organization_id_35445efb" ON "billing_organizationbillingprofile" ("organization_id"); (params ())
CREATE INDEX "billing_organizationbillingprofile_updated_by_id_1dcd8c7c" ON "billing_organizationbillingprofile" ("updated_by_id"); (params ())
ALTER TABLE "billing_invoice" RENAME COLUMN "tax" TO "gst_amount"; (params ())
ALTER TABLE "billing_invoice" RENAME COLUMN "total" TO "total_amount"; (params ())
ALTER TABLE "billing_invoice" RENAME COLUMN "status" TO "paid_status"; (params ())
ALTER TABLE "billing_invoice" DROP COLUMN "billing_period_start"; (params ())
ALTER TABLE "billing_invoice" DROP COLUMN "billing_period_end"; (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", '' FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", '' FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL, "generated_at" datetime NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", '2026-02-27 11:52:32.618735' FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL, "generated_at" datetime NOT NULL, "gst_percentage" decimal NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", '18.00' FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL, "generated_at" datetime NOT NULL, "gst_percentage" decimal NOT NULL, "gstin" varchar(15) NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage", "gstin") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage", '' FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
ALTER TABLE "billing_invoice" ADD COLUMN "plan_id" char(32) NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL, "generated_at" datetime NOT NULL, "gst_percentage" decimal NOT NULL, "gstin" varchar(15) NOT NULL, "plan_id" char(32) NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage", "gstin", "plan_id", "gst_amount") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage", "gstin", "plan_id", "gst_amount" FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE INDEX "billing_invoice_plan_id_0c445640" ON "billing_invoice" ("plan_id"); (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL, "gst_percentage" decimal NOT NULL, "gstin" varchar(15) NOT NULL, "plan_id" char(32) NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "generated_at" datetime NOT NULL); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "gst_percentage", "gstin", "plan_id", "generated_at") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "gst_percentage", "gstin", "plan_id", "generated_at" FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE INDEX "billing_invoice_plan_id_0c445640" ON "billing_invoice" ("plan_id"); (params ())
CREATE TABLE "new__billing_invoice" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "invoice_number" varchar(50) NOT NULL UNIQUE, "amount" decimal NOT NULL, "due_date" date NOT NULL, "paid_at" datetime NULL, "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "subscription_id" char(32) NOT NULL REFERENCES "billing_organizationsubscription" ("id") DEFERRABLE INITIALLY DEFERRED, "gst_amount" decimal NOT NULL, "total_amount" decimal NOT NULL, "paid_status" varchar(20) NOT NULL, "billing_address" text NOT NULL, "billing_name" varchar(255) NOT NULL, "generated_at" datetime NOT NULL, "gst_percentage" decimal NOT NULL, "gstin" varchar(15) NOT NULL, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__billing_invoice" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage", "gstin", "plan_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "invoice_number", "amount", "due_date", "paid_at", "pdf_file", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "subscription_id", "gst_amount", "total_amount", "paid_status", "billing_address", "billing_name", "generated_at", "gst_percentage", "gstin", coalesce("plan_id", NULL) FROM "billing_invoice"; (params ())
DROP TABLE "billing_invoice"; (params ())
ALTER TABLE "new__billing_invoice" RENAME TO "billing_invoice"; (params ())
CREATE INDEX "billing_invoice_created_at_b7b167e4" ON "billing_invoice" ("created_at"); (params ())
CREATE INDEX "billing_invoice_is_deleted_e856272d" ON "billing_invoice" ("is_deleted"); (params ())
CREATE INDEX "billing_invoice_is_active_66b4be52" ON "billing_invoice" ("is_active"); (params ())
CREATE INDEX "billing_invoice_created_by_id_c711181e" ON "billing_invoice" ("created_by_id"); (params ())
CREATE INDEX "billing_invoice_deleted_by_id_ab29de14" ON "billing_invoice" ("deleted_by_id"); (params ())
CREATE INDEX "billing_invoice_organization_id_244f1474" ON "billing_invoice" ("organization_id"); (params ())
CREATE INDEX "billing_invoice_updated_by_id_5a3f7ac6" ON "billing_invoice" ("updated_by_id"); (params ())
CREATE INDEX "billing_invoice_subscription_id_b7df633b" ON "billing_invoice" ("subscription_id"); (params ())
CREATE INDEX "billing_invoice_plan_id_0c445640" ON "billing_invoice" ("plan_id"); (params ())
CREATE TABLE "new__billing_organizationsubscription" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "start_date" date NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "expiry_date" date NOT NULL, "is_trial" bool NOT NULL, "trial_end_date" date NULL, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__billing_organizationsubscription" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "is_active" FROM "billing_organizationsubscription"; (params ())
DROP TABLE "billing_organizationsubscription"; (params ())
ALTER TABLE "new__billing_organizationsubscription" RENAME TO "billing_organizationsubscription"; (params ())
CREATE UNIQUE INDEX "uq_active_subscription_per_org" ON "billing_organizationsubscription" ("organization_id") WHERE "is_active"; (params ())
CREATE INDEX "billing_organizationsubscription_created_at_5fe929bc" ON "billing_organizationsubscription" ("created_at"); (params ())
CREATE INDEX "billing_organizationsubscription_is_deleted_d21af953" ON "billing_organizationsubscription" ("is_deleted"); (params ())
CREATE INDEX "billing_organizationsubscription_created_by_id_77b66299" ON "billing_organizationsubscription" ("created_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_deleted_by_id_d525f581" ON "billing_organizationsubscription" ("deleted_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_organization_id_2200a266" ON "billing_organizationsubscription" ("organization_id"); (params ())
CREATE INDEX "billing_organizationsubscription_plan_id_f44ce89f" ON "billing_organizationsubscription" ("plan_id"); (params ())
CREATE INDEX "billing_organizationsubscription_updated_by_id_895cdc81" ON "billing_organizationsubscription" ("updated_by_id"); (params ())
CREATE TABLE "new__billing_plan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL UNIQUE, "description" text NOT NULL, "max_employees" integer unsigned NULL CHECK ("max_employees" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "monthly_price" decimal NOT NULL, "yearly_price" decimal NOT NULL, "max_branches" integer unsigned NULL CHECK ("max_branches" >= 0), "storage_limit" integer unsigned NULL CHECK ("storage_limit" >= 0), "attendance_enabled" bool NOT NULL, "document_enabled" bool NOT NULL, "helpdesk_enabled" bool NOT NULL, "payroll_enabled" bool NOT NULL, "recruitment_enabled" bool NOT NULL, "timesheet_enabled" bool NOT NULL, "workflow_enabled" bool NOT NULL, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__billing_plan" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled", "timesheet_enabled", "workflow_enabled", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "max_employees", "created_by_id", "deleted_by_id", "updated_by_id", "monthly_price", "yearly_price", "max_branches", "storage_limit", "attendance_enabled", "document_enabled", "helpdesk_enabled", "payroll_enabled", "recruitment_enabled", "timesheet_enabled", "workflow_enabled", "is_active" FROM "billing_plan"; (params ())
DROP TABLE "billing_plan"; (params ())
ALTER TABLE "new__billing_plan" RENAME TO "billing_plan"; (params ())
CREATE INDEX "billing_plan_created_at_b9368e50" ON "billing_plan" ("created_at"); (params ())
CREATE INDEX "billing_plan_is_deleted_9ad65b02" ON "billing_plan" ("is_deleted"); (params ())
CREATE INDEX "billing_plan_created_by_id_dfdfdb59" ON "billing_plan" ("created_by_id"); (params ())
CREATE INDEX "billing_plan_deleted_by_id_33a5a21c" ON "billing_plan" ("deleted_by_id"); (params ())
CREATE INDEX "billing_plan_updated_by_id_836e61ba" ON "billing_plan" ("updated_by_id"); (params ())
ALTER TABLE "billing_organizationsubscription" ADD COLUMN "expired_notice_sent_at" datetime NULL; (params [])
CREATE TABLE "new__billing_organizationsubscription" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_date" date NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "expiry_date" date NOT NULL, "is_trial" bool NOT NULL, "trial_end_date" date NULL, "expired_notice_sent_at" datetime NULL, "grace_period_days" smallint unsigned NOT NULL CHECK ("grace_period_days" >= 0)); (params None)
INSERT INTO "new__billing_organizationsubscription" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "expired_notice_sent_at", "grace_period_days") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "expired_notice_sent_at", 3 FROM "billing_organizationsubscription"; (params ())
DROP TABLE "billing_organizationsubscription"; (params ())
ALTER TABLE "new__billing_organizationsubscription" RENAME TO "billing_organizationsubscription"; (params ())
CREATE UNIQUE INDEX "uq_active_subscription_per_org" ON "billing_organizationsubscription" ("organization_id") WHERE "is_active"; (params ())
CREATE INDEX "billing_organizationsubscription_created_at_5fe929bc" ON "billing_organizationsubscription" ("created_at"); (params ())
CREATE INDEX "billing_organizationsubscription_is_deleted_d21af953" ON "billing_organizationsubscription" ("is_deleted"); (params ())
CREATE INDEX "billing_organizationsubscription_created_by_id_77b66299" ON "billing_organizationsubscription" ("created_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_deleted_by_id_d525f581" ON "billing_organizationsubscription" ("deleted_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_organization_id_2200a266" ON "billing_organizationsubscription" ("organization_id"); (params ())
CREATE INDEX "billing_organizationsubscription_plan_id_f44ce89f" ON "billing_organizationsubscription" ("plan_id"); (params ())
CREATE INDEX "billing_organizationsubscription_updated_by_id_895cdc81" ON "billing_organizationsubscription" ("updated_by_id"); (params ())
ALTER TABLE "billing_organizationsubscription" ADD COLUMN "reminder_sent_1_day_at" datetime NULL; (params [])
ALTER TABLE "billing_organizationsubscription" ADD COLUMN "reminder_sent_3_days_at" datetime NULL; (params [])
ALTER TABLE "billing_organizationsubscription" ADD COLUMN "grace_notice_sent_at" datetime NULL; (params [])
ALTER TABLE "billing_organizationsubscription" ADD COLUMN "suspension_notice_sent_at" datetime NULL; (params [])
CREATE TABLE "new__billing_bankdetails" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "account_name" varchar(255) NOT NULL, "account_number" varchar(50) NOT NULL, "bank_name" varchar(255) NOT NULL, "ifsc_code" varchar(20) NOT NULL, "swift_code" varchar(20) NULL, "branch_name" varchar(255) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__billing_bankdetails" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "account_name", "account_number", "bank_name", "ifsc_code", "swift_code", "branch_name", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "account_name", "account_number", "bank_name", "ifsc_code", "swift_code", "branch_name", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "billing_bankdetails"; (params ())
DROP TABLE "billing_bankdetails"; (params ())
ALTER TABLE "new__billing_bankdetails" RENAME TO "billing_bankdetails"; (params ())
CREATE INDEX "billing_bankdetails_created_at_cf6c9c32" ON "billing_bankdetails" ("created_at"); (params ())
CREATE INDEX "billing_bankdetails_is_deleted_0fe43aeb" ON "billing_bankdetails" ("is_deleted"); (params ())
CREATE INDEX "billing_bankdetails_created_by_id_3d834d7b" ON "billing_bankdetails" ("created_by_id"); (params ())
CREATE INDEX "billing_bankdetails_deleted_by_id_080e5ded" ON "billing_bankdetails" ("deleted_by_id"); (params ())
CREATE INDEX "billing_bankdetails_organization_id_55d60b88" ON "billing_bankdetails" ("organization_id"); (params ())
CREATE INDEX "billing_bankdetails_updated_by_id_f01167d1" ON "billing_bankdetails" ("updated_by_id"); (params ())
CREATE INDEX "billing_bankdetails_is_active_7216725f" ON "billing_bankdetails" ("is_active"); (params ())
CREATE TABLE "new__billing_organizationsubscription" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "start_date" date NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "plan_id" char(32) NOT NULL REFERENCES "billing_plan" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "expiry_date" date NOT NULL, "is_trial" bool NOT NULL, "trial_end_date" date NULL, "expired_notice_sent_at" datetime NULL, "grace_period_days" smallint unsigned NOT NULL CHECK ("grace_period_days" >= 0), "reminder_sent_1_day_at" datetime NULL, "reminder_sent_3_days_at" datetime NULL, "grace_notice_sent_at" datetime NULL, "suspension_notice_sent_at" datetime NULL, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__billing_organizationsubscription" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "expired_notice_sent_at", "grace_period_days", "reminder_sent_1_day_at", "reminder_sent_3_days_at", "grace_notice_sent_at", "suspension_notice_sent_at", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "start_date", "created_by_id", "deleted_by_id", "organization_id", "plan_id", "updated_by_id", "expiry_date", "is_trial", "trial_end_date", "expired_notice_sent_at", "grace_period_days", "reminder_sent_1_day_at", "reminder_sent_3_days_at", "grace_notice_sent_at", "suspension_notice_sent_at", "is_active" FROM "billing_organizationsubscription"; (params ())
DROP TABLE "billing_organizationsubscription"; (params ())
ALTER TABLE "new__billing_organizationsubscription" RENAME TO "billing_organizationsubscription"; (params ())
CREATE UNIQUE INDEX "uq_active_subscription_per_org" ON "billing_organizationsubscription" ("organization_id") WHERE "is_active"; (params ())
CREATE INDEX "billing_organizationsubscription_created_at_5fe929bc" ON "billing_organizationsubscription" ("created_at"); (params ())
CREATE INDEX "billing_organizationsubscription_is_deleted_d21af953" ON "billing_organizationsubscription" ("is_deleted"); (params ())
CREATE INDEX "billing_organizationsubscription_created_by_id_77b66299" ON "billing_organizationsubscription" ("created_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_deleted_by_id_d525f581" ON "billing_organizationsubscription" ("deleted_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_organization_id_2200a266" ON "billing_organizationsubscription" ("organization_id"); (params ())
CREATE INDEX "billing_organizationsubscription_plan_id_f44ce89f" ON "billing_organizationsubscription" ("plan_id"); (params ())
CREATE INDEX "billing_organizationsubscription_updated_by_id_895cdc81" ON "billing_organizationsubscription" ("updated_by_id"); (params ())
CREATE INDEX "billing_organizationsubscription_is_active_235982dd" ON "billing_organizationsubscription" ("is_active"); (params ())
CREATE TABLE "chat_conversation" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "type" varchar(20) NOT NULL, "name" varchar(255) NULL, "description" text NULL, "scope_id" varchar(255) NULL, "last_message_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "chat_conversationparticipant" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "role" varchar(20) NOT NULL, "joined_at" datetime NOT NULL, "last_read_at" datetime NOT NULL, "is_muted" bool NOT NULL, "is_archived" bool NOT NULL, "conversation_id" char(32) NOT NULL REFERENCES "chat_conversation" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "chat_message" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "content" text NOT NULL, "attachment" varchar(100) NULL, "is_system_message" bool NOT NULL, "conversation_id" char(32) NOT NULL REFERENCES "chat_conversation" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "reply_to_id" char(32) NULL REFERENCES "chat_message" ("id") DEFERRABLE INITIALLY DEFERRED, "sender_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "chat_messagereaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "reaction" varchar(50) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "message_id" char(32) NOT NULL REFERENCES "chat_message" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "chat_conver_organiz_465c12_idx" ON "chat_conversation" ("organization_id", "created_at"); (params None)
CREATE UNIQUE INDEX "chat_conversationparticipant_conversation_id_user_id_79a6b8c0_uniq" ON "chat_conversationparticipant" ("conversation_id", "user_id"); (params ())
CREATE UNIQUE INDEX "chat_messagereaction_message_id_user_id_reaction_01c42647_uniq" ON "chat_messagereaction" ("message_id", "user_id", "reaction"); (params ())
CREATE INDEX "chat_conversation_created_at_8be0a7c7" ON "chat_conversation" ("created_at"); (params ())
CREATE INDEX "chat_conversation_is_deleted_a80723b5" ON "chat_conversation" ("is_deleted"); (params ())
CREATE INDEX "chat_conversation_is_active_f874169a" ON "chat_conversation" ("is_active"); (params ())
CREATE INDEX "chat_conversation_created_by_id_615454ae" ON "chat_conversation" ("created_by_id"); (params ())
CREATE INDEX "chat_conversation_deleted_by_id_05a890d2" ON "chat_conversation" ("deleted_by_id"); (params ())
CREATE INDEX "chat_conversation_organization_id_37517453" ON "chat_conversation" ("organization_id"); (params ())
CREATE INDEX "chat_conversation_updated_by_id_7c8c6eeb" ON "chat_conversation" ("updated_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_created_at_6f42fa85" ON "chat_conversationparticipant" ("created_at"); (params ())
CREATE INDEX "chat_conversationparticipant_is_deleted_f88f7094" ON "chat_conversationparticipant" ("is_deleted"); (params ())
CREATE INDEX "chat_conversationparticipant_is_active_9dc48c99" ON "chat_conversationparticipant" ("is_active"); (params ())
CREATE INDEX "chat_conversationparticipant_conversation_id_8a6499f0" ON "chat_conversationparticipant" ("conversation_id"); (params ())
CREATE INDEX "chat_conversationparticipant_created_by_id_6e141039" ON "chat_conversationparticipant" ("created_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_deleted_by_id_5d85ba4e" ON "chat_conversationparticipant" ("deleted_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_organization_id_ff7dabf0" ON "chat_conversationparticipant" ("organization_id"); (params ())
CREATE INDEX "chat_conversationparticipant_updated_by_id_cde7a7d3" ON "chat_conversationparticipant" ("updated_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_user_id_534d53ea" ON "chat_conversationparticipant" ("user_id"); (params ())
CREATE INDEX "chat_message_created_at_618078f0" ON "chat_message" ("created_at"); (params ())
CREATE INDEX "chat_message_is_deleted_33209c33" ON "chat_message" ("is_deleted"); (params ())
CREATE INDEX "chat_message_is_active_1b0b6a6d" ON "chat_message" ("is_active"); (params ())
CREATE INDEX "chat_message_conversation_id_a1207bf4" ON "chat_message" ("conversation_id"); (params ())
CREATE INDEX "chat_message_created_by_id_a189218f" ON "chat_message" ("created_by_id"); (params ())
CREATE INDEX "chat_message_deleted_by_id_84f8bbc9" ON "chat_message" ("deleted_by_id"); (params ())
CREATE INDEX "chat_message_organization_id_d7e3d1cf" ON "chat_message" ("organization_id"); (params ())
CREATE INDEX "chat_message_reply_to_id_afede338" ON "chat_message" ("reply_to_id"); (params ())
CREATE INDEX "chat_message_sender_id_991c686c" ON "chat_message" ("sender_id"); (params ())
CREATE INDEX "chat_message_updated_by_id_bfb7aa4a" ON "chat_message" ("updated_by_id"); (params ())
CREATE INDEX "chat_messagereaction_created_at_55b875ac" ON "chat_messagereaction" ("created_at"); (params ())
CREATE INDEX "chat_messagereaction_is_deleted_f3da9d74" ON "chat_messagereaction" ("is_deleted"); (params ())
CREATE INDEX "chat_messagereaction_is_active_c53a9036" ON "chat_messagereaction" ("is_active"); (params ())
CREATE INDEX "chat_messagereaction_created_by_id_fabeb970" ON "chat_messagereaction" ("created_by_id"); (params ())
CREATE INDEX "chat_messagereaction_deleted_by_id_ec8edada" ON "chat_messagereaction" ("deleted_by_id"); (params ())
CREATE INDEX "chat_messagereaction_message_id_ce403450" ON "chat_messagereaction" ("message_id"); (params ())
CREATE INDEX "chat_messagereaction_organization_id_badb95f1" ON "chat_messagereaction" ("organization_id"); (params ())
CREATE INDEX "chat_messagereaction_updated_by_id_d37f8c73" ON "chat_messagereaction" ("updated_by_id"); (params ())
CREATE INDEX "chat_messagereaction_user_id_2772da4b" ON "chat_messagereaction" ("user_id"); (params ())
CREATE TABLE "new__chat_conversation" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "type" varchar(20) NOT NULL, "name" varchar(255) NULL, "description" text NULL, "scope_id" varchar(255) NULL, "last_message_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_conversation" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "type", "name", "description", "scope_id", "last_message_at", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "type", "name", "description", "scope_id", "last_message_at", "created_by_id", "deleted_by_id", "updated_by_id", coalesce("organization_id", NULL) FROM "chat_conversation"; (params ())
DROP TABLE "chat_conversation"; (params ())
ALTER TABLE "new__chat_conversation" RENAME TO "chat_conversation"; (params ())
CREATE INDEX "chat_conversation_created_at_8be0a7c7" ON "chat_conversation" ("created_at"); (params ())
CREATE INDEX "chat_conversation_is_deleted_a80723b5" ON "chat_conversation" ("is_deleted"); (params ())
CREATE INDEX "chat_conversation_is_active_f874169a" ON "chat_conversation" ("is_active"); (params ())
CREATE INDEX "chat_conversation_created_by_id_615454ae" ON "chat_conversation" ("created_by_id"); (params ())
CREATE INDEX "chat_conversation_deleted_by_id_05a890d2" ON "chat_conversation" ("deleted_by_id"); (params ())
CREATE INDEX "chat_conversation_updated_by_id_7c8c6eeb" ON "chat_conversation" ("updated_by_id"); (params ())
CREATE INDEX "chat_conversation_organization_id_37517453" ON "chat_conversation" ("organization_id"); (params ())
CREATE INDEX "chat_conver_organiz_465c12_idx" ON "chat_conversation" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__chat_conversationparticipant" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "role" varchar(20) NOT NULL, "joined_at" datetime NOT NULL, "last_read_at" datetime NOT NULL, "is_muted" bool NOT NULL, "is_archived" bool NOT NULL, "conversation_id" char(32) NOT NULL REFERENCES "chat_conversation" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_conversationparticipant" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "role", "joined_at", "last_read_at", "is_muted", "is_archived", "conversation_id", "created_by_id", "deleted_by_id", "updated_by_id", "user_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "role", "joined_at", "last_read_at", "is_muted", "is_archived", "conversation_id", "created_by_id", "deleted_by_id", "updated_by_id", "user_id", coalesce("organization_id", NULL) FROM "chat_conversationparticipant"; (params ())
DROP TABLE "chat_conversationparticipant"; (params ())
ALTER TABLE "new__chat_conversationparticipant" RENAME TO "chat_conversationparticipant"; (params ())
CREATE UNIQUE INDEX "chat_conversationparticipant_conversation_id_user_id_79a6b8c0_uniq" ON "chat_conversationparticipant" ("conversation_id", "user_id"); (params ())
CREATE INDEX "chat_conversationparticipant_created_at_6f42fa85" ON "chat_conversationparticipant" ("created_at"); (params ())
CREATE INDEX "chat_conversationparticipant_is_deleted_f88f7094" ON "chat_conversationparticipant" ("is_deleted"); (params ())
CREATE INDEX "chat_conversationparticipant_is_active_9dc48c99" ON "chat_conversationparticipant" ("is_active"); (params ())
CREATE INDEX "chat_conversationparticipant_conversation_id_8a6499f0" ON "chat_conversationparticipant" ("conversation_id"); (params ())
CREATE INDEX "chat_conversationparticipant_created_by_id_6e141039" ON "chat_conversationparticipant" ("created_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_deleted_by_id_5d85ba4e" ON "chat_conversationparticipant" ("deleted_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_updated_by_id_cde7a7d3" ON "chat_conversationparticipant" ("updated_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_user_id_534d53ea" ON "chat_conversationparticipant" ("user_id"); (params ())
CREATE INDEX "chat_conversationparticipant_organization_id_ff7dabf0" ON "chat_conversationparticipant" ("organization_id"); (params ())
CREATE TABLE "new__chat_message" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "content" text NOT NULL, "attachment" varchar(100) NULL, "is_system_message" bool NOT NULL, "conversation_id" char(32) NOT NULL REFERENCES "chat_conversation" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "sender_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "reply_to_id" char(32) NULL REFERENCES "chat_message" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_message" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "content", "attachment", "is_system_message", "conversation_id", "created_by_id", "deleted_by_id", "reply_to_id", "sender_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "content", "attachment", "is_system_message", "conversation_id", "created_by_id", "deleted_by_id", "reply_to_id", "sender_id", "updated_by_id", coalesce("organization_id", NULL) FROM "chat_message"; (params ())
DROP TABLE "chat_message"; (params ())
ALTER TABLE "new__chat_message" RENAME TO "chat_message"; (params ())
CREATE INDEX "chat_message_created_at_618078f0" ON "chat_message" ("created_at"); (params ())
CREATE INDEX "chat_message_is_deleted_33209c33" ON "chat_message" ("is_deleted"); (params ())
CREATE INDEX "chat_message_is_active_1b0b6a6d" ON "chat_message" ("is_active"); (params ())
CREATE INDEX "chat_message_conversation_id_a1207bf4" ON "chat_message" ("conversation_id"); (params ())
CREATE INDEX "chat_message_created_by_id_a189218f" ON "chat_message" ("created_by_id"); (params ())
CREATE INDEX "chat_message_deleted_by_id_84f8bbc9" ON "chat_message" ("deleted_by_id"); (params ())
CREATE INDEX "chat_message_sender_id_991c686c" ON "chat_message" ("sender_id"); (params ())
CREATE INDEX "chat_message_updated_by_id_bfb7aa4a" ON "chat_message" ("updated_by_id"); (params ())
CREATE INDEX "chat_message_organization_id_d7e3d1cf" ON "chat_message" ("organization_id"); (params ())
CREATE INDEX "chat_message_reply_to_id_afede338" ON "chat_message" ("reply_to_id"); (params ())
CREATE TABLE "new__chat_messagereaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "reaction" varchar(50) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "message_id" char(32) NOT NULL REFERENCES "chat_message" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_messagereaction" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "reaction", "created_by_id", "deleted_by_id", "message_id", "updated_by_id", "user_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "reaction", "created_by_id", "deleted_by_id", "message_id", "updated_by_id", "user_id", coalesce("organization_id", NULL) FROM "chat_messagereaction"; (params ())
DROP TABLE "chat_messagereaction"; (params ())
ALTER TABLE "new__chat_messagereaction" RENAME TO "chat_messagereaction"; (params ())
CREATE UNIQUE INDEX "chat_messagereaction_message_id_user_id_reaction_01c42647_uniq" ON "chat_messagereaction" ("message_id", "user_id", "reaction"); (params ())
CREATE INDEX "chat_messagereaction_created_at_55b875ac" ON "chat_messagereaction" ("created_at"); (params ())
CREATE INDEX "chat_messagereaction_is_deleted_f3da9d74" ON "chat_messagereaction" ("is_deleted"); (params ())
CREATE INDEX "chat_messagereaction_is_active_c53a9036" ON "chat_messagereaction" ("is_active"); (params ())
CREATE INDEX "chat_messagereaction_created_by_id_fabeb970" ON "chat_messagereaction" ("created_by_id"); (params ())
CREATE INDEX "chat_messagereaction_deleted_by_id_ec8edada" ON "chat_messagereaction" ("deleted_by_id"); (params ())
CREATE INDEX "chat_messagereaction_message_id_ce403450" ON "chat_messagereaction" ("message_id"); (params ())
CREATE INDEX "chat_messagereaction_updated_by_id_d37f8c73" ON "chat_messagereaction" ("updated_by_id"); (params ())
CREATE INDEX "chat_messagereaction_user_id_2772da4b" ON "chat_messagereaction" ("user_id"); (params ())
CREATE INDEX "chat_messagereaction_organization_id_badb95f1" ON "chat_messagereaction" ("organization_id"); (params ())
CREATE INDEX "chat_conver_organiz_38dd6d_idx" ON "chat_conversationparticipant" ("organization_id", "created_at"); (params None)
CREATE INDEX "chat_messag_organiz_123b28_idx" ON "chat_message" ("organization_id", "created_at"); (params None)
CREATE INDEX "chat_messag_organiz_b77086_idx" ON "chat_messagereaction" ("organization_id", "created_at"); (params None)
CREATE TABLE "chat_meetingroom" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "room_id" varchar(64) NOT NULL UNIQUE, "is_active" bool NOT NULL, "started_at" datetime NULL, "ended_at" datetime NULL, "created_by_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "chat_meetingroom_created_at_3963bad4" ON "chat_meetingroom" ("created_at"); (params ())
CREATE INDEX "chat_meetingroom_is_deleted_e238006e" ON "chat_meetingroom" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingroom_created_by_id_3d359c9d" ON "chat_meetingroom" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingroom_deleted_by_id_c9ad5e33" ON "chat_meetingroom" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingroom_organization_id_3b0b4e31" ON "chat_meetingroom" ("organization_id"); (params ())
CREATE INDEX "chat_meetingroom_updated_by_id_8409a59c" ON "chat_meetingroom" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetin_organiz_21407b_idx" ON "chat_meetingroom" ("organization_id", "room_id"); (params ())
CREATE INDEX "chat_meetin_organiz_6e32b4_idx" ON "chat_meetingroom" ("organization_id", "is_active"); (params ())
CREATE TABLE "chat_meetingrecording" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "recording_file" varchar(100) NOT NULL, "started_at" datetime NULL, "ended_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "meeting_room_id" char(32) NOT NULL REFERENCES "chat_meetingroom" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "recorded_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "chat_meetingschedule" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_time" datetime NOT NULL, "end_time" datetime NOT NULL, "title" varchar(255) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "meeting_room_id" char(32) NOT NULL REFERENCES "chat_meetingroom" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "chat_meetingschedule_participants" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "meetingschedule_id" char(32) NOT NULL REFERENCES "chat_meetingschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "chat_meetingrecording_created_at_ac0a433c" ON "chat_meetingrecording" ("created_at"); (params ())
CREATE INDEX "chat_meetingrecording_is_deleted_623130b8" ON "chat_meetingrecording" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingrecording_is_active_3815cbcc" ON "chat_meetingrecording" ("is_active"); (params ())
CREATE INDEX "chat_meetingrecording_created_by_id_79ae5e10" ON "chat_meetingrecording" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_deleted_by_id_e6c91d9e" ON "chat_meetingrecording" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_meeting_room_id_3b5c1011" ON "chat_meetingrecording" ("meeting_room_id"); (params ())
CREATE INDEX "chat_meetingrecording_organization_id_05091ad0" ON "chat_meetingrecording" ("organization_id"); (params ())
CREATE INDEX "chat_meetingrecording_recorded_by_id_a89bbcb8" ON "chat_meetingrecording" ("recorded_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_updated_by_id_55a330e4" ON "chat_meetingrecording" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetin_organiz_c3af6d_idx" ON "chat_meetingrecording" ("organization_id", "meeting_room_id"); (params ())
CREATE INDEX "chat_meetin_organiz_8b771b_idx" ON "chat_meetingrecording" ("organization_id", "created_at"); (params ())
CREATE INDEX "chat_meetingschedule_created_at_cea5843c" ON "chat_meetingschedule" ("created_at"); (params ())
CREATE INDEX "chat_meetingschedule_is_deleted_68911af2" ON "chat_meetingschedule" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingschedule_is_active_59d8f9d6" ON "chat_meetingschedule" ("is_active"); (params ())
CREATE INDEX "chat_meetingschedule_created_by_id_27c791f0" ON "chat_meetingschedule" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingschedule_deleted_by_id_eb661ee4" ON "chat_meetingschedule" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingschedule_meeting_room_id_4a652618" ON "chat_meetingschedule" ("meeting_room_id"); (params ())
CREATE INDEX "chat_meetingschedule_organization_id_e491d9a8" ON "chat_meetingschedule" ("organization_id"); (params ())
CREATE INDEX "chat_meetingschedule_updated_by_id_348b012b" ON "chat_meetingschedule" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetin_organiz_844760_idx" ON "chat_meetingschedule" ("organization_id", "start_time"); (params ())
CREATE INDEX "chat_meetin_meeting_df8ee3_idx" ON "chat_meetingschedule" ("meeting_room_id", "start_time"); (params ())
CREATE UNIQUE INDEX "chat_meetingschedule_participants_meetingschedule_id_user_id_24a1f6a5_uniq" ON "chat_meetingschedule_participants" ("meetingschedule_id", "user_id"); (params ())
CREATE INDEX "chat_meetingschedule_participants_meetingschedule_id_b2d4f110" ON "chat_meetingschedule_participants" ("meetingschedule_id"); (params ())
CREATE INDEX "chat_meetingschedule_participants_user_id_cc5c802c" ON "chat_meetingschedule_participants" ("user_id"); (params ())
CREATE TABLE "new__chat_conversation" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "type" varchar(20) NOT NULL, "name" varchar(255) NULL, "description" text NULL, "scope_id" varchar(255) NULL, "last_message_at" datetime NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_conversation" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "type", "name", "description", "scope_id", "last_message_at", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "type", "name", "description", "scope_id", "last_message_at", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id" FROM "chat_conversation"; (params ())
DROP TABLE "chat_conversation"; (params ())
ALTER TABLE "new__chat_conversation" RENAME TO "chat_conversation"; (params ())
CREATE INDEX "chat_conversation_created_at_8be0a7c7" ON "chat_conversation" ("created_at"); (params ())
CREATE INDEX "chat_conversation_is_deleted_a80723b5" ON "chat_conversation" ("is_deleted"); (params ())
CREATE INDEX "chat_conversation_is_active_f874169a" ON "chat_conversation" ("is_active"); (params ())
CREATE INDEX "chat_conversation_created_by_id_615454ae" ON "chat_conversation" ("created_by_id"); (params ())
CREATE INDEX "chat_conversation_deleted_by_id_05a890d2" ON "chat_conversation" ("deleted_by_id"); (params ())
CREATE INDEX "chat_conversation_updated_by_id_7c8c6eeb" ON "chat_conversation" ("updated_by_id"); (params ())
CREATE INDEX "chat_conversation_organization_id_37517453" ON "chat_conversation" ("organization_id"); (params ())
CREATE INDEX "chat_conver_organiz_465c12_idx" ON "chat_conversation" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__chat_conversationparticipant" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "role" varchar(20) NOT NULL, "joined_at" datetime NOT NULL, "last_read_at" datetime NOT NULL, "is_muted" bool NOT NULL, "is_archived" bool NOT NULL, "conversation_id" char(32) NOT NULL REFERENCES "chat_conversation" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_conversationparticipant" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "role", "joined_at", "last_read_at", "is_muted", "is_archived", "conversation_id", "created_by_id", "deleted_by_id", "updated_by_id", "user_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "role", "joined_at", "last_read_at", "is_muted", "is_archived", "conversation_id", "created_by_id", "deleted_by_id", "updated_by_id", "user_id", "organization_id" FROM "chat_conversationparticipant"; (params ())
DROP TABLE "chat_conversationparticipant"; (params ())
ALTER TABLE "new__chat_conversationparticipant" RENAME TO "chat_conversationparticipant"; (params ())
CREATE UNIQUE INDEX "chat_conversationparticipant_conversation_id_user_id_79a6b8c0_uniq" ON "chat_conversationparticipant" ("conversation_id", "user_id"); (params ())
CREATE INDEX "chat_conversationparticipant_created_at_6f42fa85" ON "chat_conversationparticipant" ("created_at"); (params ())
CREATE INDEX "chat_conversationparticipant_is_deleted_f88f7094" ON "chat_conversationparticipant" ("is_deleted"); (params ())
CREATE INDEX "chat_conversationparticipant_is_active_9dc48c99" ON "chat_conversationparticipant" ("is_active"); (params ())
CREATE INDEX "chat_conversationparticipant_conversation_id_8a6499f0" ON "chat_conversationparticipant" ("conversation_id"); (params ())
CREATE INDEX "chat_conversationparticipant_created_by_id_6e141039" ON "chat_conversationparticipant" ("created_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_deleted_by_id_5d85ba4e" ON "chat_conversationparticipant" ("deleted_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_updated_by_id_cde7a7d3" ON "chat_conversationparticipant" ("updated_by_id"); (params ())
CREATE INDEX "chat_conversationparticipant_user_id_534d53ea" ON "chat_conversationparticipant" ("user_id"); (params ())
CREATE INDEX "chat_conversationparticipant_organization_id_ff7dabf0" ON "chat_conversationparticipant" ("organization_id"); (params ())
CREATE INDEX "chat_conver_organiz_38dd6d_idx" ON "chat_conversationparticipant" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__chat_meetingrecording" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "recording_file" varchar(100) NOT NULL, "started_at" datetime NULL, "ended_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "meeting_room_id" char(32) NOT NULL REFERENCES "chat_meetingroom" ("id") DEFERRABLE INITIALLY DEFERRED, "recorded_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_meetingrecording" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "recording_file", "started_at", "ended_at", "created_by_id", "deleted_by_id", "meeting_room_id", "recorded_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "recording_file", "started_at", "ended_at", "created_by_id", "deleted_by_id", "meeting_room_id", "recorded_by_id", "updated_by_id", "organization_id" FROM "chat_meetingrecording"; (params ())
DROP TABLE "chat_meetingrecording"; (params ())
ALTER TABLE "new__chat_meetingrecording" RENAME TO "chat_meetingrecording"; (params ())
CREATE INDEX "chat_meetingrecording_created_at_ac0a433c" ON "chat_meetingrecording" ("created_at"); (params ())
CREATE INDEX "chat_meetingrecording_is_deleted_623130b8" ON "chat_meetingrecording" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingrecording_is_active_3815cbcc" ON "chat_meetingrecording" ("is_active"); (params ())
CREATE INDEX "chat_meetingrecording_created_by_id_79ae5e10" ON "chat_meetingrecording" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_deleted_by_id_e6c91d9e" ON "chat_meetingrecording" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_meeting_room_id_3b5c1011" ON "chat_meetingrecording" ("meeting_room_id"); (params ())
CREATE INDEX "chat_meetingrecording_recorded_by_id_a89bbcb8" ON "chat_meetingrecording" ("recorded_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_updated_by_id_55a330e4" ON "chat_meetingrecording" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetingrecording_organization_id_05091ad0" ON "chat_meetingrecording" ("organization_id"); (params ())
CREATE INDEX "chat_meetin_organiz_c3af6d_idx" ON "chat_meetingrecording" ("organization_id", "meeting_room_id"); (params ())
CREATE INDEX "chat_meetin_organiz_8b771b_idx" ON "chat_meetingrecording" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__chat_meetingroom" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "room_id" varchar(64) NOT NULL UNIQUE, "started_at" datetime NULL, "ended_at" datetime NULL, "created_by_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__chat_meetingroom" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "room_id", "started_at", "ended_at", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "room_id", "started_at", "ended_at", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "chat_meetingroom"; (params ())
DROP TABLE "chat_meetingroom"; (params ())
ALTER TABLE "new__chat_meetingroom" RENAME TO "chat_meetingroom"; (params ())
CREATE INDEX "chat_meetingroom_created_at_3963bad4" ON "chat_meetingroom" ("created_at"); (params ())
CREATE INDEX "chat_meetingroom_is_deleted_e238006e" ON "chat_meetingroom" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingroom_created_by_id_3d359c9d" ON "chat_meetingroom" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingroom_deleted_by_id_c9ad5e33" ON "chat_meetingroom" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingroom_organization_id_3b0b4e31" ON "chat_meetingroom" ("organization_id"); (params ())
CREATE INDEX "chat_meetingroom_updated_by_id_8409a59c" ON "chat_meetingroom" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetingroom_is_active_67f33be8" ON "chat_meetingroom" ("is_active"); (params ())
CREATE INDEX "chat_meetin_organiz_21407b_idx" ON "chat_meetingroom" ("organization_id", "room_id"); (params ())
CREATE INDEX "chat_meetin_organiz_6e32b4_idx" ON "chat_meetingroom" ("organization_id", "is_active"); (params ())
CREATE TABLE "new__chat_meetingroom" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "room_id" varchar(64) NOT NULL UNIQUE, "is_active" bool NOT NULL, "started_at" datetime NULL, "ended_at" datetime NULL, "created_by_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_meetingroom" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "room_id", "is_active", "started_at", "ended_at", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "room_id", "is_active", "started_at", "ended_at", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id" FROM "chat_meetingroom"; (params ())
DROP TABLE "chat_meetingroom"; (params ())
ALTER TABLE "new__chat_meetingroom" RENAME TO "chat_meetingroom"; (params ())
CREATE INDEX "chat_meetingroom_created_at_3963bad4" ON "chat_meetingroom" ("created_at"); (params ())
CREATE INDEX "chat_meetingroom_is_deleted_e238006e" ON "chat_meetingroom" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingroom_is_active_67f33be8" ON "chat_meetingroom" ("is_active"); (params ())
CREATE INDEX "chat_meetingroom_created_by_id_3d359c9d" ON "chat_meetingroom" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingroom_deleted_by_id_c9ad5e33" ON "chat_meetingroom" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingroom_updated_by_id_8409a59c" ON "chat_meetingroom" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetingroom_organization_id_3b0b4e31" ON "chat_meetingroom" ("organization_id"); (params ())
CREATE INDEX "chat_meetin_organiz_21407b_idx" ON "chat_meetingroom" ("organization_id", "room_id"); (params ())
CREATE INDEX "chat_meetin_organiz_6e32b4_idx" ON "chat_meetingroom" ("organization_id", "is_active"); (params ())
CREATE TABLE "new__chat_meetingschedule" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_time" datetime NOT NULL, "end_time" datetime NOT NULL, "title" varchar(255) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "meeting_room_id" char(32) NOT NULL REFERENCES "chat_meetingroom" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_meetingschedule" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_time", "end_time", "title", "created_by_id", "deleted_by_id", "meeting_room_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_time", "end_time", "title", "created_by_id", "deleted_by_id", "meeting_room_id", "updated_by_id", "organization_id" FROM "chat_meetingschedule"; (params ())
DROP TABLE "chat_meetingschedule"; (params ())
ALTER TABLE "new__chat_meetingschedule" RENAME TO "chat_meetingschedule"; (params ())
CREATE INDEX "chat_meetingschedule_created_at_cea5843c" ON "chat_meetingschedule" ("created_at"); (params ())
CREATE INDEX "chat_meetingschedule_is_deleted_68911af2" ON "chat_meetingschedule" ("is_deleted"); (params ())
CREATE INDEX "chat_meetingschedule_is_active_59d8f9d6" ON "chat_meetingschedule" ("is_active"); (params ())
CREATE INDEX "chat_meetingschedule_created_by_id_27c791f0" ON "chat_meetingschedule" ("created_by_id"); (params ())
CREATE INDEX "chat_meetingschedule_deleted_by_id_eb661ee4" ON "chat_meetingschedule" ("deleted_by_id"); (params ())
CREATE INDEX "chat_meetingschedule_meeting_room_id_4a652618" ON "chat_meetingschedule" ("meeting_room_id"); (params ())
CREATE INDEX "chat_meetingschedule_updated_by_id_348b012b" ON "chat_meetingschedule" ("updated_by_id"); (params ())
CREATE INDEX "chat_meetingschedule_organization_id_e491d9a8" ON "chat_meetingschedule" ("organization_id"); (params ())
CREATE INDEX "chat_meetin_organiz_844760_idx" ON "chat_meetingschedule" ("organization_id", "start_time"); (params ())
CREATE INDEX "chat_meetin_meeting_df8ee3_idx" ON "chat_meetingschedule" ("meeting_room_id", "start_time"); (params ())
CREATE TABLE "new__chat_message" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "content" text NOT NULL, "attachment" varchar(100) NULL, "is_system_message" bool NOT NULL, "conversation_id" char(32) NOT NULL REFERENCES "chat_conversation" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "sender_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "reply_to_id" char(32) NULL REFERENCES "chat_message" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_message" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "content", "attachment", "is_system_message", "conversation_id", "created_by_id", "deleted_by_id", "reply_to_id", "sender_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "content", "attachment", "is_system_message", "conversation_id", "created_by_id", "deleted_by_id", "reply_to_id", "sender_id", "updated_by_id", "organization_id" FROM "chat_message"; (params ())
DROP TABLE "chat_message"; (params ())
ALTER TABLE "new__chat_message" RENAME TO "chat_message"; (params ())
CREATE INDEX "chat_message_created_at_618078f0" ON "chat_message" ("created_at"); (params ())
CREATE INDEX "chat_message_is_deleted_33209c33" ON "chat_message" ("is_deleted"); (params ())
CREATE INDEX "chat_message_is_active_1b0b6a6d" ON "chat_message" ("is_active"); (params ())
CREATE INDEX "chat_message_conversation_id_a1207bf4" ON "chat_message" ("conversation_id"); (params ())
CREATE INDEX "chat_message_created_by_id_a189218f" ON "chat_message" ("created_by_id"); (params ())
CREATE INDEX "chat_message_deleted_by_id_84f8bbc9" ON "chat_message" ("deleted_by_id"); (params ())
CREATE INDEX "chat_message_sender_id_991c686c" ON "chat_message" ("sender_id"); (params ())
CREATE INDEX "chat_message_updated_by_id_bfb7aa4a" ON "chat_message" ("updated_by_id"); (params ())
CREATE INDEX "chat_message_organization_id_d7e3d1cf" ON "chat_message" ("organization_id"); (params ())
CREATE INDEX "chat_message_reply_to_id_afede338" ON "chat_message" ("reply_to_id"); (params ())
CREATE INDEX "chat_messag_organiz_123b28_idx" ON "chat_message" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__chat_messagereaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "reaction" varchar(50) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "message_id" char(32) NOT NULL REFERENCES "chat_message" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__chat_messagereaction" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "reaction", "created_by_id", "deleted_by_id", "message_id", "updated_by_id", "user_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "reaction", "created_by_id", "deleted_by_id", "message_id", "updated_by_id", "user_id", "organization_id" FROM "chat_messagereaction"; (params ())
DROP TABLE "chat_messagereaction"; (params ())
ALTER TABLE "new__chat_messagereaction" RENAME TO "chat_messagereaction"; (params ())
CREATE UNIQUE INDEX "chat_messagereaction_message_id_user_id_reaction_01c42647_uniq" ON "chat_messagereaction" ("message_id", "user_id", "reaction"); (params ())
CREATE INDEX "chat_messagereaction_created_at_55b875ac" ON "chat_messagereaction" ("created_at"); (params ())
CREATE INDEX "chat_messagereaction_is_deleted_f3da9d74" ON "chat_messagereaction" ("is_deleted"); (params ())
CREATE INDEX "chat_messagereaction_is_active_c53a9036" ON "chat_messagereaction" ("is_active"); (params ())
CREATE INDEX "chat_messagereaction_created_by_id_fabeb970" ON "chat_messagereaction" ("created_by_id"); (params ())
CREATE INDEX "chat_messagereaction_deleted_by_id_ec8edada" ON "chat_messagereaction" ("deleted_by_id"); (params ())
CREATE INDEX "chat_messagereaction_message_id_ce403450" ON "chat_messagereaction" ("message_id"); (params ())
CREATE INDEX "chat_messagereaction_updated_by_id_d37f8c73" ON "chat_messagereaction" ("updated_by_id"); (params ())
CREATE INDEX "chat_messagereaction_user_id_2772da4b" ON "chat_messagereaction" ("user_id"); (params ())
CREATE INDEX "chat_messagereaction_organization_id_badb95f1" ON "chat_messagereaction" ("organization_id"); (params ())
CREATE INDEX "chat_messag_organiz_b77086_idx" ON "chat_messagereaction" ("organization_id", "created_at"); (params ())
CREATE TABLE "employees_certification" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(255) NOT NULL, "issuing_organization" varchar(255) NOT NULL, "credential_id" varchar(100) NOT NULL, "credential_url" varchar(200) NOT NULL, "issue_date" date NOT NULL, "expiry_date" date NULL, "is_verified" bool NOT NULL, "verified_at" datetime NULL, "certificate_file" varchar(100) NULL); (params None)
CREATE TABLE "employees_document" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "document_type" varchar(50) NOT NULL, "name" varchar(255) NOT NULL, "description" text NOT NULL, "file" varchar(100) NOT NULL, "file_size" integer unsigned NOT NULL CHECK ("file_size" >= 0), "file_type" varchar(50) NOT NULL, "is_verified" bool NOT NULL, "verified_at" datetime NULL, "expiry_date" date NULL, "is_confidential" bool NOT NULL); (params None)
CREATE TABLE "employees_emergencycontact" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "relationship" varchar(50) NOT NULL, "phone" varchar(15) NOT NULL, "alternate_phone" varchar(15) NOT NULL, "email" varchar(254) NOT NULL, "address" text NOT NULL, "is_primary" bool NOT NULL); (params None)
CREATE TABLE "employees_employeeaddress" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "address_type" varchar(20) NOT NULL, "address_line1" varchar(255) NOT NULL, "address_line2" varchar(255) NOT NULL, "city" varchar(100) NOT NULL, "state" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "postal_code" varchar(20) NOT NULL, "is_primary" bool NOT NULL); (params None)
CREATE TABLE "employees_employeebankaccount" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "account_holder_name" varchar(100) NOT NULL, "bank_name" varchar(100) NOT NULL, "branch_name" varchar(100) NOT NULL, "account_number" varchar(255) NOT NULL, "ifsc_code" varchar(11) NOT NULL, "account_type" varchar(20) NOT NULL, "is_primary" bool NOT NULL); (params None)
CREATE TABLE "employees_employeedependent" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "relationship" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(10) NOT NULL, "is_covered_in_insurance" bool NOT NULL, "is_disabled" bool NOT NULL); (params None)
CREATE TABLE "employees_employeepromotion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "current_ctc" decimal NULL, "new_ctc" decimal NULL, "increment_percentage" decimal NULL, "requested_date" date NOT NULL, "effective_date" date NOT NULL, "reason" text NOT NULL, "achievements" text NOT NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL); (params None)
CREATE TABLE "employees_employeeskill" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "proficiency" varchar(20) NOT NULL, "years_of_experience" decimal NULL, "is_primary" bool NOT NULL, "is_verified" bool NOT NULL); (params None)
CREATE TABLE "employees_employeetransfer" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "transfer_type" varchar(20) NOT NULL, "requested_date" date NOT NULL, "effective_date" date NOT NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL); (params None)
CREATE TABLE "employees_employmenthistory" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "change_type" varchar(30) NOT NULL, "effective_date" date NOT NULL, "remarks" text NOT NULL); (params None)
CREATE TABLE "employees_exitinterview" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "interview_date" date NOT NULL, "job_satisfaction" smallint unsigned NULL CHECK ("job_satisfaction" >= 0), "work_life_balance" smallint unsigned NULL CHECK ("work_life_balance" >= 0), "management_support" smallint unsigned NULL CHECK ("management_support" >= 0), "growth_opportunities" smallint unsigned NULL CHECK ("growth_opportunities" >= 0), "compensation_satisfaction" smallint unsigned NULL CHECK ("compensation_satisfaction" >= 0), "work_environment" smallint unsigned NULL CHECK ("work_environment" >= 0), "team_collaboration" smallint unsigned NULL CHECK ("team_collaboration" >= 0), "reason_for_leaving" text NOT NULL, "liked_most" text NOT NULL, "improvements_suggested" text NOT NULL, "would_recommend" bool NULL, "would_return" bool NULL, "additional_feedback" text NOT NULL CHECK ((JSON_VALID("additional_feedback") OR "additional_feedback" IS NULL)), "is_completed" bool NOT NULL, "completed_at" datetime NULL, "is_confidential" bool NOT NULL); (params None)
CREATE TABLE "employees_resignationrequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "resignation_date" date NOT NULL, "requested_last_working_date" date NOT NULL, "approved_last_working_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "notice_period_waived" smallint unsigned NOT NULL CHECK ("notice_period_waived" >= 0), "shortfall_recovery" bool NOT NULL, "primary_reason" varchar(30) NOT NULL, "detailed_reason" text NOT NULL, "new_employer" varchar(200) NOT NULL, "status" varchar(20) NOT NULL, "accepted_at" datetime NULL, "rejection_reason" text NOT NULL, "exit_checklist_complete" bool NOT NULL, "fnf_processed" bool NOT NULL); (params None)
CREATE TABLE "employees_separationchecklist" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "task_name" varchar(200) NOT NULL, "description" text NOT NULL, "assigned_to_department" varchar(50) NOT NULL, "due_date" date NULL, "is_completed" bool NOT NULL, "completed_at" datetime NULL, "notes" text NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0)); (params None)
CREATE TABLE "employees_skill" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "category" varchar(50) NOT NULL, "description" text NOT NULL); (params None)
DROP INDEX "employees_e_employe_080927_idx"; (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params None)
DROP INDEX "employees_e_departm_27a5fc_idx"; (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params None)
DROP INDEX "employees_e_reporti_77852f_idx"; (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params None)
DROP INDEX "employees_department_organization_id_code_ee8f5d04_uniq"; (params ())
DROP INDEX "employees_designation_organization_id_code_8b53f22b_uniq"; (params ())
DROP INDEX "employees_employee_organization_id_employee_id_893baa29_uniq"; (params ())
ALTER TABLE "employees_department" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_department" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "employees_department" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_department" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "cost_center" varchar(50) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "head_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "parent_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_department" ("id", "is_active", "created_at", "updated_at", "name", "code", "description", "cost_center", "branch_id", "organization_id", "head_id", "parent_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "name", "code", "description", "cost_center", "branch_id", "organization_id", "head_id", "parent_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "employees_department"; (params ())
DROP TABLE "employees_department"; (params ())
ALTER TABLE "new__employees_department" RENAME TO "employees_department"; (params ())
CREATE INDEX "employees_certification_created_at_b44a2569" ON "employees_certification" ("created_at"); (params ())
CREATE INDEX "employees_certification_is_deleted_96f9da1d" ON "employees_certification" ("is_deleted"); (params ())
CREATE INDEX "employees_certification_is_active_b0403af8" ON "employees_certification" ("is_active"); (params ())
CREATE INDEX "employees_document_created_at_2b80f384" ON "employees_document" ("created_at"); (params ())
CREATE INDEX "employees_document_is_deleted_f44b6088" ON "employees_document" ("is_deleted"); (params ())
CREATE INDEX "employees_document_is_active_fc442eee" ON "employees_document" ("is_active"); (params ())
CREATE INDEX "employees_emergencycontact_created_at_58a5085d" ON "employees_emergencycontact" ("created_at"); (params ())
CREATE INDEX "employees_emergencycontact_is_deleted_c1e058fe" ON "employees_emergencycontact" ("is_deleted"); (params ())
CREATE INDEX "employees_emergencycontact_is_active_35a1b990" ON "employees_emergencycontact" ("is_active"); (params ())
CREATE INDEX "employees_employeeaddress_created_at_12fa6117" ON "employees_employeeaddress" ("created_at"); (params ())
CREATE INDEX "employees_employeeaddress_is_deleted_37252889" ON "employees_employeeaddress" ("is_deleted"); (params ())
CREATE INDEX "employees_employeeaddress_is_active_53ccade0" ON "employees_employeeaddress" ("is_active"); (params ())
CREATE INDEX "employees_employeebankaccount_created_at_e1ef1601" ON "employees_employeebankaccount" ("created_at"); (params ())
CREATE INDEX "employees_employeebankaccount_is_deleted_a1e38974" ON "employees_employeebankaccount" ("is_deleted"); (params ())
CREATE INDEX "employees_employeebankaccount_is_active_afbf3048" ON "employees_employeebankaccount" ("is_active"); (params ())
CREATE INDEX "employees_employeedependent_created_at_9b0f0d43" ON "employees_employeedependent" ("created_at"); (params ())
CREATE INDEX "employees_employeedependent_is_deleted_cf85a176" ON "employees_employeedependent" ("is_deleted"); (params ())
CREATE INDEX "employees_employeedependent_is_active_d1219310" ON "employees_employeedependent" ("is_active"); (params ())
CREATE INDEX "employees_employeepromotion_created_at_8c59a5c0" ON "employees_employeepromotion" ("created_at"); (params ())
CREATE INDEX "employees_employeepromotion_is_deleted_e0e27c98" ON "employees_employeepromotion" ("is_deleted"); (params ())
CREATE INDEX "employees_employeepromotion_is_active_a31f5a1f" ON "employees_employeepromotion" ("is_active"); (params ())
CREATE INDEX "employees_employeeskill_created_at_cfe29fb7" ON "employees_employeeskill" ("created_at"); (params ())
CREATE INDEX "employees_employeeskill_is_deleted_26808811" ON "employees_employeeskill" ("is_deleted"); (params ())
CREATE INDEX "employees_employeeskill_is_active_561d94f8" ON "employees_employeeskill" ("is_active"); (params ())
CREATE INDEX "employees_employeetransfer_created_at_5269b657" ON "employees_employeetransfer" ("created_at"); (params ())
CREATE INDEX "employees_employeetransfer_is_deleted_393a8e63" ON "employees_employeetransfer" ("is_deleted"); (params ())
CREATE INDEX "employees_employeetransfer_is_active_21983470" ON "employees_employeetransfer" ("is_active"); (params ())
CREATE INDEX "employees_employmenthistory_created_at_cad65a1e" ON "employees_employmenthistory" ("created_at"); (params ())
CREATE INDEX "employees_employmenthistory_is_deleted_eec0ebe8" ON "employees_employmenthistory" ("is_deleted"); (params ())
CREATE INDEX "employees_employmenthistory_is_active_ba07b103" ON "employees_employmenthistory" ("is_active"); (params ())
CREATE INDEX "employees_exitinterview_created_at_44efe227" ON "employees_exitinterview" ("created_at"); (params ())
CREATE INDEX "employees_exitinterview_is_deleted_5627665b" ON "employees_exitinterview" ("is_deleted"); (params ())
CREATE INDEX "employees_exitinterview_is_active_dc7e359c" ON "employees_exitinterview" ("is_active"); (params ())
CREATE INDEX "employees_resignationrequest_created_at_51b49e0b" ON "employees_resignationrequest" ("created_at"); (params ())
CREATE INDEX "employees_resignationrequest_is_deleted_4a97d4e2" ON "employees_resignationrequest" ("is_deleted"); (params ())
CREATE INDEX "employees_resignationrequest_is_active_9766e5ee" ON "employees_resignationrequest" ("is_active"); (params ())
CREATE INDEX "employees_separationchecklist_created_at_05c47da9" ON "employees_separationchecklist" ("created_at"); (params ())
CREATE INDEX "employees_separationchecklist_is_deleted_4a84df03" ON "employees_separationchecklist" ("is_deleted"); (params ())
CREATE INDEX "employees_separationchecklist_is_active_2fee3d57" ON "employees_separationchecklist" ("is_active"); (params ())
CREATE INDEX "employees_skill_created_at_c35a9b1c" ON "employees_skill" ("created_at"); (params ())
CREATE INDEX "employees_skill_is_deleted_c4521383" ON "employees_skill" ("is_deleted"); (params ())
CREATE INDEX "employees_skill_is_active_9cfb0741" ON "employees_skill" ("is_active"); (params ())
CREATE INDEX "employees_department_is_active_1bde0a96" ON "employees_department" ("is_active"); (params ())
CREATE INDEX "employees_department_created_at_40762079" ON "employees_department" ("created_at"); (params ())
CREATE INDEX "employees_department_branch_id_e28e5abc" ON "employees_department" ("branch_id"); (params ())
CREATE INDEX "employees_department_organization_id_af9a19f4" ON "employees_department" ("organization_id"); (params ())
CREATE INDEX "employees_department_head_id_760e2cc0" ON "employees_department" ("head_id"); (params ())
CREATE INDEX "employees_department_created_by_id_08449696" ON "employees_department" ("created_by_id"); (params ())
CREATE INDEX "employees_department_deleted_by_id_6020ab9c" ON "employees_department" ("deleted_by_id"); (params ())
CREATE INDEX "employees_department_is_deleted_bea1ccd7" ON "employees_department" ("is_deleted"); (params ())
CREATE INDEX "employees_department_parent_id_80dafee0" ON "employees_department" ("parent_id"); (params ())
CREATE INDEX "idx_department_org_name" ON "employees_department" ("organization_id", "name"); (params ())
ALTER TABLE "employees_department" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_designation" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_designation" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "employees_designation" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_designation" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "level" smallint unsigned NOT NULL CHECK ("level" >= 0), "grade" varchar(20) NOT NULL, "job_family" varchar(50) NOT NULL, "min_salary" decimal NULL, "max_salary" decimal NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__employees_designation" ("id", "is_active", "created_at", "updated_at", "name", "code", "description", "level", "grade", "job_family", "min_salary", "max_salary", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "name", "code", "description", "level", "grade", "job_family", "min_salary", "max_salary", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "employees_designation"; (params ())
DROP TABLE "employees_designation"; (params ())
ALTER TABLE "new__employees_designation" RENAME TO "employees_designation"; (params ())
CREATE INDEX "employees_department_updated_by_id_39c44a19" ON "employees_department" ("updated_by_id"); (params ())
CREATE INDEX "employees_designation_is_active_efb5f39b" ON "employees_designation" ("is_active"); (params ())
CREATE INDEX "employees_designation_created_at_4f8a7979" ON "employees_designation" ("created_at"); (params ())
CREATE INDEX "employees_designation_organization_id_ae03b414" ON "employees_designation" ("organization_id"); (params ())
CREATE INDEX "employees_designation_created_by_id_68dfdebb" ON "employees_designation" ("created_by_id"); (params ())
CREATE INDEX "employees_designation_deleted_by_id_1481587b" ON "employees_designation" ("deleted_by_id"); (params ())
CREATE INDEX "employees_designation_is_deleted_4aa34e9e" ON "employees_designation" ("is_deleted"); (params ())
ALTER TABLE "employees_designation" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employee" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employee" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "employees_employee" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" varchar(255) NOT NULL, "aadhaar_number" varchar(255) NOT NULL, "passport_number" varchar(255) NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "pf_number" varchar(255) NOT NULL, "esi_number" varchar(255) NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_designation_updated_by_id_fc99ef1f" ON "employees_designation" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
ALTER TABLE "employees_employee" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_location" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_location" ADD COLUMN "deleted_at" datetime NULL; (params [])
ALTER TABLE "employees_location" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_location" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "address_line1" varchar(255) NOT NULL, "address_line2" varchar(255) NOT NULL, "city" varchar(100) NOT NULL, "state" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "postal_code" varchar(20) NOT NULL, "latitude" decimal NULL, "longitude" decimal NULL, "geo_fence_radius" integer unsigned NOT NULL CHECK ("geo_fence_radius" >= 0), "phone" varchar(20) NOT NULL, "email" varchar(254) NOT NULL, "timezone" varchar(50) NOT NULL, "is_headquarters" bool NOT NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL); (params None)
INSERT INTO "new__employees_location" ("id", "is_active", "created_at", "updated_at", "name", "code", "address_line1", "address_line2", "city", "state", "country", "postal_code", "latitude", "longitude", "geo_fence_radius", "phone", "email", "timezone", "is_headquarters", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted") SELECT "id", "is_active", "created_at", "updated_at", "name", "code", "address_line1", "address_line2", "city", "state", "country", "postal_code", "latitude", "longitude", "geo_fence_radius", "phone", "email", "timezone", "is_headquarters", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", 0 FROM "employees_location"; (params ())
DROP TABLE "employees_location"; (params ())
ALTER TABLE "new__employees_location" RENAME TO "employees_location"; (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_location_is_active_7cdd1381" ON "employees_location" ("is_active"); (params ())
CREATE INDEX "employees_location_created_at_5933a487" ON "employees_location" ("created_at"); (params ())
CREATE INDEX "employees_location_organization_id_53763061" ON "employees_location" ("organization_id"); (params ())
CREATE INDEX "employees_location_created_by_id_686f5159" ON "employees_location" ("created_by_id"); (params ())
CREATE INDEX "employees_location_deleted_by_id_9b057f25" ON "employees_location" ("deleted_by_id"); (params ())
CREATE INDEX "employees_location_is_deleted_4bfaf4e6" ON "employees_location" ("is_deleted"); (params ())
ALTER TABLE "employees_location" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" varchar(255) NOT NULL, "passport_number" varchar(255) NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "pf_number" varchar(255) NOT NULL, "esi_number" varchar(255) NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "aadhaar_number" text NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "aadhaar_number") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "aadhaar_number" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_location_updated_by_id_d248b2a8" ON "employees_location" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" varchar(255) NOT NULL, "aadhaar_number" text NOT NULL, "passport_number" varchar(255) NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "pf_number" varchar(255) NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "esi_number" text NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "esi_number") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "esi_number" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "aadhaar_number" text NOT NULL, "passport_number" varchar(255) NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "pf_number" varchar(255) NOT NULL, "esi_number" text NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "pan_number" text NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "pan_number") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "pan_number" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" text NOT NULL, "aadhaar_number" text NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "pf_number" varchar(255) NOT NULL, "esi_number" text NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "passport_number" text NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "passport_number") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "passport_number" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" text NOT NULL, "aadhaar_number" text NOT NULL, "passport_number" text NOT NULL, "passport_expiry" date NULL, "uan_number" varchar(255) NOT NULL, "esi_number" text NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "pf_number" text NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "pf_number") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "pf_number" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" text NOT NULL, "aadhaar_number" text NOT NULL, "passport_number" text NOT NULL, "passport_expiry" date NULL, "pf_number" text NOT NULL, "esi_number" text NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "uan_number" text NOT NULL, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "uan_number") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id", "uan_number" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE TABLE "new__employees_department" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "cost_center" varchar(50) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "head_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "parent_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_department_org_code" UNIQUE ("organization_id", "code")); (params None)
INSERT INTO "new__employees_department" ("id", "is_active", "created_at", "updated_at", "name", "code", "description", "cost_center", "branch_id", "organization_id", "head_id", "parent_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id") SELECT "id", "is_active", "created_at", "updated_at", "name", "code", "description", "cost_center", "branch_id", "organization_id", "head_id", "parent_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id" FROM "employees_department"; (params ())
DROP TABLE "employees_department"; (params ())
ALTER TABLE "new__employees_department" RENAME TO "employees_department"; (params ())
CREATE INDEX "employees_department_is_active_1bde0a96" ON "employees_department" ("is_active"); (params ())
CREATE INDEX "employees_department_created_at_40762079" ON "employees_department" ("created_at"); (params ())
CREATE INDEX "employees_department_branch_id_e28e5abc" ON "employees_department" ("branch_id"); (params ())
CREATE INDEX "employees_department_organization_id_af9a19f4" ON "employees_department" ("organization_id"); (params ())
CREATE INDEX "employees_department_head_id_760e2cc0" ON "employees_department" ("head_id"); (params ())
CREATE INDEX "employees_department_created_by_id_08449696" ON "employees_department" ("created_by_id"); (params ())
CREATE INDEX "employees_department_deleted_by_id_6020ab9c" ON "employees_department" ("deleted_by_id"); (params ())
CREATE INDEX "employees_department_is_deleted_bea1ccd7" ON "employees_department" ("is_deleted"); (params ())
CREATE INDEX "employees_department_updated_by_id_39c44a19" ON "employees_department" ("updated_by_id"); (params ())
CREATE INDEX "employees_department_parent_id_80dafee0" ON "employees_department" ("parent_id"); (params ())
CREATE INDEX "idx_department_org_name" ON "employees_department" ("organization_id", "name"); (params ())
CREATE TABLE "new__employees_designation" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "level" smallint unsigned NOT NULL CHECK ("level" >= 0), "grade" varchar(20) NOT NULL, "job_family" varchar(50) NOT NULL, "min_salary" decimal NULL, "max_salary" decimal NULL, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_designation_org_code" UNIQUE ("organization_id", "code")); (params None)
INSERT INTO "new__employees_designation" ("id", "is_active", "created_at", "updated_at", "name", "code", "description", "level", "grade", "job_family", "min_salary", "max_salary", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id") SELECT "id", "is_active", "created_at", "updated_at", "name", "code", "description", "level", "grade", "job_family", "min_salary", "max_salary", "organization_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id" FROM "employees_designation"; (params ())
DROP TABLE "employees_designation"; (params ())
ALTER TABLE "new__employees_designation" RENAME TO "employees_designation"; (params ())
CREATE INDEX "employees_designation_is_active_efb5f39b" ON "employees_designation" ("is_active"); (params ())
CREATE INDEX "employees_designation_created_at_4f8a7979" ON "employees_designation" ("created_at"); (params ())
CREATE INDEX "employees_designation_organization_id_ae03b414" ON "employees_designation" ("organization_id"); (params ())
CREATE INDEX "employees_designation_created_by_id_68dfdebb" ON "employees_designation" ("created_by_id"); (params ())
CREATE INDEX "employees_designation_deleted_by_id_1481587b" ON "employees_designation" ("deleted_by_id"); (params ())
CREATE INDEX "employees_designation_is_deleted_4aa34e9e" ON "employees_designation" ("is_deleted"); (params ())
CREATE INDEX "employees_designation_updated_by_id_fc99ef1f" ON "employees_designation" ("updated_by_id"); (params ())
CREATE TABLE "new__employees_employee" ("id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "employee_id" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(20) NOT NULL, "marital_status" varchar(20) NOT NULL, "blood_group" varchar(5) NOT NULL, "nationality" varchar(50) NOT NULL, "employment_type" varchar(20) NOT NULL, "employment_status" varchar(20) NOT NULL, "date_of_joining" date NOT NULL, "confirmation_date" date NULL, "probation_end_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "date_of_exit" date NULL, "exit_reason" varchar(100) NOT NULL, "last_working_date" date NULL, "work_mode" varchar(20) NOT NULL, "pan_number" text NOT NULL, "aadhaar_number" text NOT NULL, "passport_number" text NOT NULL, "passport_expiry" date NULL, "uan_number" text NOT NULL, "pf_number" text NOT NULL, "esi_number" text NOT NULL, "bio" text NOT NULL, "linkedin_url" varchar(200) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "shift_id" char(32) NULL REFERENCES "attendance_shift" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_at" datetime NULL, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_deleted" bool NOT NULL, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "hr_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "reporting_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_employee_org_employee_id" UNIQUE ("organization_id", "employee_id")); (params None)
INSERT INTO "new__employees_employee" ("id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id") SELECT "id", "is_active", "created_at", "updated_at", "metadata", "employee_id", "date_of_birth", "gender", "marital_status", "blood_group", "nationality", "employment_type", "employment_status", "date_of_joining", "confirmation_date", "probation_end_date", "notice_period_days", "date_of_exit", "exit_reason", "last_working_date", "work_mode", "pan_number", "aadhaar_number", "passport_number", "passport_expiry", "uan_number", "pf_number", "esi_number", "bio", "linkedin_url", "branch_id", "department_id", "designation_id", "hr_manager_id", "location_id", "organization_id", "reporting_manager_id", "user_id", "shift_id", "created_by_id", "deleted_at", "deleted_by_id", "is_deleted", "updated_by_id" FROM "employees_employee"; (params ())
DROP TABLE "employees_employee"; (params ())
ALTER TABLE "new__employees_employee" RENAME TO "employees_employee"; (params ())
CREATE INDEX "employees_employee_is_active_bc4a1119" ON "employees_employee" ("is_active"); (params ())
CREATE INDEX "employees_employee_created_at_181d9f7f" ON "employees_employee" ("created_at"); (params ())
CREATE INDEX "employees_employee_employee_id_e152a244" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_employee_pan_number_edf43680" ON "employees_employee" ("pan_number"); (params ())
CREATE INDEX "employees_employee_aadhaar_number_5060a7b5" ON "employees_employee" ("aadhaar_number"); (params ())
CREATE INDEX "employees_employee_branch_id_16aa717b" ON "employees_employee" ("branch_id"); (params ())
CREATE INDEX "employees_employee_department_id_410c23c8" ON "employees_employee" ("department_id"); (params ())
CREATE INDEX "employees_employee_designation_id_00c584d7" ON "employees_employee" ("designation_id"); (params ())
CREATE INDEX "employees_employee_location_id_a3b73d44" ON "employees_employee" ("location_id"); (params ())
CREATE INDEX "employees_employee_organization_id_0bcd33e0" ON "employees_employee" ("organization_id"); (params ())
CREATE INDEX "employees_employee_shift_id_0efa57ac" ON "employees_employee" ("shift_id"); (params ())
CREATE INDEX "employees_employee_created_by_id_bfa47e39" ON "employees_employee" ("created_by_id"); (params ())
CREATE INDEX "employees_employee_deleted_by_id_d818da99" ON "employees_employee" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employee_is_deleted_91931ddd" ON "employees_employee" ("is_deleted"); (params ())
CREATE INDEX "employees_employee_updated_by_id_546c8556" ON "employees_employee" ("updated_by_id"); (params ())
CREATE INDEX "employees_employee_hr_manager_id_84004fbb" ON "employees_employee" ("hr_manager_id"); (params ())
CREATE INDEX "employees_employee_reporting_manager_id_47ea9580" ON "employees_employee" ("reporting_manager_id"); (params ())
CREATE INDEX "employees_e_employe_514cc5_idx" ON "employees_employee" ("employee_id"); (params ())
CREATE INDEX "employees_e_departm_ac5287_idx" ON "employees_employee" ("department_id", "employment_status"); (params ())
CREATE INDEX "employees_e_reporti_f78896_idx" ON "employees_employee" ("reporting_manager_id"); (params ())
ALTER TABLE "employees_certification" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_certification" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_certification" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(255) NOT NULL, "issuing_organization" varchar(255) NOT NULL, "credential_id" varchar(100) NOT NULL, "credential_url" varchar(200) NOT NULL, "issue_date" date NOT NULL, "expiry_date" date NULL, "is_verified" bool NOT NULL, "verified_at" datetime NULL, "certificate_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_certification" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "issuing_organization", "credential_id", "credential_url", "issue_date", "expiry_date", "is_verified", "verified_at", "certificate_file", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "issuing_organization", "credential_id", "credential_url", "issue_date", "expiry_date", "is_verified", "verified_at", "certificate_file", "created_by_id", "deleted_by_id", NULL FROM "employees_certification"; (params ())
DROP TABLE "employees_certification"; (params ())
ALTER TABLE "new__employees_certification" RENAME TO "employees_certification"; (params ())
CREATE INDEX "employees_certification_created_at_b44a2569" ON "employees_certification" ("created_at"); (params ())
CREATE INDEX "employees_certification_is_deleted_96f9da1d" ON "employees_certification" ("is_deleted"); (params ())
CREATE INDEX "employees_certification_is_active_b0403af8" ON "employees_certification" ("is_active"); (params ())
CREATE INDEX "employees_certification_created_by_id_19651d25" ON "employees_certification" ("created_by_id"); (params ())
CREATE INDEX "employees_certification_deleted_by_id_3ceabaf6" ON "employees_certification" ("deleted_by_id"); (params ())
CREATE INDEX "employees_certification_employee_id_d87763ff" ON "employees_certification" ("employee_id"); (params ())
ALTER TABLE "employees_certification" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_certification" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_certification" ADD COLUMN "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_document" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_document" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_document" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "document_type" varchar(50) NOT NULL, "name" varchar(255) NOT NULL, "description" text NOT NULL, "file" varchar(100) NOT NULL, "file_size" integer unsigned NOT NULL CHECK ("file_size" >= 0), "file_type" varchar(50) NOT NULL, "is_verified" bool NOT NULL, "verified_at" datetime NULL, "expiry_date" date NULL, "is_confidential" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_document" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "document_type", "name", "description", "file", "file_size", "file_type", "is_verified", "verified_at", "expiry_date", "is_confidential", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "document_type", "name", "description", "file", "file_size", "file_type", "is_verified", "verified_at", "expiry_date", "is_confidential", "created_by_id", "deleted_by_id", NULL FROM "employees_document"; (params ())
DROP TABLE "employees_document"; (params ())
ALTER TABLE "new__employees_document" RENAME TO "employees_document"; (params ())
CREATE INDEX "employees_certification_organization_id_28f24eee" ON "employees_certification" ("organization_id"); (params ())
CREATE INDEX "employees_certification_updated_by_id_83cb2cd0" ON "employees_certification" ("updated_by_id"); (params ())
CREATE INDEX "employees_certification_verified_by_id_2eb3de43" ON "employees_certification" ("verified_by_id"); (params ())
CREATE INDEX "employees_document_created_at_2b80f384" ON "employees_document" ("created_at"); (params ())
CREATE INDEX "employees_document_is_deleted_f44b6088" ON "employees_document" ("is_deleted"); (params ())
CREATE INDEX "employees_document_is_active_fc442eee" ON "employees_document" ("is_active"); (params ())
CREATE INDEX "employees_document_created_by_id_01af20ac" ON "employees_document" ("created_by_id"); (params ())
CREATE INDEX "employees_document_deleted_by_id_df29e73d" ON "employees_document" ("deleted_by_id"); (params ())
CREATE INDEX "employees_document_employee_id_f26d1b57" ON "employees_document" ("employee_id"); (params ())
ALTER TABLE "employees_document" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_document" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_document" ADD COLUMN "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_emergencycontact" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_emergencycontact" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_emergencycontact" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "relationship" varchar(50) NOT NULL, "phone" varchar(15) NOT NULL, "alternate_phone" varchar(15) NOT NULL, "email" varchar(254) NOT NULL, "address" text NOT NULL, "is_primary" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_emergencycontact" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "relationship", "phone", "alternate_phone", "email", "address", "is_primary", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "relationship", "phone", "alternate_phone", "email", "address", "is_primary", "created_by_id", "deleted_by_id", NULL FROM "employees_emergencycontact"; (params ())
DROP TABLE "employees_emergencycontact"; (params ())
ALTER TABLE "new__employees_emergencycontact" RENAME TO "employees_emergencycontact"; (params ())
CREATE INDEX "employees_document_organization_id_e1d15b67" ON "employees_document" ("organization_id"); (params ())
CREATE INDEX "employees_document_updated_by_id_5848307d" ON "employees_document" ("updated_by_id"); (params ())
CREATE INDEX "employees_document_verified_by_id_c4a08298" ON "employees_document" ("verified_by_id"); (params ())
CREATE INDEX "employees_emergencycontact_created_at_58a5085d" ON "employees_emergencycontact" ("created_at"); (params ())
CREATE INDEX "employees_emergencycontact_is_deleted_c1e058fe" ON "employees_emergencycontact" ("is_deleted"); (params ())
CREATE INDEX "employees_emergencycontact_is_active_35a1b990" ON "employees_emergencycontact" ("is_active"); (params ())
CREATE INDEX "employees_emergencycontact_created_by_id_0fbc8206" ON "employees_emergencycontact" ("created_by_id"); (params ())
CREATE INDEX "employees_emergencycontact_deleted_by_id_b27be43b" ON "employees_emergencycontact" ("deleted_by_id"); (params ())
CREATE INDEX "employees_emergencycontact_employee_id_e77ac0fd" ON "employees_emergencycontact" ("employee_id"); (params ())
ALTER TABLE "employees_emergencycontact" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_emergencycontact" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeaddress" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeaddress" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeeaddress" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "address_type" varchar(20) NOT NULL, "address_line1" varchar(255) NOT NULL, "address_line2" varchar(255) NOT NULL, "city" varchar(100) NOT NULL, "state" varchar(100) NOT NULL, "country" varchar(100) NOT NULL, "postal_code" varchar(20) NOT NULL, "is_primary" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeeaddress" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "address_type", "address_line1", "address_line2", "city", "state", "country", "postal_code", "is_primary", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "address_type", "address_line1", "address_line2", "city", "state", "country", "postal_code", "is_primary", "created_by_id", "deleted_by_id", NULL FROM "employees_employeeaddress"; (params ())
DROP TABLE "employees_employeeaddress"; (params ())
ALTER TABLE "new__employees_employeeaddress" RENAME TO "employees_employeeaddress"; (params ())
CREATE INDEX "employees_emergencycontact_organization_id_3afa8860" ON "employees_emergencycontact" ("organization_id"); (params ())
CREATE INDEX "employees_emergencycontact_updated_by_id_211d6bbf" ON "employees_emergencycontact" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeeaddress_created_at_12fa6117" ON "employees_employeeaddress" ("created_at"); (params ())
CREATE INDEX "employees_employeeaddress_is_deleted_37252889" ON "employees_employeeaddress" ("is_deleted"); (params ())
CREATE INDEX "employees_employeeaddress_is_active_53ccade0" ON "employees_employeeaddress" ("is_active"); (params ())
CREATE INDEX "employees_employeeaddress_created_by_id_f97bf2b1" ON "employees_employeeaddress" ("created_by_id"); (params ())
CREATE INDEX "employees_employeeaddress_deleted_by_id_0f426bd8" ON "employees_employeeaddress" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeeaddress_employee_id_6c8b424d" ON "employees_employeeaddress" ("employee_id"); (params ())
ALTER TABLE "employees_employeeaddress" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeaddress" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeebankaccount" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeebankaccount" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeebankaccount" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "account_holder_name" varchar(100) NOT NULL, "bank_name" varchar(100) NOT NULL, "branch_name" varchar(100) NOT NULL, "account_number" varchar(255) NOT NULL, "ifsc_code" varchar(11) NOT NULL, "account_type" varchar(20) NOT NULL, "is_primary" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeebankaccount" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "account_holder_name", "bank_name", "branch_name", "account_number", "ifsc_code", "account_type", "is_primary", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "account_holder_name", "bank_name", "branch_name", "account_number", "ifsc_code", "account_type", "is_primary", "created_by_id", "deleted_by_id", NULL FROM "employees_employeebankaccount"; (params ())
DROP TABLE "employees_employeebankaccount"; (params ())
ALTER TABLE "new__employees_employeebankaccount" RENAME TO "employees_employeebankaccount"; (params ())
CREATE INDEX "employees_employeeaddress_organization_id_18822ffa" ON "employees_employeeaddress" ("organization_id"); (params ())
CREATE INDEX "employees_employeeaddress_updated_by_id_de1ab4eb" ON "employees_employeeaddress" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeebankaccount_created_at_e1ef1601" ON "employees_employeebankaccount" ("created_at"); (params ())
CREATE INDEX "employees_employeebankaccount_is_deleted_a1e38974" ON "employees_employeebankaccount" ("is_deleted"); (params ())
CREATE INDEX "employees_employeebankaccount_is_active_afbf3048" ON "employees_employeebankaccount" ("is_active"); (params ())
CREATE INDEX "employees_employeebankaccount_created_by_id_bbe2a8f8" ON "employees_employeebankaccount" ("created_by_id"); (params ())
CREATE INDEX "employees_employeebankaccount_deleted_by_id_6245811d" ON "employees_employeebankaccount" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeebankaccount_employee_id_9a587768" ON "employees_employeebankaccount" ("employee_id"); (params ())
ALTER TABLE "employees_employeebankaccount" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeebankaccount" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeedependent" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeedependent" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeedependent" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "relationship" varchar(50) NOT NULL, "date_of_birth" date NULL, "gender" varchar(10) NOT NULL, "is_covered_in_insurance" bool NOT NULL, "is_disabled" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeedependent" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "relationship", "date_of_birth", "gender", "is_covered_in_insurance", "is_disabled", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "relationship", "date_of_birth", "gender", "is_covered_in_insurance", "is_disabled", "created_by_id", "deleted_by_id", NULL FROM "employees_employeedependent"; (params ())
DROP TABLE "employees_employeedependent"; (params ())
ALTER TABLE "new__employees_employeedependent" RENAME TO "employees_employeedependent"; (params ())
CREATE INDEX "employees_employeebankaccount_organization_id_166a4f53" ON "employees_employeebankaccount" ("organization_id"); (params ())
CREATE INDEX "employees_employeebankaccount_updated_by_id_0cdf4c6a" ON "employees_employeebankaccount" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeedependent_created_at_9b0f0d43" ON "employees_employeedependent" ("created_at"); (params ())
CREATE INDEX "employees_employeedependent_is_deleted_cf85a176" ON "employees_employeedependent" ("is_deleted"); (params ())
CREATE INDEX "employees_employeedependent_is_active_d1219310" ON "employees_employeedependent" ("is_active"); (params ())
CREATE INDEX "employees_employeedependent_created_by_id_07c697bb" ON "employees_employeedependent" ("created_by_id"); (params ())
CREATE INDEX "employees_employeedependent_deleted_by_id_99e6916c" ON "employees_employeedependent" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeedependent_employee_id_4c4124a1" ON "employees_employeedependent" ("employee_id"); (params ())
ALTER TABLE "employees_employeedependent" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeedependent" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeepromotion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "current_ctc" decimal NULL, "new_ctc" decimal NULL, "increment_percentage" decimal NULL, "requested_date" date NOT NULL, "effective_date" date NOT NULL, "reason" text NOT NULL, "achievements" text NOT NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeepromotion" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "current_ctc", "new_ctc", "increment_percentage", "requested_date", "effective_date", "reason", "achievements", "status", "approved_at", "rejection_reason", "approved_by_id", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "current_ctc", "new_ctc", "increment_percentage", "requested_date", "effective_date", "reason", "achievements", "status", "approved_at", "rejection_reason", "approved_by_id", "created_by_id", "deleted_by_id", NULL FROM "employees_employeepromotion"; (params ())
DROP TABLE "employees_employeepromotion"; (params ())
ALTER TABLE "new__employees_employeepromotion" RENAME TO "employees_employeepromotion"; (params ())
CREATE INDEX "employees_employeedependent_organization_id_233f77da" ON "employees_employeedependent" ("organization_id"); (params ())
CREATE INDEX "employees_employeedependent_updated_by_id_97d38369" ON "employees_employeedependent" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeepromotion_created_at_8c59a5c0" ON "employees_employeepromotion" ("created_at"); (params ())
CREATE INDEX "employees_employeepromotion_is_deleted_e0e27c98" ON "employees_employeepromotion" ("is_deleted"); (params ())
CREATE INDEX "employees_employeepromotion_is_active_a31f5a1f" ON "employees_employeepromotion" ("is_active"); (params ())
CREATE INDEX "employees_employeepromotion_approved_by_id_0b03c35a" ON "employees_employeepromotion" ("approved_by_id"); (params ())
CREATE INDEX "employees_employeepromotion_created_by_id_d5322810" ON "employees_employeepromotion" ("created_by_id"); (params ())
CREATE INDEX "employees_employeepromotion_deleted_by_id_1715fd0b" ON "employees_employeepromotion" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeepromotion_employee_id_081b1835" ON "employees_employeepromotion" ("employee_id"); (params ())
ALTER TABLE "employees_employeepromotion" ADD COLUMN "from_designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "recommended_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "to_designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeepromotion" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeskill" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeskill" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeeskill" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "proficiency" varchar(20) NOT NULL, "years_of_experience" decimal NULL, "is_primary" bool NOT NULL, "is_verified" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeeskill" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "proficiency", "years_of_experience", "is_primary", "is_verified", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "proficiency", "years_of_experience", "is_primary", "is_verified", "created_by_id", "deleted_by_id", NULL FROM "employees_employeeskill"; (params ())
DROP TABLE "employees_employeeskill"; (params ())
ALTER TABLE "new__employees_employeeskill" RENAME TO "employees_employeeskill"; (params ())
CREATE INDEX "employees_employeepromotion_from_designation_id_97dc0750" ON "employees_employeepromotion" ("from_designation_id"); (params ())
CREATE INDEX "employees_employeepromotion_organization_id_0b157eea" ON "employees_employeepromotion" ("organization_id"); (params ())
CREATE INDEX "employees_employeepromotion_recommended_by_id_7e0d2a2c" ON "employees_employeepromotion" ("recommended_by_id"); (params ())
CREATE INDEX "employees_employeepromotion_to_designation_id_7ec3a598" ON "employees_employeepromotion" ("to_designation_id"); (params ())
CREATE INDEX "employees_employeepromotion_updated_by_id_b60f7a2b" ON "employees_employeepromotion" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeeskill_created_at_cfe29fb7" ON "employees_employeeskill" ("created_at"); (params ())
CREATE INDEX "employees_employeeskill_is_deleted_26808811" ON "employees_employeeskill" ("is_deleted"); (params ())
CREATE INDEX "employees_employeeskill_is_active_561d94f8" ON "employees_employeeskill" ("is_active"); (params ())
CREATE INDEX "employees_employeeskill_created_by_id_0916bc30" ON "employees_employeeskill" ("created_by_id"); (params ())
CREATE INDEX "employees_employeeskill_deleted_by_id_49443370" ON "employees_employeeskill" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeeskill_employee_id_40b8e985" ON "employees_employeeskill" ("employee_id"); (params ())
ALTER TABLE "employees_employeeskill" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeskill" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeeskill" ADD COLUMN "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeetransfer" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "transfer_type" varchar(20) NOT NULL, "requested_date" date NOT NULL, "effective_date" date NOT NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeetransfer" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "transfer_type", "requested_date", "effective_date", "reason", "status", "approved_at", "rejection_reason", "approved_by_id", "created_by_id", "deleted_by_id", "department_id", "designation_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "transfer_type", "requested_date", "effective_date", "reason", "status", "approved_at", "rejection_reason", "approved_by_id", "created_by_id", "deleted_by_id", "department_id", "designation_id", NULL FROM "employees_employeetransfer"; (params ())
DROP TABLE "employees_employeetransfer"; (params ())
ALTER TABLE "new__employees_employeetransfer" RENAME TO "employees_employeetransfer"; (params ())
CREATE INDEX "employees_employeeskill_organization_id_ef4be2f6" ON "employees_employeeskill" ("organization_id"); (params ())
CREATE INDEX "employees_employeeskill_updated_by_id_c542c346" ON "employees_employeeskill" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeeskill_verified_by_id_3cbe79fd" ON "employees_employeeskill" ("verified_by_id"); (params ())
CREATE INDEX "employees_employeetransfer_created_at_5269b657" ON "employees_employeetransfer" ("created_at"); (params ())
CREATE INDEX "employees_employeetransfer_is_deleted_393a8e63" ON "employees_employeetransfer" ("is_deleted"); (params ())
CREATE INDEX "employees_employeetransfer_is_active_21983470" ON "employees_employeetransfer" ("is_active"); (params ())
CREATE INDEX "employees_employeetransfer_approved_by_id_2383bc7b" ON "employees_employeetransfer" ("approved_by_id"); (params ())
CREATE INDEX "employees_employeetransfer_created_by_id_9dd1f599" ON "employees_employeetransfer" ("created_by_id"); (params ())
CREATE INDEX "employees_employeetransfer_deleted_by_id_d2402074" ON "employees_employeetransfer" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeetransfer_department_id_999808bb" ON "employees_employeetransfer" ("department_id"); (params ())
CREATE INDEX "employees_employeetransfer_designation_id_11b763a7" ON "employees_employeetransfer" ("designation_id"); (params ())
CREATE INDEX "employees_employeetransfer_employee_id_defdeee9" ON "employees_employeetransfer" ("employee_id"); (params ())
ALTER TABLE "employees_employeetransfer" ADD COLUMN "initiated_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "to_department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "to_location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "to_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employeetransfer" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employmenthistory" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "change_type" varchar(30) NOT NULL, "effective_date" date NOT NULL, "remarks" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employmenthistory" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "change_type", "effective_date", "remarks", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "change_type", "effective_date", "remarks", "created_by_id", "deleted_by_id", NULL FROM "employees_employmenthistory"; (params ())
DROP TABLE "employees_employmenthistory"; (params ())
ALTER TABLE "new__employees_employmenthistory" RENAME TO "employees_employmenthistory"; (params ())
CREATE INDEX "employees_employeetransfer_initiated_by_id_969aa66a" ON "employees_employeetransfer" ("initiated_by_id"); (params ())
CREATE INDEX "employees_employeetransfer_location_id_c9ecac2f" ON "employees_employeetransfer" ("location_id"); (params ())
CREATE INDEX "employees_employeetransfer_organization_id_d5de6a6b" ON "employees_employeetransfer" ("organization_id"); (params ())
CREATE INDEX "employees_employeetransfer_to_department_id_aba19f1d" ON "employees_employeetransfer" ("to_department_id"); (params ())
CREATE INDEX "employees_employeetransfer_to_location_id_4204e3c3" ON "employees_employeetransfer" ("to_location_id"); (params ())
CREATE INDEX "employees_employeetransfer_to_manager_id_5e3e7392" ON "employees_employeetransfer" ("to_manager_id"); (params ())
CREATE INDEX "employees_employeetransfer_updated_by_id_75083448" ON "employees_employeetransfer" ("updated_by_id"); (params ())
CREATE INDEX "employees_employmenthistory_created_at_cad65a1e" ON "employees_employmenthistory" ("created_at"); (params ())
CREATE INDEX "employees_employmenthistory_is_deleted_eec0ebe8" ON "employees_employmenthistory" ("is_deleted"); (params ())
CREATE INDEX "employees_employmenthistory_is_active_ba07b103" ON "employees_employmenthistory" ("is_active"); (params ())
CREATE INDEX "employees_employmenthistory_created_by_id_7d12bd34" ON "employees_employmenthistory" ("created_by_id"); (params ())
CREATE INDEX "employees_employmenthistory_deleted_by_id_e842e7d3" ON "employees_employmenthistory" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employmenthistory_employee_id_b1ba0659" ON "employees_employmenthistory" ("employee_id"); (params ())
ALTER TABLE "employees_employmenthistory" ADD COLUMN "new_department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "new_designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "new_location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "new_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "previous_department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "previous_designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "previous_location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "previous_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_employmenthistory" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_exitinterview" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_exitinterview" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_exitinterview" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "interview_date" date NOT NULL, "job_satisfaction" smallint unsigned NULL CHECK ("job_satisfaction" >= 0), "work_life_balance" smallint unsigned NULL CHECK ("work_life_balance" >= 0), "management_support" smallint unsigned NULL CHECK ("management_support" >= 0), "growth_opportunities" smallint unsigned NULL CHECK ("growth_opportunities" >= 0), "compensation_satisfaction" smallint unsigned NULL CHECK ("compensation_satisfaction" >= 0), "work_environment" smallint unsigned NULL CHECK ("work_environment" >= 0), "team_collaboration" smallint unsigned NULL CHECK ("team_collaboration" >= 0), "reason_for_leaving" text NOT NULL, "liked_most" text NOT NULL, "improvements_suggested" text NOT NULL, "would_recommend" bool NULL, "would_return" bool NULL, "additional_feedback" text NOT NULL CHECK ((JSON_VALID("additional_feedback") OR "additional_feedback" IS NULL)), "is_completed" bool NOT NULL, "completed_at" datetime NULL, "is_confidential" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_exitinterview" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "interview_date", "job_satisfaction", "work_life_balance", "management_support", "growth_opportunities", "compensation_satisfaction", "work_environment", "team_collaboration", "reason_for_leaving", "liked_most", "improvements_suggested", "would_recommend", "would_return", "additional_feedback", "is_completed", "completed_at", "is_confidential", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "interview_date", "job_satisfaction", "work_life_balance", "management_support", "growth_opportunities", "compensation_satisfaction", "work_environment", "team_collaboration", "reason_for_leaving", "liked_most", "improvements_suggested", "would_recommend", "would_return", "additional_feedback", "is_completed", "completed_at", "is_confidential", "created_by_id", "deleted_by_id", NULL FROM "employees_exitinterview"; (params ())
DROP TABLE "employees_exitinterview"; (params ())
ALTER TABLE "new__employees_exitinterview" RENAME TO "employees_exitinterview"; (params ())
CREATE INDEX "employees_employmenthistory_new_department_id_160e4a2d" ON "employees_employmenthistory" ("new_department_id"); (params ())
CREATE INDEX "employees_employmenthistory_new_designation_id_e20f8a35" ON "employees_employmenthistory" ("new_designation_id"); (params ())
CREATE INDEX "employees_employmenthistory_new_location_id_7e1821c9" ON "employees_employmenthistory" ("new_location_id"); (params ())
CREATE INDEX "employees_employmenthistory_new_manager_id_b085e300" ON "employees_employmenthistory" ("new_manager_id"); (params ())
CREATE INDEX "employees_employmenthistory_organization_id_a2fc524c" ON "employees_employmenthistory" ("organization_id"); (params ())
CREATE INDEX "employees_employmenthistory_previous_department_id_8bce54d0" ON "employees_employmenthistory" ("previous_department_id"); (params ())
CREATE INDEX "employees_employmenthistory_previous_designation_id_b1f01014" ON "employees_employmenthistory" ("previous_designation_id"); (params ())
CREATE INDEX "employees_employmenthistory_previous_location_id_5cb91a6a" ON "employees_employmenthistory" ("previous_location_id"); (params ())
CREATE INDEX "employees_employmenthistory_previous_manager_id_62a825be" ON "employees_employmenthistory" ("previous_manager_id"); (params ())
CREATE INDEX "employees_employmenthistory_updated_by_id_650fd0a7" ON "employees_employmenthistory" ("updated_by_id"); (params ())
CREATE INDEX "employees_exitinterview_created_at_44efe227" ON "employees_exitinterview" ("created_at"); (params ())
CREATE INDEX "employees_exitinterview_is_deleted_5627665b" ON "employees_exitinterview" ("is_deleted"); (params ())
CREATE INDEX "employees_exitinterview_is_active_dc7e359c" ON "employees_exitinterview" ("is_active"); (params ())
CREATE INDEX "employees_exitinterview_created_by_id_b96a5c63" ON "employees_exitinterview" ("created_by_id"); (params ())
CREATE INDEX "employees_exitinterview_deleted_by_id_08779026" ON "employees_exitinterview" ("deleted_by_id"); (params ())
CREATE INDEX "employees_exitinterview_employee_id_b3f5bce7" ON "employees_exitinterview" ("employee_id"); (params ())
ALTER TABLE "employees_exitinterview" ADD COLUMN "interviewer_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_exitinterview" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_exitinterview" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_resignationrequest" ADD COLUMN "accepted_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_resignationrequest" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_resignationrequest" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_resignationrequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "resignation_date" date NOT NULL, "requested_last_working_date" date NOT NULL, "approved_last_working_date" date NULL, "notice_period_days" smallint unsigned NOT NULL CHECK ("notice_period_days" >= 0), "notice_period_waived" smallint unsigned NOT NULL CHECK ("notice_period_waived" >= 0), "shortfall_recovery" bool NOT NULL, "primary_reason" varchar(30) NOT NULL, "detailed_reason" text NOT NULL, "new_employer" varchar(200) NOT NULL, "status" varchar(20) NOT NULL, "accepted_at" datetime NULL, "rejection_reason" text NOT NULL, "exit_checklist_complete" bool NOT NULL, "fnf_processed" bool NOT NULL, "accepted_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_resignationrequest" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "resignation_date", "requested_last_working_date", "approved_last_working_date", "notice_period_days", "notice_period_waived", "shortfall_recovery", "primary_reason", "detailed_reason", "new_employer", "status", "accepted_at", "rejection_reason", "exit_checklist_complete", "fnf_processed", "accepted_by_id", "created_by_id", "deleted_by_id", "employee_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "resignation_date", "requested_last_working_date", "approved_last_working_date", "notice_period_days", "notice_period_waived", "shortfall_recovery", "primary_reason", "detailed_reason", "new_employer", "status", "accepted_at", "rejection_reason", "exit_checklist_complete", "fnf_processed", "accepted_by_id", "created_by_id", "deleted_by_id", NULL FROM "employees_resignationrequest"; (params ())
DROP TABLE "employees_resignationrequest"; (params ())
ALTER TABLE "new__employees_resignationrequest" RENAME TO "employees_resignationrequest"; (params ())
CREATE INDEX "employees_exitinterview_interviewer_id_6990d90f" ON "employees_exitinterview" ("interviewer_id"); (params ())
CREATE INDEX "employees_exitinterview_organization_id_ae81b2e9" ON "employees_exitinterview" ("organization_id"); (params ())
CREATE INDEX "employees_exitinterview_updated_by_id_4648537f" ON "employees_exitinterview" ("updated_by_id"); (params ())
CREATE INDEX "employees_resignationrequest_created_at_51b49e0b" ON "employees_resignationrequest" ("created_at"); (params ())
CREATE INDEX "employees_resignationrequest_is_deleted_4a97d4e2" ON "employees_resignationrequest" ("is_deleted"); (params ())
CREATE INDEX "employees_resignationrequest_is_active_9766e5ee" ON "employees_resignationrequest" ("is_active"); (params ())
CREATE INDEX "employees_resignationrequest_accepted_by_id_2c7887e3" ON "employees_resignationrequest" ("accepted_by_id"); (params ())
CREATE INDEX "employees_resignationrequest_created_by_id_81b05bdd" ON "employees_resignationrequest" ("created_by_id"); (params ())
CREATE INDEX "employees_resignationrequest_deleted_by_id_32993a9b" ON "employees_resignationrequest" ("deleted_by_id"); (params ())
CREATE INDEX "employees_resignationrequest_employee_id_e3885699" ON "employees_resignationrequest" ("employee_id"); (params ())
ALTER TABLE "employees_resignationrequest" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_resignationrequest" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_exitinterview" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "interview_date" date NOT NULL, "job_satisfaction" smallint unsigned NULL CHECK ("job_satisfaction" >= 0), "work_life_balance" smallint unsigned NULL CHECK ("work_life_balance" >= 0), "management_support" smallint unsigned NULL CHECK ("management_support" >= 0), "growth_opportunities" smallint unsigned NULL CHECK ("growth_opportunities" >= 0), "compensation_satisfaction" smallint unsigned NULL CHECK ("compensation_satisfaction" >= 0), "work_environment" smallint unsigned NULL CHECK ("work_environment" >= 0), "team_collaboration" smallint unsigned NULL CHECK ("team_collaboration" >= 0), "reason_for_leaving" text NOT NULL, "liked_most" text NOT NULL, "improvements_suggested" text NOT NULL, "would_recommend" bool NULL, "would_return" bool NULL, "additional_feedback" text NOT NULL CHECK ((JSON_VALID("additional_feedback") OR "additional_feedback" IS NULL)), "is_completed" bool NOT NULL, "completed_at" datetime NULL, "is_confidential" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "interviewer_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "resignation_id" char(32) NOT NULL UNIQUE REFERENCES "employees_resignationrequest" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_exitinterview" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "interview_date", "job_satisfaction", "work_life_balance", "management_support", "growth_opportunities", "compensation_satisfaction", "work_environment", "team_collaboration", "reason_for_leaving", "liked_most", "improvements_suggested", "would_recommend", "would_return", "additional_feedback", "is_completed", "completed_at", "is_confidential", "created_by_id", "deleted_by_id", "employee_id", "interviewer_id", "organization_id", "updated_by_id", "resignation_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "interview_date", "job_satisfaction", "work_life_balance", "management_support", "growth_opportunities", "compensation_satisfaction", "work_environment", "team_collaboration", "reason_for_leaving", "liked_most", "improvements_suggested", "would_recommend", "would_return", "additional_feedback", "is_completed", "completed_at", "is_confidential", "created_by_id", "deleted_by_id", "employee_id", "interviewer_id", "organization_id", "updated_by_id", NULL FROM "employees_exitinterview"; (params ())
DROP TABLE "employees_exitinterview"; (params ())
ALTER TABLE "new__employees_exitinterview" RENAME TO "employees_exitinterview"; (params ())
CREATE INDEX "employees_resignationrequest_organization_id_354397bd" ON "employees_resignationrequest" ("organization_id"); (params ())
CREATE INDEX "employees_resignationrequest_updated_by_id_ba6fff2b" ON "employees_resignationrequest" ("updated_by_id"); (params ())
CREATE INDEX "employees_exitinterview_created_at_44efe227" ON "employees_exitinterview" ("created_at"); (params ())
CREATE INDEX "employees_exitinterview_is_deleted_5627665b" ON "employees_exitinterview" ("is_deleted"); (params ())
CREATE INDEX "employees_exitinterview_is_active_dc7e359c" ON "employees_exitinterview" ("is_active"); (params ())
CREATE INDEX "employees_exitinterview_created_by_id_b96a5c63" ON "employees_exitinterview" ("created_by_id"); (params ())
CREATE INDEX "employees_exitinterview_deleted_by_id_08779026" ON "employees_exitinterview" ("deleted_by_id"); (params ())
CREATE INDEX "employees_exitinterview_employee_id_b3f5bce7" ON "employees_exitinterview" ("employee_id"); (params ())
CREATE INDEX "employees_exitinterview_interviewer_id_6990d90f" ON "employees_exitinterview" ("interviewer_id"); (params ())
CREATE INDEX "employees_exitinterview_organization_id_ae81b2e9" ON "employees_exitinterview" ("organization_id"); (params ())
CREATE INDEX "employees_exitinterview_updated_by_id_4648537f" ON "employees_exitinterview" ("updated_by_id"); (params ())
ALTER TABLE "employees_separationchecklist" ADD COLUMN "assigned_to_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_separationchecklist" ADD COLUMN "completed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_separationchecklist" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_separationchecklist" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_separationchecklist" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_separationchecklist" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "task_name" varchar(200) NOT NULL, "description" text NOT NULL, "assigned_to_department" varchar(50) NOT NULL, "due_date" date NULL, "is_completed" bool NOT NULL, "completed_at" datetime NULL, "notes" text NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0), "assigned_to_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "completed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "resignation_id" char(32) NOT NULL REFERENCES "employees_resignationrequest" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_separationchecklist" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "task_name", "description", "assigned_to_department", "due_date", "is_completed", "completed_at", "notes", "order", "assigned_to_id", "completed_by_id", "created_by_id", "deleted_by_id", "organization_id", "resignation_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "task_name", "description", "assigned_to_department", "due_date", "is_completed", "completed_at", "notes", "order", "assigned_to_id", "completed_by_id", "created_by_id", "deleted_by_id", "organization_id", NULL FROM "employees_separationchecklist"; (params ())
DROP TABLE "employees_separationchecklist"; (params ())
ALTER TABLE "new__employees_separationchecklist" RENAME TO "employees_separationchecklist"; (params ())
CREATE INDEX "employees_separationchecklist_created_at_05c47da9" ON "employees_separationchecklist" ("created_at"); (params ())
CREATE INDEX "employees_separationchecklist_is_deleted_4a84df03" ON "employees_separationchecklist" ("is_deleted"); (params ())
CREATE INDEX "employees_separationchecklist_is_active_2fee3d57" ON "employees_separationchecklist" ("is_active"); (params ())
CREATE INDEX "employees_separationchecklist_assigned_to_id_b026c468" ON "employees_separationchecklist" ("assigned_to_id"); (params ())
CREATE INDEX "employees_separationchecklist_completed_by_id_6733b24d" ON "employees_separationchecklist" ("completed_by_id"); (params ())
CREATE INDEX "employees_separationchecklist_created_by_id_30e0f1da" ON "employees_separationchecklist" ("created_by_id"); (params ())
CREATE INDEX "employees_separationchecklist_deleted_by_id_46da25d1" ON "employees_separationchecklist" ("deleted_by_id"); (params ())
CREATE INDEX "employees_separationchecklist_organization_id_195e6caf" ON "employees_separationchecklist" ("organization_id"); (params ())
CREATE INDEX "employees_separationchecklist_resignation_id_e0822c29" ON "employees_separationchecklist" ("resignation_id"); (params ())
ALTER TABLE "employees_separationchecklist" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_skill" ADD COLUMN "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_skill" ADD COLUMN "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_skill" ADD COLUMN "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
ALTER TABLE "employees_skill" ADD COLUMN "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE TABLE "new__employees_employeeskill" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "proficiency" varchar(20) NOT NULL, "years_of_experience" decimal NULL, "is_primary" bool NOT NULL, "is_verified" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "skill_id" char(32) NOT NULL REFERENCES "employees_skill" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__employees_employeeskill" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "proficiency", "years_of_experience", "is_primary", "is_verified", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "verified_by_id", "skill_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "proficiency", "years_of_experience", "is_primary", "is_verified", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "verified_by_id", NULL FROM "employees_employeeskill"; (params ())
DROP TABLE "employees_employeeskill"; (params ())
ALTER TABLE "new__employees_employeeskill" RENAME TO "employees_employeeskill"; (params ())
CREATE INDEX "employees_separationchecklist_updated_by_id_3bc963dc" ON "employees_separationchecklist" ("updated_by_id"); (params ())
CREATE INDEX "employees_skill_created_by_id_003efe68" ON "employees_skill" ("created_by_id"); (params ())
CREATE INDEX "employees_skill_deleted_by_id_7f1dc9e8" ON "employees_skill" ("deleted_by_id"); (params ())
CREATE INDEX "employees_skill_organization_id_4ae98488" ON "employees_skill" ("organization_id"); (params ())
CREATE INDEX "employees_skill_updated_by_id_aaa9c665" ON "employees_skill" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeeskill_created_at_cfe29fb7" ON "employees_employeeskill" ("created_at"); (params ())
CREATE INDEX "employees_employeeskill_is_deleted_26808811" ON "employees_employeeskill" ("is_deleted"); (params ())
CREATE INDEX "employees_employeeskill_is_active_561d94f8" ON "employees_employeeskill" ("is_active"); (params ())
CREATE INDEX "employees_employeeskill_created_by_id_0916bc30" ON "employees_employeeskill" ("created_by_id"); (params ())
CREATE INDEX "employees_employeeskill_deleted_by_id_49443370" ON "employees_employeeskill" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeeskill_employee_id_40b8e985" ON "employees_employeeskill" ("employee_id"); (params ())
CREATE INDEX "employees_employeeskill_organization_id_ef4be2f6" ON "employees_employeeskill" ("organization_id"); (params ())
CREATE INDEX "employees_employeeskill_updated_by_id_c542c346" ON "employees_employeeskill" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeeskill_verified_by_id_3cbe79fd" ON "employees_employeeskill" ("verified_by_id"); (params ())
CREATE INDEX "employees_employeeskill_skill_id_7f9beaf8" ON "employees_employeeskill" ("skill_id"); (params ())
CREATE TABLE "new__employees_employeeskill" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "proficiency" varchar(20) NOT NULL, "years_of_experience" decimal NULL, "is_primary" bool NOT NULL, "is_verified" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "skill_id" char(32) NOT NULL REFERENCES "employees_skill" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_employee_skill" UNIQUE ("employee_id", "skill_id")); (params None)
INSERT INTO "new__employees_employeeskill" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "proficiency", "years_of_experience", "is_primary", "is_verified", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "verified_by_id", "skill_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "proficiency", "years_of_experience", "is_primary", "is_verified", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "verified_by_id", "skill_id" FROM "employees_employeeskill"; (params ())
DROP TABLE "employees_employeeskill"; (params ())
ALTER TABLE "new__employees_employeeskill" RENAME TO "employees_employeeskill"; (params ())
CREATE INDEX "employees_employeeskill_created_at_cfe29fb7" ON "employees_employeeskill" ("created_at"); (params ())
CREATE INDEX "employees_employeeskill_is_deleted_26808811" ON "employees_employeeskill" ("is_deleted"); (params ())
CREATE INDEX "employees_employeeskill_is_active_561d94f8" ON "employees_employeeskill" ("is_active"); (params ())
CREATE INDEX "employees_employeeskill_created_by_id_0916bc30" ON "employees_employeeskill" ("created_by_id"); (params ())
CREATE INDEX "employees_employeeskill_deleted_by_id_49443370" ON "employees_employeeskill" ("deleted_by_id"); (params ())
CREATE INDEX "employees_employeeskill_employee_id_40b8e985" ON "employees_employeeskill" ("employee_id"); (params ())
CREATE INDEX "employees_employeeskill_organization_id_ef4be2f6" ON "employees_employeeskill" ("organization_id"); (params ())
CREATE INDEX "employees_employeeskill_updated_by_id_c542c346" ON "employees_employeeskill" ("updated_by_id"); (params ())
CREATE INDEX "employees_employeeskill_verified_by_id_3cbe79fd" ON "employees_employeeskill" ("verified_by_id"); (params ())
CREATE INDEX "employees_employeeskill_skill_id_7f9beaf8" ON "employees_employeeskill" ("skill_id"); (params ())
CREATE UNIQUE INDEX "employees_employeeskill_employee_id_skill_id_2c0bbf27_uniq" ON "employees_employeeskill" ("employee_id", "skill_id"); (params ())
CREATE TABLE "compliance_auditexportrequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "filters" text NOT NULL CHECK ((JSON_VALID("filters") OR "filters" IS NULL)), "status" varchar(20) NOT NULL, "file" varchar(100) NULL, "row_count" integer unsigned NULL CHECK ("row_count" >= 0), "started_at" datetime NULL, "completed_at" datetime NULL, "error_message" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "requested_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "compliance_dataretentionpolicy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "entity_type" varchar(50) NOT NULL, "retention_days" integer unsigned NOT NULL CHECK ("retention_days" >= 0), "action" varchar(20) NOT NULL, "date_field" varchar(50) NOT NULL, "filter_criteria" text NOT NULL CHECK ((JSON_VALID("filter_criteria") OR "filter_criteria" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "compliance_datasubjectrequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "request_type" varchar(20) NOT NULL, "status" varchar(20) NOT NULL, "details" text NOT NULL, "due_date" date NULL, "processed_at" datetime NULL, "response_file" varchar(100) NULL, "notes" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "processed_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "requested_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "compliance_legalhold" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "description" text NOT NULL, "start_date" date NOT NULL, "end_date" date NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "compliance_legalhold_employees" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "legalhold_id" char(32) NOT NULL REFERENCES "compliance_legalhold" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "compliance_retentionexecution" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "status" varchar(20) NOT NULL, "dry_run" bool NOT NULL, "started_at" datetime NULL, "completed_at" datetime NULL, "affected_count" integer unsigned NOT NULL CHECK ("affected_count" >= 0), "details" text NOT NULL CHECK ((JSON_VALID("details") OR "details" IS NULL)), "error_message" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "policy_id" char(32) NOT NULL REFERENCES "compliance_dataretentionpolicy" ("id") DEFERRABLE INITIALLY DEFERRED, "requested_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "compliance_consentrecord" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "consent_type" varchar(50) NOT NULL, "granted" bool NOT NULL, "granted_at" datetime NULL, "revoked_at" datetime NULL, "ip_address" char(39) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "compliance__organiz_d132b9_idx" ON "compliance_dataretentionpolicy" ("organization_id", "created_at"); (params None)
CREATE INDEX "compliance__organiz_53e941_idx" ON "compliance_legalhold" ("organization_id", "created_at"); (params None)
CREATE INDEX "compliance_auditexportrequest_created_at_1c63340c" ON "compliance_auditexportrequest" ("created_at"); (params ())
CREATE INDEX "compliance_auditexportrequest_is_deleted_feda5f63" ON "compliance_auditexportrequest" ("is_deleted"); (params ())
CREATE INDEX "compliance_auditexportrequest_is_active_2aab5443" ON "compliance_auditexportrequest" ("is_active"); (params ())
CREATE INDEX "compliance_auditexportrequest_created_by_id_9b3fa648" ON "compliance_auditexportrequest" ("created_by_id"); (params ())
CREATE INDEX "compliance_auditexportrequest_deleted_by_id_c74ce19d" ON "compliance_auditexportrequest" ("deleted_by_id"); (params ())
CREATE INDEX "compliance_auditexportrequest_organization_id_216dfab9" ON "compliance_auditexportrequest" ("organization_id"); (params ())
CREATE INDEX "compliance_auditexportrequest_requested_by_id_51873160" ON "compliance_auditexportrequest" ("requested_by_id"); (params ())
CREATE INDEX "compliance_auditexportrequest_updated_by_id_83f649c1" ON "compliance_auditexportrequest" ("updated_by_id"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_created_at_469e6167" ON "compliance_dataretentionpolicy" ("created_at"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_is_deleted_d81293c7" ON "compliance_dataretentionpolicy" ("is_deleted"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_is_active_5747802b" ON "compliance_dataretentionpolicy" ("is_active"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_created_by_id_a8bc5e4c" ON "compliance_dataretentionpolicy" ("created_by_id"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_deleted_by_id_65f4b0ed" ON "compliance_dataretentionpolicy" ("deleted_by_id"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_organization_id_292bb224" ON "compliance_dataretentionpolicy" ("organization_id"); (params ())
CREATE INDEX "compliance_dataretentionpolicy_updated_by_id_bc2c3b98" ON "compliance_dataretentionpolicy" ("updated_by_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_created_at_33373e72" ON "compliance_datasubjectrequest" ("created_at"); (params ())
CREATE INDEX "compliance_datasubjectrequest_is_deleted_f4a70ba8" ON "compliance_datasubjectrequest" ("is_deleted"); (params ())
CREATE INDEX "compliance_datasubjectrequest_is_active_4df040a1" ON "compliance_datasubjectrequest" ("is_active"); (params ())
CREATE INDEX "compliance_datasubjectrequest_created_by_id_6320c5ab" ON "compliance_datasubjectrequest" ("created_by_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_deleted_by_id_fdf89547" ON "compliance_datasubjectrequest" ("deleted_by_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_employee_id_455b9e6d" ON "compliance_datasubjectrequest" ("employee_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_organization_id_f018f4cd" ON "compliance_datasubjectrequest" ("organization_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_processed_by_id_15e17bd9" ON "compliance_datasubjectrequest" ("processed_by_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_requested_by_id_0aa80d6d" ON "compliance_datasubjectrequest" ("requested_by_id"); (params ())
CREATE INDEX "compliance_datasubjectrequest_updated_by_id_8f146649" ON "compliance_datasubjectrequest" ("updated_by_id"); (params ())
CREATE INDEX "compliance_legalhold_created_at_4fc15c91" ON "compliance_legalhold" ("created_at"); (params ())
CREATE INDEX "compliance_legalhold_is_deleted_3fededdf" ON "compliance_legalhold" ("is_deleted"); (params ())
CREATE INDEX "compliance_legalhold_is_active_f53c7139" ON "compliance_legalhold" ("is_active"); (params ())
CREATE INDEX "compliance_legalhold_created_by_id_8122e4e7" ON "compliance_legalhold" ("created_by_id"); (params ())
CREATE INDEX "compliance_legalhold_deleted_by_id_dff75a62" ON "compliance_legalhold" ("deleted_by_id"); (params ())
CREATE INDEX "compliance_legalhold_organization_id_ad1d7d00" ON "compliance_legalhold" ("organization_id"); (params ())
CREATE INDEX "compliance_legalhold_updated_by_id_80956a88" ON "compliance_legalhold" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "compliance_legalhold_employees_legalhold_id_employee_id_dcae1ff4_uniq" ON "compliance_legalhold_employees" ("legalhold_id", "employee_id"); (params ())
CREATE INDEX "compliance_legalhold_employees_legalhold_id_7a1de9bc" ON "compliance_legalhold_employees" ("legalhold_id"); (params ())
CREATE INDEX "compliance_legalhold_employees_employee_id_12261aa5" ON "compliance_legalhold_employees" ("employee_id"); (params ())
CREATE INDEX "compliance_retentionexecution_created_at_687398a7" ON "compliance_retentionexecution" ("created_at"); (params ())
CREATE INDEX "compliance_retentionexecution_is_deleted_7ada6e99" ON "compliance_retentionexecution" ("is_deleted"); (params ())
CREATE INDEX "compliance_retentionexecution_is_active_bce0c698" ON "compliance_retentionexecution" ("is_active"); (params ())
CREATE INDEX "compliance_retentionexecution_created_by_id_13683e8b" ON "compliance_retentionexecution" ("created_by_id"); (params ())
CREATE INDEX "compliance_retentionexecution_deleted_by_id_1401fd21" ON "compliance_retentionexecution" ("deleted_by_id"); (params ())
CREATE INDEX "compliance_retentionexecution_organization_id_bdaf87c3" ON "compliance_retentionexecution" ("organization_id"); (params ())
CREATE INDEX "compliance_retentionexecution_policy_id_04b95597" ON "compliance_retentionexecution" ("policy_id"); (params ())
CREATE INDEX "compliance_retentionexecution_requested_by_id_8886fb9a" ON "compliance_retentionexecution" ("requested_by_id"); (params ())
CREATE INDEX "compliance_retentionexecution_updated_by_id_328eb179" ON "compliance_retentionexecution" ("updated_by_id"); (params ())
CREATE INDEX "compliance_consentrecord_created_at_fbd03983" ON "compliance_consentrecord" ("created_at"); (params ())
CREATE INDEX "compliance_consentrecord_is_deleted_7d9edb2e" ON "compliance_consentrecord" ("is_deleted"); (params ())
CREATE INDEX "compliance_consentrecord_is_active_2b868e83" ON "compliance_consentrecord" ("is_active"); (params ())
CREATE INDEX "compliance_consentrecord_created_by_id_9999288a" ON "compliance_consentrecord" ("created_by_id"); (params ())
CREATE INDEX "compliance_consentrecord_deleted_by_id_2a93a051" ON "compliance_consentrecord" ("deleted_by_id"); (params ())
CREATE INDEX "compliance_consentrecord_employee_id_07ee58e1" ON "compliance_consentrecord" ("employee_id"); (params ())
CREATE INDEX "compliance_consentrecord_organization_id_17c0dbfd" ON "compliance_consentrecord" ("organization_id"); (params ())
CREATE INDEX "compliance_consentrecord_updated_by_id_59a173c5" ON "compliance_consentrecord" ("updated_by_id"); (params ())
CREATE INDEX "compliance__organiz_5b7c03_idx" ON "compliance_consentrecord" ("organization_id", "created_at"); (params ())
DROP INDEX "compliance__organiz_5b7c03_idx"; (params ())
DROP INDEX "compliance__organiz_d132b9_idx"; (params ())
DROP INDEX "compliance__organiz_53e941_idx"; (params ())
CREATE TABLE "django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "minute" varchar(64) NOT NULL, "hour" varchar(64) NOT NULL, "day_of_week" varchar(64) NOT NULL, "day_of_month" varchar(64) NOT NULL, "month_of_year" varchar(64) NOT NULL); (params None)
CREATE TABLE "django_celery_beat_intervalschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "every" integer NOT NULL, "period" varchar(24) NOT NULL); (params None)
CREATE TABLE "django_celery_beat_periodictask" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(200) NOT NULL UNIQUE, "task" varchar(200) NOT NULL, "args" text NOT NULL, "kwargs" text NOT NULL, "queue" varchar(200) NULL, "exchange" varchar(200) NULL, "routing_key" varchar(200) NULL, "expires" datetime NULL, "enabled" bool NOT NULL, "last_run_at" datetime NULL, "total_run_count" integer unsigned NOT NULL CHECK ("total_run_count" >= 0), "date_changed" datetime NOT NULL, "description" text NOT NULL, "crontab_id" integer NULL REFERENCES "django_celery_beat_crontabschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "interval_id" integer NULL REFERENCES "django_celery_beat_intervalschedule" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "django_celery_beat_periodictasks" ("ident" smallint NOT NULL PRIMARY KEY, "last_update" datetime NOT NULL); (params None)
CREATE INDEX "django_celery_beat_periodictask_crontab_id_d3cba168" ON "django_celery_beat_periodictask" ("crontab_id"); (params ())
CREATE INDEX "django_celery_beat_periodictask_interval_id_a8ca27da" ON "django_celery_beat_periodictask" ("interval_id"); (params ())
CREATE TABLE "django_celery_beat_solarschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "event" varchar(24) NOT NULL, "latitude" decimal NOT NULL, "longitude" decimal NOT NULL); (params None)
ALTER TABLE "django_celery_beat_periodictask" ADD COLUMN "solar_id" integer NULL REFERENCES "django_celery_beat_solarschedule" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "django_celery_beat_periodictask_solar_id_a87ce72c" ON "django_celery_beat_periodictask" ("solar_id"); (params ())
CREATE UNIQUE INDEX "django_celery_beat_solarschedule_event_latitude_longitude_ba64999a_uniq" ON "django_celery_beat_solarschedule" ("event", "latitude", "longitude"); (params ())
CREATE TABLE "new__django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "minute" varchar(64) NOT NULL, "hour" varchar(64) NOT NULL, "day_of_week" varchar(64) NOT NULL, "day_of_month" varchar(64) NOT NULL, "month_of_year" varchar(64) NOT NULL, "timezone" varchar(63) NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_crontabschedule" ("id", "minute", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone") SELECT "id", "minute", "hour", "day_of_week", "day_of_month", "month_of_year", 'UTC' FROM "django_celery_beat_crontabschedule"; (params ())
DROP TABLE "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "new__django_celery_beat_crontabschedule" RENAME TO "django_celery_beat_crontabschedule"; (params ())
CREATE TABLE "new__django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "minute" varchar(64) NOT NULL, "hour" varchar(64) NOT NULL, "day_of_week" varchar(64) NOT NULL, "month_of_year" varchar(64) NOT NULL, "timezone" varchar(63) NOT NULL, "day_of_month" varchar(124) NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_crontabschedule" ("id", "minute", "hour", "day_of_week", "month_of_year", "timezone", "day_of_month") SELECT "id", "minute", "hour", "day_of_week", "month_of_year", "timezone", "day_of_month" FROM "django_celery_beat_crontabschedule"; (params ())
DROP TABLE "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "new__django_celery_beat_crontabschedule" RENAME TO "django_celery_beat_crontabschedule"; (params ())
CREATE TABLE "new__django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "minute" varchar(64) NOT NULL, "day_of_week" varchar(64) NOT NULL, "day_of_month" varchar(124) NOT NULL, "month_of_year" varchar(64) NOT NULL, "timezone" varchar(63) NOT NULL, "hour" varchar(96) NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_crontabschedule" ("id", "minute", "day_of_week", "day_of_month", "month_of_year", "timezone", "hour") SELECT "id", "minute", "day_of_week", "day_of_month", "month_of_year", "timezone", "hour" FROM "django_celery_beat_crontabschedule"; (params ())
DROP TABLE "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "new__django_celery_beat_crontabschedule" RENAME TO "django_celery_beat_crontabschedule"; (params ())
CREATE TABLE "new__django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "hour" varchar(96) NOT NULL, "day_of_week" varchar(64) NOT NULL, "day_of_month" varchar(124) NOT NULL, "month_of_year" varchar(64) NOT NULL, "timezone" varchar(63) NOT NULL, "minute" varchar(240) NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_crontabschedule" ("id", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone", "minute") SELECT "id", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone", "minute" FROM "django_celery_beat_crontabschedule"; (params ())
DROP TABLE "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "new__django_celery_beat_crontabschedule" RENAME TO "django_celery_beat_crontabschedule"; (params ())
CREATE TABLE "new__django_celery_beat_periodictask" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(200) NOT NULL UNIQUE, "task" varchar(200) NOT NULL, "args" text NOT NULL, "kwargs" text NOT NULL, "queue" varchar(200) NULL, "exchange" varchar(200) NULL, "routing_key" varchar(200) NULL, "expires" datetime NULL, "enabled" bool NOT NULL, "last_run_at" datetime NULL, "total_run_count" integer unsigned NOT NULL CHECK ("total_run_count" >= 0), "date_changed" datetime NOT NULL, "description" text NOT NULL, "crontab_id" integer NULL REFERENCES "django_celery_beat_crontabschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "interval_id" integer NULL REFERENCES "django_celery_beat_intervalschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "solar_id" integer NULL REFERENCES "django_celery_beat_solarschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "one_off" bool NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_periodictask" ("id", "name", "task", "args", "kwargs", "queue", "exchange", "routing_key", "expires", "enabled", "last_run_at", "total_run_count", "date_changed", "description", "crontab_id", "interval_id", "solar_id", "one_off") SELECT "id", "name", "task", "args", "kwargs", "queue", "exchange", "routing_key", "expires", "enabled", "last_run_at", "total_run_count", "date_changed", "description", "crontab_id", "interval_id", "solar_id", 0 FROM "django_celery_beat_periodictask"; (params ())
DROP TABLE "django_celery_beat_periodictask"; (params ())
ALTER TABLE "new__django_celery_beat_periodictask" RENAME TO "django_celery_beat_periodictask"; (params ())
CREATE INDEX "django_celery_beat_periodictask_crontab_id_d3cba168" ON "django_celery_beat_periodictask" ("crontab_id"); (params ())
CREATE INDEX "django_celery_beat_periodictask_interval_id_a8ca27da" ON "django_celery_beat_periodictask" ("interval_id"); (params ())
CREATE INDEX "django_celery_beat_periodictask_solar_id_a87ce72c" ON "django_celery_beat_periodictask" ("solar_id"); (params ())
ALTER TABLE "django_celery_beat_periodictask" ADD COLUMN "start_time" datetime NULL; (params [])
ALTER TABLE "django_celery_beat_periodictask" ADD COLUMN "priority" integer unsigned NULL CHECK ("priority" >= 0); (params [])
CREATE TABLE "new__django_celery_beat_periodictask" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "name" varchar(200) NOT NULL UNIQUE, "task" varchar(200) NOT NULL, "args" text NOT NULL, "kwargs" text NOT NULL, "queue" varchar(200) NULL, "exchange" varchar(200) NULL, "routing_key" varchar(200) NULL, "expires" datetime NULL, "enabled" bool NOT NULL, "last_run_at" datetime NULL, "total_run_count" integer unsigned NOT NULL CHECK ("total_run_count" >= 0), "date_changed" datetime NOT NULL, "description" text NOT NULL, "crontab_id" integer NULL REFERENCES "django_celery_beat_crontabschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "interval_id" integer NULL REFERENCES "django_celery_beat_intervalschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "solar_id" integer NULL REFERENCES "django_celery_beat_solarschedule" ("id") DEFERRABLE INITIALLY DEFERRED, "one_off" bool NOT NULL, "start_time" datetime NULL, "priority" integer unsigned NULL CHECK ("priority" >= 0), "headers" text NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_periodictask" ("id", "name", "task", "args", "kwargs", "queue", "exchange", "routing_key", "expires", "enabled", "last_run_at", "total_run_count", "date_changed", "description", "crontab_id", "interval_id", "solar_id", "one_off", "start_time", "priority", "headers") SELECT "id", "name", "task", "args", "kwargs", "queue", "exchange", "routing_key", "expires", "enabled", "last_run_at", "total_run_count", "date_changed", "description", "crontab_id", "interval_id", "solar_id", "one_off", "start_time", "priority", '{}' FROM "django_celery_beat_periodictask"; (params ())
DROP TABLE "django_celery_beat_periodictask"; (params ())
ALTER TABLE "new__django_celery_beat_periodictask" RENAME TO "django_celery_beat_periodictask"; (params ())
CREATE INDEX "django_celery_beat_periodictask_crontab_id_d3cba168" ON "django_celery_beat_periodictask" ("crontab_id"); (params ())
CREATE INDEX "django_celery_beat_periodictask_interval_id_a8ca27da" ON "django_celery_beat_periodictask" ("interval_id"); (params ())
CREATE INDEX "django_celery_beat_periodictask_solar_id_a87ce72c" ON "django_celery_beat_periodictask" ("solar_id"); (params ())
CREATE TABLE "django_celery_beat_clockedschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "clocked_time" datetime NOT NULL, "enabled" bool NOT NULL); (params None)
ALTER TABLE "django_celery_beat_periodictask" ADD COLUMN "clocked_id" integer NULL REFERENCES "django_celery_beat_clockedschedule" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "django_celery_beat_periodictask_clocked_id_47a69f82" ON "django_celery_beat_periodictask" ("clocked_id"); (params ())
ALTER TABLE "django_celery_beat_periodictask" ADD COLUMN "expire_seconds" integer unsigned NULL CHECK ("expire_seconds" >= 0); (params [])
CREATE TABLE "new__django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "minute" varchar(240) NOT NULL, "hour" varchar(96) NOT NULL, "day_of_week" varchar(64) NOT NULL, "day_of_month" varchar(124) NOT NULL, "month_of_year" varchar(64) NOT NULL, "timezone" varchar(63) NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_crontabschedule" ("id", "minute", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone") SELECT "id", "minute", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone" FROM "django_celery_beat_crontabschedule"; (params ())
DROP TABLE "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "new__django_celery_beat_crontabschedule" RENAME TO "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "django_celery_beat_clockedschedule" DROP COLUMN "enabled"; (params ())
CREATE TABLE "new__django_celery_beat_crontabschedule" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "minute" varchar(240) NOT NULL, "hour" varchar(96) NOT NULL, "day_of_week" varchar(64) NOT NULL, "day_of_month" varchar(124) NOT NULL, "month_of_year" varchar(64) NOT NULL, "timezone" varchar(63) NOT NULL); (params None)
INSERT INTO "new__django_celery_beat_crontabschedule" ("id", "minute", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone") SELECT "id", "minute", "hour", "day_of_week", "day_of_month", "month_of_year", "timezone" FROM "django_celery_beat_crontabschedule"; (params ())
DROP TABLE "django_celery_beat_crontabschedule"; (params ())
ALTER TABLE "new__django_celery_beat_crontabschedule" RENAME TO "django_celery_beat_crontabschedule"; (params ())
CREATE TABLE "django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "hidden" bool NOT NULL, "meta" text NULL); (params None)
CREATE INDEX "django_celery_results_taskresult_hidden_cd77412f" ON "django_celery_results_taskresult" ("hidden"); (params ())
ALTER TABLE "django_celery_results_taskresult" ADD COLUMN "task_args" text NULL; (params [])
ALTER TABLE "django_celery_results_taskresult" ADD COLUMN "task_kwargs" text NULL; (params [])
ALTER TABLE "django_celery_results_taskresult" ADD COLUMN "task_name" varchar(255) NULL; (params [])
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "traceback" text NULL, "hidden" bool NOT NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "date_done" datetime NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "date_done") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "date_done" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_hidden_cd77412f" ON "django_celery_results_taskresult" ("hidden"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "hidden" bool NOT NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "status" varchar(50) NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "status") SELECT "id", "task_id", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "status" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE INDEX "django_celery_results_taskresult_hidden_cd77412f" ON "django_celery_results_taskresult" ("hidden"); (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "hidden" bool NOT NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "task_id" varchar(255) NOT NULL UNIQUE); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "task_id") SELECT "id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "task_id" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE INDEX "django_celery_results_taskresult_hidden_cd77412f" ON "django_celery_results_taskresult" ("hidden"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "hidden" bool NOT NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE INDEX "django_celery_results_taskresult_hidden_cd77412f" ON "django_celery_results_taskresult" ("hidden"); (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
ALTER TABLE "django_celery_results_taskresult" ADD COLUMN "worker" varchar(100) NULL; (params [])
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "hidden" bool NOT NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "hidden", "meta", "task_args", "task_kwargs", "task_name", "worker", '2026-02-27 11:53:13.541430' FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE INDEX "django_celery_results_taskresult_hidden_cd77412f" ON "django_celery_results_taskresult" ("hidden"); (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_created_099f3424" ON "django_celery_results_taskresult" ("date_created"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_created_099f3424" ON "django_celery_results_taskresult" ("date_created"); (params ())
CREATE TABLE "django_celery_results_chordcounter" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "group_id" varchar(255) NOT NULL UNIQUE, "sub_tasks" text NOT NULL, "count" integer unsigned NOT NULL CHECK ("count" >= 0)); (params None)
CREATE TABLE "django_celery_results_groupresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "group_id" varchar(255) NOT NULL UNIQUE, "date_created" datetime NOT NULL, "date_done" datetime NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL); (params None)
CREATE TABLE "new__django_celery_results_chordcounter" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "sub_tasks" text NOT NULL, "count" integer unsigned NOT NULL CHECK ("count" >= 0), "group_id" varchar(255) NOT NULL UNIQUE); (params None)
INSERT INTO "new__django_celery_results_chordcounter" ("id", "sub_tasks", "count", "group_id") SELECT "id", "sub_tasks", "count", "group_id" FROM "django_celery_results_chordcounter"; (params ())
DROP TABLE "django_celery_results_chordcounter"; (params ())
ALTER TABLE "new__django_celery_results_chordcounter" RENAME TO "django_celery_results_chordcounter"; (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE INDEX "django_celery_results_taskresult_date_done_49edada6" ON "django_celery_results_taskresult" ("date_done"); (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL, "date_done" datetime NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created", "date_done") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created", "date_done" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_status_cbbed23a" ON "django_celery_results_taskresult" ("status"); (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL, "status" varchar(50) NOT NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created", "status") SELECT "id", "task_id", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created", "status" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL, "task_id" varchar(255) NOT NULL UNIQUE); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created", "task_id") SELECT "id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "worker", "date_created", "task_id" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_task_name_90987df3" ON "django_celery_results_taskresult" ("task_name"); (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "worker" varchar(100) NULL, "date_created" datetime NOT NULL, "task_name" varchar(255) NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "worker", "date_created", "task_name") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "worker", "date_created", "task_name" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_celery_results_taskresult_worker_f8711389" ON "django_celery_results_taskresult" ("worker"); (params ())
CREATE TABLE "new__django_celery_results_taskresult" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "task_id" varchar(255) NOT NULL UNIQUE, "status" varchar(50) NOT NULL, "content_type" varchar(128) NOT NULL, "content_encoding" varchar(64) NOT NULL, "result" text NULL, "date_done" datetime NOT NULL, "traceback" text NULL, "meta" text NULL, "task_args" text NULL, "task_kwargs" text NULL, "task_name" varchar(255) NULL, "date_created" datetime NOT NULL, "worker" varchar(100) NULL); (params None)
INSERT INTO "new__django_celery_results_taskresult" ("id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "date_created", "worker") SELECT "id", "task_id", "status", "content_type", "content_encoding", "result", "date_done", "traceback", "meta", "task_args", "task_kwargs", "task_name", "date_created", "worker" FROM "django_celery_results_taskresult"; (params ())
DROP TABLE "django_celery_results_taskresult"; (params ())
ALTER TABLE "new__django_celery_results_taskresult" RENAME TO "django_celery_results_taskresult"; (params ())
CREATE INDEX "django_cele_task_na_08aec9_idx" ON "django_celery_results_taskresult" ("task_name"); (params None)
CREATE INDEX "django_cele_status_9b6201_idx" ON "django_celery_results_taskresult" ("status"); (params None)
CREATE INDEX "django_cele_worker_d54dd8_idx" ON "django_celery_results_taskresult" ("worker"); (params None)
CREATE INDEX "django_cele_date_cr_f04a50_idx" ON "django_celery_results_taskresult" ("date_created"); (params None)
CREATE INDEX "django_cele_date_do_f59aad_idx" ON "django_celery_results_taskresult" ("date_done"); (params None)
CREATE INDEX "django_cele_date_cr_bd6c1d_idx" ON "django_celery_results_groupresult" ("date_created"); (params None)
CREATE INDEX "django_cele_date_do_caae0e_idx" ON "django_celery_results_groupresult" ("date_done"); (params None)
DROP INDEX "django_cele_group_i_299b0d_idx"; (params ())
DROP INDEX "django_cele_group_i_3cddec_idx"; (params ())
DROP INDEX "django_cele_task_id_7f8fca_idx"; (params ())
ALTER TABLE "django_celery_results_taskresult" ADD COLUMN "periodic_task_name" varchar(255) NULL; (params [])
ALTER TABLE "django_celery_results_taskresult" ADD COLUMN "date_started" datetime NULL; (params [])
CREATE INDEX "django_cele_periodi_1993cf_idx" ON "django_celery_results_taskresult" ("periodic_task_name"); (params None)
CREATE INDEX "emp_org_status_idx" ON "employees_employee" ("organization_id", "employment_status", "is_active"); (params None)
CREATE INDEX "emp_org_dept_idx" ON "employees_employee" ("organization_id", "department_id"); (params None)
CREATE INDEX "emp_org_desig_idx" ON "employees_employee" ("organization_id", "designation_id"); (params None)
CREATE INDEX "emp_org_loc_idx" ON "employees_employee" ("organization_id", "location_id"); (params None)
CREATE INDEX "emp_org_mgr_idx" ON "employees_employee" ("organization_id", "reporting_manager_id"); (params None)
CREATE TABLE "payroll_employeeloan" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "loan_type" varchar(20) NOT NULL, "principal_amount" decimal NOT NULL, "interest_rate" decimal NOT NULL, "tenure_months" integer unsigned NOT NULL CHECK ("tenure_months" >= 0), "emi_amount" decimal NOT NULL, "total_repayable" decimal NOT NULL, "amount_repaid" decimal NOT NULL, "outstanding_balance" decimal NOT NULL, "status" varchar(20) NOT NULL, "reason" text NOT NULL, "applied_at" datetime NOT NULL, "approved_at" datetime NULL, "disbursed_at" datetime NULL, "closed_at" datetime NULL, "deduct_from_salary" bool NOT NULL, "start_deduction_month" smallint unsigned NULL CHECK ("start_deduction_month" >= 0), "start_deduction_year" smallint unsigned NULL CHECK ("start_deduction_year" >= 0), "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_payrollrun" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "month" smallint unsigned NOT NULL CHECK ("month" >= 0), "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "pay_date" date NOT NULL, "status" varchar(20) NOT NULL, "total_employees" integer unsigned NOT NULL CHECK ("total_employees" >= 0), "total_gross" decimal NOT NULL, "total_deductions" decimal NOT NULL, "total_net" decimal NOT NULL, "processed_at" datetime NULL, "approved_at" datetime NULL, "locked_at" datetime NULL, "paid_at" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "processed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_payslip" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "salary_snapshot" text NOT NULL CHECK ((JSON_VALID("salary_snapshot") OR "salary_snapshot" IS NULL)), "attendance_snapshot" text NOT NULL CHECK ((JSON_VALID("attendance_snapshot") OR "attendance_snapshot" IS NULL)), "gross_salary" decimal NOT NULL, "total_deductions" decimal NOT NULL, "net_salary" decimal NOT NULL, "earnings_breakdown" text NOT NULL CHECK ((JSON_VALID("earnings_breakdown") OR "earnings_breakdown" IS NULL)), "deductions_breakdown" text NOT NULL CHECK ((JSON_VALID("deductions_breakdown") OR "deductions_breakdown" IS NULL)), "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "payroll_run_id" char(32) NOT NULL REFERENCES "payroll_payrollrun" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_loanrepayment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "amount" decimal NOT NULL, "repayment_date" date NOT NULL, "remarks" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "loan_id" char(32) NOT NULL REFERENCES "payroll_employeeloan" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "payslip_id" char(32) NULL REFERENCES "payroll_payslip" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_pfcontribution" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "uan" varchar(12) NOT NULL, "pf_number" varchar(22) NOT NULL, "epf_employee" decimal NOT NULL, "epf_employer" decimal NOT NULL, "eps" decimal NOT NULL, "edli" decimal NOT NULL, "admin_charges" decimal NOT NULL, "pf_wages" decimal NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "payslip_id" char(32) NOT NULL UNIQUE REFERENCES "payroll_payslip" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_reimbursementclaim" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "amount" decimal NOT NULL, "description" text NOT NULL, "bill" varchar(100) NULL, "status" varchar(20) NOT NULL, "submitted_at" datetime NULL, "approved_at" datetime NULL, "paid_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_salaryarrear" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "from_month" smallint unsigned NOT NULL CHECK ("from_month" >= 0), "from_year" smallint unsigned NOT NULL CHECK ("from_year" >= 0), "to_month" smallint unsigned NOT NULL CHECK ("to_month" >= 0), "to_year" smallint unsigned NOT NULL CHECK ("to_year" >= 0), "arrear_amount" decimal NOT NULL, "reason" text NOT NULL, "is_paid" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_taxdeclaration" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "financial_year" varchar(9) NOT NULL, "tax_regime" varchar(10) NOT NULL, "declarations" text NOT NULL CHECK ((JSON_VALID("declarations") OR "declarations" IS NULL)), "proofs_submitted" bool NOT NULL, "proofs_verified" bool NOT NULL, "total_exemptions" decimal NOT NULL, "taxable_income" decimal NOT NULL, "annual_tax" decimal NOT NULL, "monthly_tds" decimal NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_employeesalary" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "effective_from" date NOT NULL, "effective_to" date NULL, "is_active" bool NOT NULL, "basic" decimal NOT NULL, "hra" decimal NOT NULL, "da" decimal NOT NULL, "special_allowance" decimal NOT NULL, "conveyance" decimal NOT NULL, "medical_allowance" decimal NOT NULL, "lta" decimal NOT NULL, "other_allowances" decimal NOT NULL, "performance_bonus" decimal NOT NULL, "variable_pay" decimal NOT NULL, "arrears" decimal NOT NULL, "pf_employee" decimal NOT NULL, "esi_employee" decimal NOT NULL, "professional_tax" decimal NOT NULL, "tds" decimal NOT NULL, "other_deductions" decimal NOT NULL, "pf_employer" decimal NOT NULL, "esi_employer" decimal NOT NULL, "gratuity" decimal NOT NULL, "annual_ctc" decimal NOT NULL, "monthly_gross" decimal NOT NULL, "total_deductions" decimal NOT NULL, "net_salary" decimal NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "payroll_fullfinalsettlement" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "separation_date" date NOT NULL, "last_working_date" date NOT NULL, "status" varchar(20) NOT NULL, "pending_salary" decimal NOT NULL, "leave_encashment" decimal NOT NULL, "gratuity" decimal NOT NULL, "bonus" decimal NOT NULL, "notice_pay" decimal NOT NULL, "other_earnings" decimal NOT NULL, "notice_recovery" decimal NOT NULL, "loan_recovery" decimal NOT NULL, "other_deductions" decimal NOT NULL, "tds" decimal NOT NULL, "total_earnings" decimal NOT NULL, "total_deductions" decimal NOT NULL, "net_payable" decimal NOT NULL, "breakdown" text NOT NULL CHECK ((JSON_VALID("breakdown") OR "breakdown" IS NULL)), "hr_approved" bool NOT NULL, "finance_approved" bool NOT NULL, "approved_at" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL UNIQUE REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__payroll_payrollrun" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "month" smallint unsigned NOT NULL CHECK ("month" >= 0), "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "pay_date" date NOT NULL, "status" varchar(20) NOT NULL, "total_employees" integer unsigned NOT NULL CHECK ("total_employees" >= 0), "total_gross" decimal NOT NULL, "total_deductions" decimal NOT NULL, "total_net" decimal NOT NULL, "processed_at" datetime NULL, "approved_at" datetime NULL, "locked_at" datetime NULL, "paid_at" datetime NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "processed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_payroll_org_month_branch" UNIQUE ("organization_id", "year", "month", "branch_id")); (params None)
INSERT INTO "new__payroll_payrollrun" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "month", "year", "pay_date", "status", "total_employees", "total_gross", "total_deductions", "total_net", "processed_at", "approved_at", "locked_at", "paid_at", "approved_by_id", "branch_id", "created_by_id", "deleted_by_id", "organization_id", "processed_by_id", "updated_by_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "month", "year", "pay_date", "status", "total_employees", "total_gross", "total_deductions", "total_net", "processed_at", "approved_at", "locked_at", "paid_at", "approved_by_id", "branch_id", "created_by_id", "deleted_by_id", "organization_id", "processed_by_id", "updated_by_id" FROM "payroll_payrollrun"; (params ())
DROP TABLE "payroll_payrollrun"; (params ())
ALTER TABLE "new__payroll_payrollrun" RENAME TO "payroll_payrollrun"; (params ())
CREATE INDEX "payroll_employeeloan_created_at_432a1798" ON "payroll_employeeloan" ("created_at"); (params ())
CREATE INDEX "payroll_employeeloan_is_deleted_e395317a" ON "payroll_employeeloan" ("is_deleted"); (params ())
CREATE INDEX "payroll_employeeloan_is_active_bbfc2b91" ON "payroll_employeeloan" ("is_active"); (params ())
CREATE INDEX "payroll_employeeloan_approved_by_id_6e76c5d7" ON "payroll_employeeloan" ("approved_by_id"); (params ())
CREATE INDEX "payroll_employeeloan_created_by_id_10c6c3ea" ON "payroll_employeeloan" ("created_by_id"); (params ())
CREATE INDEX "payroll_employeeloan_deleted_by_id_d6e8a675" ON "payroll_employeeloan" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_employeeloan_employee_id_231d16ec" ON "payroll_employeeloan" ("employee_id"); (params ())
CREATE INDEX "payroll_employeeloan_organization_id_a1db2648" ON "payroll_employeeloan" ("organization_id"); (params ())
CREATE INDEX "payroll_employeeloan_updated_by_id_f72fe333" ON "payroll_employeeloan" ("updated_by_id"); (params ())
CREATE INDEX "payroll_payslip_created_at_1b6df3c6" ON "payroll_payslip" ("created_at"); (params ())
CREATE INDEX "payroll_payslip_is_deleted_507dc33e" ON "payroll_payslip" ("is_deleted"); (params ())
CREATE INDEX "payroll_payslip_is_active_d40fa931" ON "payroll_payslip" ("is_active"); (params ())
CREATE INDEX "payroll_payslip_created_by_id_c32cd835" ON "payroll_payslip" ("created_by_id"); (params ())
CREATE INDEX "payroll_payslip_deleted_by_id_e851476f" ON "payroll_payslip" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_payslip_employee_id_ebd9ca04" ON "payroll_payslip" ("employee_id"); (params ())
CREATE INDEX "payroll_payslip_organization_id_07db4add" ON "payroll_payslip" ("organization_id"); (params ())
CREATE INDEX "payroll_payslip_payroll_run_id_240847d4" ON "payroll_payslip" ("payroll_run_id"); (params ())
CREATE INDEX "payroll_payslip_updated_by_id_e5616a09" ON "payroll_payslip" ("updated_by_id"); (params ())
CREATE INDEX "payroll_loanrepayment_created_at_c1f2a0c4" ON "payroll_loanrepayment" ("created_at"); (params ())
CREATE INDEX "payroll_loanrepayment_is_deleted_b93698b9" ON "payroll_loanrepayment" ("is_deleted"); (params ())
CREATE INDEX "payroll_loanrepayment_is_active_22c442e9" ON "payroll_loanrepayment" ("is_active"); (params ())
CREATE INDEX "payroll_loanrepayment_created_by_id_f21222c6" ON "payroll_loanrepayment" ("created_by_id"); (params ())
CREATE INDEX "payroll_loanrepayment_deleted_by_id_f274b8cb" ON "payroll_loanrepayment" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_loanrepayment_loan_id_99c32cea" ON "payroll_loanrepayment" ("loan_id"); (params ())
CREATE INDEX "payroll_loanrepayment_organization_id_bd69e5f4" ON "payroll_loanrepayment" ("organization_id"); (params ())
CREATE INDEX "payroll_loanrepayment_updated_by_id_c93332cf" ON "payroll_loanrepayment" ("updated_by_id"); (params ())
CREATE INDEX "payroll_loanrepayment_payslip_id_7e86e0c5" ON "payroll_loanrepayment" ("payslip_id"); (params ())
CREATE INDEX "payroll_pfcontribution_created_at_47845077" ON "payroll_pfcontribution" ("created_at"); (params ())
CREATE INDEX "payroll_pfcontribution_is_deleted_3cfd9bb7" ON "payroll_pfcontribution" ("is_deleted"); (params ())
CREATE INDEX "payroll_pfcontribution_is_active_6b6490e6" ON "payroll_pfcontribution" ("is_active"); (params ())
CREATE INDEX "payroll_pfcontribution_created_by_id_ee35a294" ON "payroll_pfcontribution" ("created_by_id"); (params ())
CREATE INDEX "payroll_pfcontribution_deleted_by_id_0a8a6473" ON "payroll_pfcontribution" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_pfcontribution_organization_id_76d11007" ON "payroll_pfcontribution" ("organization_id"); (params ())
CREATE INDEX "payroll_pfcontribution_updated_by_id_a83dbe53" ON "payroll_pfcontribution" ("updated_by_id"); (params ())
CREATE INDEX "payroll_reimbursementclaim_created_at_43cbf7be" ON "payroll_reimbursementclaim" ("created_at"); (params ())
CREATE INDEX "payroll_reimbursementclaim_is_deleted_41a798e2" ON "payroll_reimbursementclaim" ("is_deleted"); (params ())
CREATE INDEX "payroll_reimbursementclaim_is_active_9b2f6e26" ON "payroll_reimbursementclaim" ("is_active"); (params ())
CREATE INDEX "payroll_reimbursementclaim_created_by_id_8a82d0de" ON "payroll_reimbursementclaim" ("created_by_id"); (params ())
CREATE INDEX "payroll_reimbursementclaim_deleted_by_id_aa29a5dc" ON "payroll_reimbursementclaim" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_reimbursementclaim_employee_id_b85dbe53" ON "payroll_reimbursementclaim" ("employee_id"); (params ())
CREATE INDEX "payroll_reimbursementclaim_organization_id_95a3baa5" ON "payroll_reimbursementclaim" ("organization_id"); (params ())
CREATE INDEX "payroll_reimbursementclaim_updated_by_id_4650f958" ON "payroll_reimbursementclaim" ("updated_by_id"); (params ())
CREATE INDEX "payroll_salaryarrear_created_at_0699740e" ON "payroll_salaryarrear" ("created_at"); (params ())
CREATE INDEX "payroll_salaryarrear_is_deleted_e5671f8b" ON "payroll_salaryarrear" ("is_deleted"); (params ())
CREATE INDEX "payroll_salaryarrear_is_active_3cd41515" ON "payroll_salaryarrear" ("is_active"); (params ())
CREATE INDEX "payroll_salaryarrear_created_by_id_37c70835" ON "payroll_salaryarrear" ("created_by_id"); (params ())
CREATE INDEX "payroll_salaryarrear_deleted_by_id_571993ad" ON "payroll_salaryarrear" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_salaryarrear_employee_id_ad821b2e" ON "payroll_salaryarrear" ("employee_id"); (params ())
CREATE INDEX "payroll_salaryarrear_organization_id_6f2ccb27" ON "payroll_salaryarrear" ("organization_id"); (params ())
CREATE INDEX "payroll_salaryarrear_updated_by_id_12d027d8" ON "payroll_salaryarrear" ("updated_by_id"); (params ())
CREATE INDEX "payroll_taxdeclaration_created_at_1763a5d0" ON "payroll_taxdeclaration" ("created_at"); (params ())
CREATE INDEX "payroll_taxdeclaration_is_deleted_483711c7" ON "payroll_taxdeclaration" ("is_deleted"); (params ())
CREATE INDEX "payroll_taxdeclaration_is_active_d04b6798" ON "payroll_taxdeclaration" ("is_active"); (params ())
CREATE INDEX "payroll_taxdeclaration_created_by_id_bcb54dc8" ON "payroll_taxdeclaration" ("created_by_id"); (params ())
CREATE INDEX "payroll_taxdeclaration_deleted_by_id_07d19143" ON "payroll_taxdeclaration" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_taxdeclaration_employee_id_9d235fec" ON "payroll_taxdeclaration" ("employee_id"); (params ())
CREATE INDEX "payroll_taxdeclaration_organization_id_7cd60c8f" ON "payroll_taxdeclaration" ("organization_id"); (params ())
CREATE INDEX "payroll_taxdeclaration_updated_by_id_936ffcf1" ON "payroll_taxdeclaration" ("updated_by_id"); (params ())
CREATE INDEX "payroll_taxdeclaration_verified_by_id_5f56f315" ON "payroll_taxdeclaration" ("verified_by_id"); (params ())
CREATE UNIQUE INDEX "uq_active_salary_per_employee" ON "payroll_employeesalary" ("employee_id", "organization_id") WHERE "is_active"; (params ())
CREATE INDEX "payroll_employeesalary_created_at_984f9793" ON "payroll_employeesalary" ("created_at"); (params ())
CREATE INDEX "payroll_employeesalary_is_deleted_9fd9cc02" ON "payroll_employeesalary" ("is_deleted"); (params ())
CREATE INDEX "payroll_employeesalary_effective_from_f30341f5" ON "payroll_employeesalary" ("effective_from"); (params ())
CREATE INDEX "payroll_employeesalary_created_by_id_ee5fd535" ON "payroll_employeesalary" ("created_by_id"); (params ())
CREATE INDEX "payroll_employeesalary_deleted_by_id_d8536ab3" ON "payroll_employeesalary" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_employeesalary_employee_id_5ecbf139" ON "payroll_employeesalary" ("employee_id"); (params ())
CREATE INDEX "payroll_employeesalary_organization_id_6baed828" ON "payroll_employeesalary" ("organization_id"); (params ())
CREATE INDEX "payroll_employeesalary_updated_by_id_3fb5b9b6" ON "payroll_employeesalary" ("updated_by_id"); (params ())
CREATE INDEX "payroll_emp_employe_033182_idx" ON "payroll_employeesalary" ("employee_id", "effective_from"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_created_at_852e50fa" ON "payroll_fullfinalsettlement" ("created_at"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_is_deleted_d669bc54" ON "payroll_fullfinalsettlement" ("is_deleted"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_is_active_e337dd84" ON "payroll_fullfinalsettlement" ("is_active"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_approved_by_id_381bbf2c" ON "payroll_fullfinalsettlement" ("approved_by_id"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_created_by_id_7b1fc252" ON "payroll_fullfinalsettlement" ("created_by_id"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_deleted_by_id_5d4f682c" ON "payroll_fullfinalsettlement" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_organization_id_9faede68" ON "payroll_fullfinalsettlement" ("organization_id"); (params ())
CREATE INDEX "payroll_fullfinalsettlement_updated_by_id_7d805eeb" ON "payroll_fullfinalsettlement" ("updated_by_id"); (params ())
CREATE INDEX "payroll_ful_organiz_feba69_idx" ON "payroll_fullfinalsettlement" ("organization_id", "created_at"); (params ())
CREATE INDEX "payroll_payrollrun_created_at_a570f676" ON "payroll_payrollrun" ("created_at"); (params ())
CREATE INDEX "payroll_payrollrun_is_deleted_8df7b422" ON "payroll_payrollrun" ("is_deleted"); (params ())
CREATE INDEX "payroll_payrollrun_is_active_8d1367e3" ON "payroll_payrollrun" ("is_active"); (params ())
CREATE INDEX "payroll_payrollrun_approved_by_id_76ec888a" ON "payroll_payrollrun" ("approved_by_id"); (params ())
CREATE INDEX "payroll_payrollrun_branch_id_6da7f18e" ON "payroll_payrollrun" ("branch_id"); (params ())
CREATE INDEX "payroll_payrollrun_created_by_id_cabe70b0" ON "payroll_payrollrun" ("created_by_id"); (params ())
CREATE INDEX "payroll_payrollrun_deleted_by_id_3d111c31" ON "payroll_payrollrun" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_payrollrun_organization_id_3b2ec004" ON "payroll_payrollrun" ("organization_id"); (params ())
CREATE INDEX "payroll_payrollrun_processed_by_id_633a2c4b" ON "payroll_payrollrun" ("processed_by_id"); (params ())
CREATE INDEX "payroll_payrollrun_updated_by_id_1fc44105" ON "payroll_payrollrun" ("updated_by_id"); (params ())
CREATE TABLE "new__payroll_payslip" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "salary_snapshot" text NOT NULL CHECK ((JSON_VALID("salary_snapshot") OR "salary_snapshot" IS NULL)), "attendance_snapshot" text NOT NULL CHECK ((JSON_VALID("attendance_snapshot") OR "attendance_snapshot" IS NULL)), "gross_salary" decimal NOT NULL, "total_deductions" decimal NOT NULL, "net_salary" decimal NOT NULL, "earnings_breakdown" text NOT NULL CHECK ((JSON_VALID("earnings_breakdown") OR "earnings_breakdown" IS NULL)), "deductions_breakdown" text NOT NULL CHECK ((JSON_VALID("deductions_breakdown") OR "deductions_breakdown" IS NULL)), "pdf_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "payroll_run_id" char(32) NOT NULL REFERENCES "payroll_payrollrun" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, CONSTRAINT "uq_payslip_per_employee_per_run" UNIQUE ("organization_id", "payroll_run_id", "employee_id")); (params None)
INSERT INTO "new__payroll_payslip" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "salary_snapshot", "attendance_snapshot", "gross_salary", "total_deductions", "net_salary", "earnings_breakdown", "deductions_breakdown", "pdf_file", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "payroll_run_id", "updated_by_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "salary_snapshot", "attendance_snapshot", "gross_salary", "total_deductions", "net_salary", "earnings_breakdown", "deductions_breakdown", "pdf_file", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "payroll_run_id", "updated_by_id" FROM "payroll_payslip"; (params ())
DROP TABLE "payroll_payslip"; (params ())
ALTER TABLE "new__payroll_payslip" RENAME TO "payroll_payslip"; (params ())
CREATE INDEX "payroll_payslip_created_at_1b6df3c6" ON "payroll_payslip" ("created_at"); (params ())
CREATE INDEX "payroll_payslip_is_deleted_507dc33e" ON "payroll_payslip" ("is_deleted"); (params ())
CREATE INDEX "payroll_payslip_is_active_d40fa931" ON "payroll_payslip" ("is_active"); (params ())
CREATE INDEX "payroll_payslip_created_by_id_c32cd835" ON "payroll_payslip" ("created_by_id"); (params ())
CREATE INDEX "payroll_payslip_deleted_by_id_e851476f" ON "payroll_payslip" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_payslip_employee_id_ebd9ca04" ON "payroll_payslip" ("employee_id"); (params ())
CREATE INDEX "payroll_payslip_organization_id_07db4add" ON "payroll_payslip" ("organization_id"); (params ())
CREATE INDEX "payroll_payslip_payroll_run_id_240847d4" ON "payroll_payslip" ("payroll_run_id"); (params ())
CREATE INDEX "payroll_payslip_updated_by_id_e5616a09" ON "payroll_payslip" ("updated_by_id"); (params ())
CREATE INDEX "payroll_pfc_organiz_969d39_idx" ON "payroll_pfcontribution" ("organization_id", "created_at"); (params None)
CREATE INDEX "payroll_rei_organiz_d760ff_idx" ON "payroll_reimbursementclaim" ("organization_id", "created_at"); (params None)
CREATE INDEX "payroll_sal_organiz_8ff23a_idx" ON "payroll_salaryarrear" ("organization_id", "created_at"); (params None)
CREATE UNIQUE INDEX "payroll_taxdeclaration_employee_id_financial_year_58dda341_uniq" ON "payroll_taxdeclaration" ("employee_id", "financial_year"); (params ())
CREATE TABLE "expenses_employeeadvance" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "advance_number" varchar(20) NOT NULL UNIQUE, "purpose" text NOT NULL, "advance_date" date NOT NULL, "amount" decimal NOT NULL, "settlement_type" varchar(20) NOT NULL, "amount_settled" decimal NOT NULL, "remaining_balance" decimal NOT NULL, "deduction_start_month" date NULL, "monthly_deduction_amount" decimal NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL, "disbursed_at" datetime NULL, "disbursement_reference" varchar(100) NOT NULL, "disbursement_mode" varchar(20) NOT NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "disbursed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "expenses_expensecategory" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "max_limit_per_claim" decimal NULL, "max_monthly_limit" decimal NULL, "requires_receipt" bool NOT NULL, "requires_approval" bool NOT NULL, "min_amount_for_receipt" decimal NOT NULL, "gl_account" varchar(50) NOT NULL, "cost_center" varchar(50) NOT NULL, "designation_limits" text NOT NULL CHECK ((JSON_VALID("designation_limits") OR "designation_limits" IS NULL)), "is_active" bool NOT NULL, "display_order" smallint unsigned NOT NULL CHECK ("display_order" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "expenses_expenseclaim" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "claim_number" varchar(20) NOT NULL UNIQUE, "title" varchar(200) NOT NULL, "description" text NOT NULL, "claim_date" date NOT NULL, "expense_from" date NOT NULL, "expense_to" date NOT NULL, "total_claimed_amount" decimal NOT NULL, "total_approved_amount" decimal NOT NULL, "total_paid_amount" decimal NOT NULL, "status" varchar(20) NOT NULL, "payment_status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL, "paid_at" datetime NULL, "payment_reference" varchar(100) NOT NULL, "payment_mode" varchar(20) NOT NULL, "advance_adjusted" decimal NOT NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "paid_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "expenses_expenseapproval" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "level" smallint unsigned NOT NULL CHECK ("level" >= 0), "action" varchar(20) NOT NULL, "comments" text NOT NULL, "approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "claim_id" char(32) NOT NULL REFERENCES "expenses_expenseclaim" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "expenses_advancesettlement" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "settlement_type" varchar(20) NOT NULL, "amount" decimal NOT NULL, "settlement_date" date NOT NULL, "notes" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "payslip_id" char(32) NULL REFERENCES "payroll_payslip" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "advance_id" char(32) NOT NULL REFERENCES "expenses_employeeadvance" ("id") DEFERRABLE INITIALLY DEFERRED, "expense_claim_id" char(32) NULL REFERENCES "expenses_expenseclaim" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "expenses_expenseitem" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "expense_date" date NOT NULL, "description" varchar(500) NOT NULL, "claimed_amount" decimal NOT NULL, "approved_amount" decimal NULL, "receipt" varchar(100) NULL, "receipt_number" varchar(100) NOT NULL, "vendor_name" varchar(200) NOT NULL, "is_approved" bool NOT NULL, "rejection_reason" text NOT NULL, "currency" varchar(3) NOT NULL, "exchange_rate" decimal NOT NULL, "category_id" char(32) NOT NULL REFERENCES "expenses_expensecategory" ("id") DEFERRABLE INITIALLY DEFERRED, "claim_id" char(32) NOT NULL REFERENCES "expenses_expenseclaim" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "expenses_employeeadvance_created_at_87a14aae" ON "expenses_employeeadvance" ("created_at"); (params ())
CREATE INDEX "expenses_employeeadvance_is_deleted_0e68cf1e" ON "expenses_employeeadvance" ("is_deleted"); (params ())
CREATE INDEX "expenses_employeeadvance_is_active_33a1b06a" ON "expenses_employeeadvance" ("is_active"); (params ())
CREATE INDEX "expenses_employeeadvance_approved_by_id_b869bf1c" ON "expenses_employeeadvance" ("approved_by_id"); (params ())
CREATE INDEX "expenses_employeeadvance_created_by_id_a8f01c9a" ON "expenses_employeeadvance" ("created_by_id"); (params ())
CREATE INDEX "expenses_employeeadvance_deleted_by_id_ba560afe" ON "expenses_employeeadvance" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_employeeadvance_disbursed_by_id_6cc272af" ON "expenses_employeeadvance" ("disbursed_by_id"); (params ())
CREATE INDEX "expenses_employeeadvance_employee_id_fa356957" ON "expenses_employeeadvance" ("employee_id"); (params ())
CREATE INDEX "expenses_employeeadvance_organization_id_73604d7e" ON "expenses_employeeadvance" ("organization_id"); (params ())
CREATE INDEX "expenses_employeeadvance_updated_by_id_c3da540d" ON "expenses_employeeadvance" ("updated_by_id"); (params ())
CREATE INDEX "expenses_expensecategory_created_at_164efaf8" ON "expenses_expensecategory" ("created_at"); (params ())
CREATE INDEX "expenses_expensecategory_is_deleted_d8d5c537" ON "expenses_expensecategory" ("is_deleted"); (params ())
CREATE INDEX "expenses_expensecategory_created_by_id_6972e845" ON "expenses_expensecategory" ("created_by_id"); (params ())
CREATE INDEX "expenses_expensecategory_deleted_by_id_463e6e10" ON "expenses_expensecategory" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_expensecategory_organization_id_9f454292" ON "expenses_expensecategory" ("organization_id"); (params ())
CREATE INDEX "expenses_expensecategory_updated_by_id_c52f728e" ON "expenses_expensecategory" ("updated_by_id"); (params ())
CREATE INDEX "expenses_expenseclaim_created_at_f9b7c57a" ON "expenses_expenseclaim" ("created_at"); (params ())
CREATE INDEX "expenses_expenseclaim_is_deleted_4893ead3" ON "expenses_expenseclaim" ("is_deleted"); (params ())
CREATE INDEX "expenses_expenseclaim_is_active_43d12f91" ON "expenses_expenseclaim" ("is_active"); (params ())
CREATE INDEX "expenses_expenseclaim_approved_by_id_3bfe09e5" ON "expenses_expenseclaim" ("approved_by_id"); (params ())
CREATE INDEX "expenses_expenseclaim_created_by_id_cb897d19" ON "expenses_expenseclaim" ("created_by_id"); (params ())
CREATE INDEX "expenses_expenseclaim_current_approver_id_c498496c" ON "expenses_expenseclaim" ("current_approver_id"); (params ())
CREATE INDEX "expenses_expenseclaim_deleted_by_id_6bb25ff7" ON "expenses_expenseclaim" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_expenseclaim_employee_id_7acbed91" ON "expenses_expenseclaim" ("employee_id"); (params ())
CREATE INDEX "expenses_expenseclaim_organization_id_1710c378" ON "expenses_expenseclaim" ("organization_id"); (params ())
CREATE INDEX "expenses_expenseclaim_paid_by_id_ac4f5048" ON "expenses_expenseclaim" ("paid_by_id"); (params ())
CREATE INDEX "expenses_expenseclaim_updated_by_id_7e0d2900" ON "expenses_expenseclaim" ("updated_by_id"); (params ())
CREATE INDEX "expenses_expenseapproval_created_at_20ce09c6" ON "expenses_expenseapproval" ("created_at"); (params ())
CREATE INDEX "expenses_expenseapproval_is_deleted_55a7bee1" ON "expenses_expenseapproval" ("is_deleted"); (params ())
CREATE INDEX "expenses_expenseapproval_is_active_74bff138" ON "expenses_expenseapproval" ("is_active"); (params ())
CREATE INDEX "expenses_expenseapproval_approver_id_5559ed16" ON "expenses_expenseapproval" ("approver_id"); (params ())
CREATE INDEX "expenses_expenseapproval_created_by_id_774a17fc" ON "expenses_expenseapproval" ("created_by_id"); (params ())
CREATE INDEX "expenses_expenseapproval_deleted_by_id_67b80ee0" ON "expenses_expenseapproval" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_expenseapproval_organization_id_bd084ceb" ON "expenses_expenseapproval" ("organization_id"); (params ())
CREATE INDEX "expenses_expenseapproval_updated_by_id_0d7d6d75" ON "expenses_expenseapproval" ("updated_by_id"); (params ())
CREATE INDEX "expenses_expenseapproval_claim_id_71b5e81c" ON "expenses_expenseapproval" ("claim_id"); (params ())
CREATE INDEX "expenses_advancesettlement_created_at_8b84a252" ON "expenses_advancesettlement" ("created_at"); (params ())
CREATE INDEX "expenses_advancesettlement_is_deleted_3509f0a1" ON "expenses_advancesettlement" ("is_deleted"); (params ())
CREATE INDEX "expenses_advancesettlement_is_active_a4c44258" ON "expenses_advancesettlement" ("is_active"); (params ())
CREATE INDEX "expenses_advancesettlement_created_by_id_b4a5a579" ON "expenses_advancesettlement" ("created_by_id"); (params ())
CREATE INDEX "expenses_advancesettlement_deleted_by_id_5c49a39d" ON "expenses_advancesettlement" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_advancesettlement_organization_id_ac5f3fdd" ON "expenses_advancesettlement" ("organization_id"); (params ())
CREATE INDEX "expenses_advancesettlement_payslip_id_2fee1ec3" ON "expenses_advancesettlement" ("payslip_id"); (params ())
CREATE INDEX "expenses_advancesettlement_updated_by_id_baeaeedd" ON "expenses_advancesettlement" ("updated_by_id"); (params ())
CREATE INDEX "expenses_advancesettlement_advance_id_c36608e6" ON "expenses_advancesettlement" ("advance_id"); (params ())
CREATE INDEX "expenses_advancesettlement_expense_claim_id_1b597238" ON "expenses_advancesettlement" ("expense_claim_id"); (params ())
CREATE INDEX "expenses_expenseitem_created_at_4648a22c" ON "expenses_expenseitem" ("created_at"); (params ())
CREATE INDEX "expenses_expenseitem_is_deleted_0869ddac" ON "expenses_expenseitem" ("is_deleted"); (params ())
CREATE INDEX "expenses_expenseitem_is_active_67ce66dc" ON "expenses_expenseitem" ("is_active"); (params ())
CREATE INDEX "expenses_expenseitem_category_id_131b4192" ON "expenses_expenseitem" ("category_id"); (params ())
CREATE INDEX "expenses_expenseitem_claim_id_5aed9929" ON "expenses_expenseitem" ("claim_id"); (params ())
CREATE INDEX "expenses_expenseitem_created_by_id_c03a7105" ON "expenses_expenseitem" ("created_by_id"); (params ())
CREATE INDEX "expenses_expenseitem_deleted_by_id_3bf2c36d" ON "expenses_expenseitem" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_expenseitem_organization_id_99832b4a" ON "expenses_expenseitem" ("organization_id"); (params ())
CREATE INDEX "expenses_expenseitem_updated_by_id_a1e26b45" ON "expenses_expenseitem" ("updated_by_id"); (params ())
CREATE TABLE "new__expenses_expensecategory" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "max_limit_per_claim" decimal NULL, "max_monthly_limit" decimal NULL, "requires_receipt" bool NOT NULL, "requires_approval" bool NOT NULL, "min_amount_for_receipt" decimal NOT NULL, "gl_account" varchar(50) NOT NULL, "cost_center" varchar(50) NOT NULL, "designation_limits" text NOT NULL CHECK ((JSON_VALID("designation_limits") OR "designation_limits" IS NULL)), "display_order" smallint unsigned NOT NULL CHECK ("display_order" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__expenses_expensecategory" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "max_limit_per_claim", "max_monthly_limit", "requires_receipt", "requires_approval", "min_amount_for_receipt", "gl_account", "cost_center", "designation_limits", "display_order", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "max_limit_per_claim", "max_monthly_limit", "requires_receipt", "requires_approval", "min_amount_for_receipt", "gl_account", "cost_center", "designation_limits", "display_order", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "expenses_expensecategory"; (params ())
DROP TABLE "expenses_expensecategory"; (params ())
ALTER TABLE "new__expenses_expensecategory" RENAME TO "expenses_expensecategory"; (params ())
CREATE INDEX "expenses_expensecategory_created_at_164efaf8" ON "expenses_expensecategory" ("created_at"); (params ())
CREATE INDEX "expenses_expensecategory_is_deleted_d8d5c537" ON "expenses_expensecategory" ("is_deleted"); (params ())
CREATE INDEX "expenses_expensecategory_created_by_id_6972e845" ON "expenses_expensecategory" ("created_by_id"); (params ())
CREATE INDEX "expenses_expensecategory_deleted_by_id_463e6e10" ON "expenses_expensecategory" ("deleted_by_id"); (params ())
CREATE INDEX "expenses_expensecategory_organization_id_9f454292" ON "expenses_expensecategory" ("organization_id"); (params ())
CREATE INDEX "expenses_expensecategory_updated_by_id_c52f728e" ON "expenses_expensecategory" ("updated_by_id"); (params ())
CREATE INDEX "expenses_expensecategory_is_active_896bd515" ON "expenses_expensecategory" ("is_active"); (params ())
CREATE TABLE "integrations_apikey" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "key" varchar(64) NOT NULL UNIQUE, "permissions" text NOT NULL CHECK ((JSON_VALID("permissions") OR "permissions" IS NULL)), "rate_limit" integer unsigned NOT NULL CHECK ("rate_limit" >= 0), "expires_at" datetime NULL, "last_used" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "integrations_integration" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "provider" varchar(50) NOT NULL, "config" text NOT NULL CHECK ((JSON_VALID("config") OR "config" IS NULL)), "credentials" text NOT NULL CHECK ((JSON_VALID("credentials") OR "credentials" IS NULL)), "is_connected" bool NOT NULL, "last_sync" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "integrations_webhook" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "url" varchar(200) NOT NULL, "secret" varchar(255) NOT NULL, "events" text NOT NULL CHECK ((JSON_VALID("events") OR "events" IS NULL)), "headers" text NOT NULL CHECK ((JSON_VALID("headers") OR "headers" IS NULL)), "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "integrations_apikey_created_at_1bafce64" ON "integrations_apikey" ("created_at"); (params ())
CREATE INDEX "integrations_apikey_is_deleted_f60edd48" ON "integrations_apikey" ("is_deleted"); (params ())
CREATE INDEX "integrations_apikey_is_active_60c7ad88" ON "integrations_apikey" ("is_active"); (params ())
CREATE INDEX "integrations_apikey_created_by_id_47d9cfad" ON "integrations_apikey" ("created_by_id"); (params ())
CREATE INDEX "integrations_apikey_deleted_by_id_48c9486c" ON "integrations_apikey" ("deleted_by_id"); (params ())
CREATE INDEX "integrations_apikey_organization_id_c3c5ba39" ON "integrations_apikey" ("organization_id"); (params ())
CREATE INDEX "integrations_apikey_updated_by_id_368d1524" ON "integrations_apikey" ("updated_by_id"); (params ())
CREATE INDEX "integration_organiz_d53da8_idx" ON "integrations_apikey" ("organization_id", "created_at"); (params ())
CREATE UNIQUE INDEX "integrations_integration_provider_970afbc9_uniq" ON "integrations_integration" ("provider"); (params ())
CREATE INDEX "integrations_integration_created_at_22a2ed4d" ON "integrations_integration" ("created_at"); (params ())
CREATE INDEX "integrations_integration_is_deleted_946ee7ab" ON "integrations_integration" ("is_deleted"); (params ())
CREATE INDEX "integrations_integration_is_active_6e28b1c9" ON "integrations_integration" ("is_active"); (params ())
CREATE INDEX "integrations_integration_created_by_id_e7d4d0c5" ON "integrations_integration" ("created_by_id"); (params ())
CREATE INDEX "integrations_integration_deleted_by_id_9a1822bd" ON "integrations_integration" ("deleted_by_id"); (params ())
CREATE INDEX "integrations_integration_organization_id_107dc1f1" ON "integrations_integration" ("organization_id"); (params ())
CREATE INDEX "integrations_integration_updated_by_id_3c6c836a" ON "integrations_integration" ("updated_by_id"); (params ())
CREATE INDEX "integrations_webhook_created_at_da85e79c" ON "integrations_webhook" ("created_at"); (params ())
CREATE INDEX "integrations_webhook_is_deleted_10adfa60" ON "integrations_webhook" ("is_deleted"); (params ())
CREATE INDEX "integrations_webhook_created_by_id_4ca2a866" ON "integrations_webhook" ("created_by_id"); (params ())
CREATE INDEX "integrations_webhook_deleted_by_id_b1319c39" ON "integrations_webhook" ("deleted_by_id"); (params ())
CREATE INDEX "integrations_webhook_organization_id_c11656ab" ON "integrations_webhook" ("organization_id"); (params ())
CREATE INDEX "integrations_webhook_updated_by_id_d0bce700" ON "integrations_webhook" ("updated_by_id"); (params ())
CREATE INDEX "integration_organiz_67b70c_idx" ON "integrations_webhook" ("organization_id", "created_at"); (params ())
DROP INDEX "integration_organiz_d53da8_idx"; (params ())
DROP INDEX "integration_organiz_67b70c_idx"; (params ())
CREATE TABLE "new__integrations_webhook" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "url" varchar(200) NOT NULL, "secret" varchar(255) NOT NULL, "events" text NOT NULL CHECK ((JSON_VALID("events") OR "events" IS NULL)), "headers" text NOT NULL CHECK ((JSON_VALID("headers") OR "headers" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__integrations_webhook" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "url", "secret", "events", "headers", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "url", "secret", "events", "headers", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "integrations_webhook"; (params ())
DROP TABLE "integrations_webhook"; (params ())
ALTER TABLE "new__integrations_webhook" RENAME TO "integrations_webhook"; (params ())
CREATE INDEX "integrations_webhook_created_at_da85e79c" ON "integrations_webhook" ("created_at"); (params ())
CREATE INDEX "integrations_webhook_is_deleted_10adfa60" ON "integrations_webhook" ("is_deleted"); (params ())
CREATE INDEX "integrations_webhook_created_by_id_4ca2a866" ON "integrations_webhook" ("created_by_id"); (params ())
CREATE INDEX "integrations_webhook_deleted_by_id_b1319c39" ON "integrations_webhook" ("deleted_by_id"); (params ())
CREATE INDEX "integrations_webhook_organization_id_c11656ab" ON "integrations_webhook" ("organization_id"); (params ())
CREATE INDEX "integrations_webhook_updated_by_id_d0bce700" ON "integrations_webhook" ("updated_by_id"); (params ())
CREATE INDEX "integrations_webhook_is_active_beaa63e0" ON "integrations_webhook" ("is_active"); (params ())
CREATE TABLE "leave_holiday" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "date" date NOT NULL, "is_optional" bool NOT NULL, "is_restricted" bool NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_holiday_locations" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "holiday_id" char(32) NOT NULL REFERENCES "leave_holiday" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NOT NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_holidaycalendar" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "country" varchar(50) NOT NULL, "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "description" text NOT NULL, "is_default" bool NOT NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_holidaycalendar_locations" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "holidaycalendar_id" char(32) NOT NULL REFERENCES "leave_holidaycalendar" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NOT NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_leavepolicy" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "description" text NOT NULL, "sandwich_rule" bool NOT NULL, "probation_leave_allowed" bool NOT NULL, "negative_balance_allowed" bool NOT NULL, "max_negative_balance" decimal NOT NULL, "count_holidays" bool NOT NULL, "count_weekends" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_leaverequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_date" date NOT NULL, "end_date" date NOT NULL, "start_day_type" varchar(20) NOT NULL, "end_day_type" varchar(20) NOT NULL, "total_days" decimal NOT NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "contact_number" varchar(15) NOT NULL, "contact_address" text NOT NULL, "attachment" varchar(100) NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_leaveapproval" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "level" smallint unsigned NOT NULL CHECK ("level" >= 0), "action" varchar(20) NOT NULL, "comments" text NOT NULL, "approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "leave_request_id" char(32) NOT NULL REFERENCES "leave_leaverequest" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_compensatoryleave" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "work_date" date NOT NULL, "work_type" varchar(20) NOT NULL, "reason" text NOT NULL, "hours_worked" decimal NULL, "days_credited" decimal NOT NULL, "expiry_date" date NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "used_in_leave_request_id" char(32) NULL REFERENCES "leave_leaverequest" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_leavetype" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "annual_quota" decimal NOT NULL, "accrual_type" varchar(20) NOT NULL, "carry_forward_allowed" bool NOT NULL, "max_carry_forward" decimal NOT NULL, "encashment_allowed" bool NOT NULL, "max_encashment" decimal NOT NULL, "is_paid" bool NOT NULL, "requires_approval" bool NOT NULL, "requires_attachment" bool NOT NULL, "min_days_notice" smallint unsigned NOT NULL CHECK ("min_days_notice" >= 0), "max_consecutive_days" smallint unsigned NULL CHECK ("max_consecutive_days" >= 0), "applicable_gender" varchar(20) NOT NULL, "applicable_after_months" smallint unsigned NOT NULL CHECK ("applicable_after_months" >= 0), "color" varchar(8) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__leave_leaverequest" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "start_date" date NOT NULL, "end_date" date NOT NULL, "start_day_type" varchar(20) NOT NULL, "end_day_type" varchar(20) NOT NULL, "total_days" decimal NOT NULL, "reason" text NOT NULL, "status" varchar(20) NOT NULL, "contact_number" varchar(15) NOT NULL, "contact_address" text NOT NULL, "attachment" varchar(100) NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "leave_type_id" char(32) NOT NULL REFERENCES "leave_leavetype" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__leave_leaverequest" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "end_date", "start_day_type", "end_day_type", "total_days", "reason", "status", "contact_number", "contact_address", "attachment", "branch_id", "created_by_id", "current_approver_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "leave_type_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "start_date", "end_date", "start_day_type", "end_day_type", "total_days", "reason", "status", "contact_number", "contact_address", "attachment", "branch_id", "created_by_id", "current_approver_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", NULL FROM "leave_leaverequest"; (params ())
DROP TABLE "leave_leaverequest"; (params ())
ALTER TABLE "new__leave_leaverequest" RENAME TO "leave_leaverequest"; (params ())
CREATE INDEX "leave_holiday_created_at_7d57ac17" ON "leave_holiday" ("created_at"); (params ())
CREATE INDEX "leave_holiday_is_deleted_aa767444" ON "leave_holiday" ("is_deleted"); (params ())
CREATE INDEX "leave_holiday_is_active_0d09981d" ON "leave_holiday" ("is_active"); (params ())
CREATE INDEX "leave_holiday_branch_id_3876c9fb" ON "leave_holiday" ("branch_id"); (params ())
CREATE INDEX "leave_holiday_created_by_id_053c9356" ON "leave_holiday" ("created_by_id"); (params ())
CREATE INDEX "leave_holiday_deleted_by_id_37c9de40" ON "leave_holiday" ("deleted_by_id"); (params ())
CREATE INDEX "leave_holiday_organization_id_d190267c" ON "leave_holiday" ("organization_id"); (params ())
CREATE INDEX "leave_holiday_updated_by_id_33501680" ON "leave_holiday" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "leave_holiday_locations_holiday_id_location_id_2329c9c0_uniq" ON "leave_holiday_locations" ("holiday_id", "location_id"); (params ())
CREATE INDEX "leave_holiday_locations_holiday_id_b23266f0" ON "leave_holiday_locations" ("holiday_id"); (params ())
CREATE INDEX "leave_holiday_locations_location_id_1e013bf8" ON "leave_holiday_locations" ("location_id"); (params ())
CREATE UNIQUE INDEX "leave_holidaycalendar_code_year_51225ba8_uniq" ON "leave_holidaycalendar" ("code", "year"); (params ())
CREATE INDEX "leave_holidaycalendar_created_at_09c665ed" ON "leave_holidaycalendar" ("created_at"); (params ())
CREATE INDEX "leave_holidaycalendar_is_deleted_306e1250" ON "leave_holidaycalendar" ("is_deleted"); (params ())
CREATE INDEX "leave_holidaycalendar_created_by_id_396fc70e" ON "leave_holidaycalendar" ("created_by_id"); (params ())
CREATE INDEX "leave_holidaycalendar_deleted_by_id_2de69f92" ON "leave_holidaycalendar" ("deleted_by_id"); (params ())
CREATE INDEX "leave_holidaycalendar_organization_id_1087a634" ON "leave_holidaycalendar" ("organization_id"); (params ())
CREATE INDEX "leave_holidaycalendar_updated_by_id_4a4cabe2" ON "leave_holidaycalendar" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "leave_holidaycalendar_locations_holidaycalendar_id_location_id_095ad913_uniq" ON "leave_holidaycalendar_locations" ("holidaycalendar_id", "location_id"); (params ())
CREATE INDEX "leave_holidaycalendar_locations_holidaycalendar_id_59a56721" ON "leave_holidaycalendar_locations" ("holidaycalendar_id"); (params ())
CREATE INDEX "leave_holidaycalendar_locations_location_id_82da1e1a" ON "leave_holidaycalendar_locations" ("location_id"); (params ())
CREATE INDEX "leave_leavepolicy_created_at_ceb4461f" ON "leave_leavepolicy" ("created_at"); (params ())
CREATE INDEX "leave_leavepolicy_is_deleted_b96ebfea" ON "leave_leavepolicy" ("is_deleted"); (params ())
CREATE INDEX "leave_leavepolicy_is_active_5f3ba6c3" ON "leave_leavepolicy" ("is_active"); (params ())
CREATE INDEX "leave_leavepolicy_created_by_id_4fef6814" ON "leave_leavepolicy" ("created_by_id"); (params ())
CREATE INDEX "leave_leavepolicy_deleted_by_id_c99fdd4c" ON "leave_leavepolicy" ("deleted_by_id"); (params ())
CREATE INDEX "leave_leavepolicy_organization_id_5d987912" ON "leave_leavepolicy" ("organization_id"); (params ())
CREATE INDEX "leave_leavepolicy_updated_by_id_c8813a62" ON "leave_leavepolicy" ("updated_by_id"); (params ())
CREATE INDEX "leave_leaveapproval_created_at_69b9bea6" ON "leave_leaveapproval" ("created_at"); (params ())
CREATE INDEX "leave_leaveapproval_is_deleted_2e1e2d6d" ON "leave_leaveapproval" ("is_deleted"); (params ())
CREATE INDEX "leave_leaveapproval_is_active_5cfa6a1a" ON "leave_leaveapproval" ("is_active"); (params ())
CREATE INDEX "leave_leaveapproval_approver_id_d90effc4" ON "leave_leaveapproval" ("approver_id"); (params ())
CREATE INDEX "leave_leaveapproval_branch_id_3e6f2f6c" ON "leave_leaveapproval" ("branch_id"); (params ())
CREATE INDEX "leave_leaveapproval_created_by_id_6627da56" ON "leave_leaveapproval" ("created_by_id"); (params ())
CREATE INDEX "leave_leaveapproval_deleted_by_id_103a071b" ON "leave_leaveapproval" ("deleted_by_id"); (params ())
CREATE INDEX "leave_leaveapproval_organization_id_35d61a2c" ON "leave_leaveapproval" ("organization_id"); (params ())
CREATE INDEX "leave_leaveapproval_updated_by_id_6917f59b" ON "leave_leaveapproval" ("updated_by_id"); (params ())
CREATE INDEX "leave_leaveapproval_leave_request_id_fd4e48ad" ON "leave_leaveapproval" ("leave_request_id"); (params ())
CREATE INDEX "leave_compensatoryleave_created_at_07dcbaa7" ON "leave_compensatoryleave" ("created_at"); (params ())
CREATE INDEX "leave_compensatoryleave_is_deleted_30f9eee2" ON "leave_compensatoryleave" ("is_deleted"); (params ())
CREATE INDEX "leave_compensatoryleave_is_active_9d6e3aff" ON "leave_compensatoryleave" ("is_active"); (params ())
CREATE INDEX "leave_compensatoryleave_approved_by_id_5cbe6f95" ON "leave_compensatoryleave" ("approved_by_id"); (params ())
CREATE INDEX "leave_compensatoryleave_created_by_id_cf012750" ON "leave_compensatoryleave" ("created_by_id"); (params ())
CREATE INDEX "leave_compensatoryleave_deleted_by_id_70277a8f" ON "leave_compensatoryleave" ("deleted_by_id"); (params ())
CREATE INDEX "leave_compensatoryleave_employee_id_9ac26c24" ON "leave_compensatoryleave" ("employee_id"); (params ())
CREATE INDEX "leave_compensatoryleave_organization_id_08493e49" ON "leave_compensatoryleave" ("organization_id"); (params ())
CREATE INDEX "leave_compensatoryleave_updated_by_id_367a578d" ON "leave_compensatoryleave" ("updated_by_id"); (params ())
CREATE INDEX "leave_compensatoryleave_used_in_leave_request_id_46581e8b" ON "leave_compensatoryleave" ("used_in_leave_request_id"); (params ())
CREATE INDEX "leave_leavetype_created_at_6aedbe43" ON "leave_leavetype" ("created_at"); (params ())
CREATE INDEX "leave_leavetype_is_deleted_4cdfc06e" ON "leave_leavetype" ("is_deleted"); (params ())
CREATE INDEX "leave_leavetype_is_active_1f9677e5" ON "leave_leavetype" ("is_active"); (params ())
CREATE INDEX "leave_leavetype_created_by_id_351073eb" ON "leave_leavetype" ("created_by_id"); (params ())
CREATE INDEX "leave_leavetype_deleted_by_id_0ecd4a8b" ON "leave_leavetype" ("deleted_by_id"); (params ())
CREATE INDEX "leave_leavetype_organization_id_b6613b54" ON "leave_leavetype" ("organization_id"); (params ())
CREATE INDEX "leave_leavetype_updated_by_id_e25d4a48" ON "leave_leavetype" ("updated_by_id"); (params ())
CREATE INDEX "leave_leaverequest_created_at_295307f8" ON "leave_leaverequest" ("created_at"); (params ())
CREATE INDEX "leave_leaverequest_is_deleted_5557b166" ON "leave_leaverequest" ("is_deleted"); (params ())
CREATE INDEX "leave_leaverequest_is_active_6ff4586c" ON "leave_leaverequest" ("is_active"); (params ())
CREATE INDEX "leave_leaverequest_branch_id_a53eb57c" ON "leave_leaverequest" ("branch_id"); (params ())
CREATE INDEX "leave_leaverequest_created_by_id_138d1e03" ON "leave_leaverequest" ("created_by_id"); (params ())
CREATE INDEX "leave_leaverequest_current_approver_id_983972ff" ON "leave_leaverequest" ("current_approver_id"); (params ())
CREATE INDEX "leave_leaverequest_deleted_by_id_3c592c2f" ON "leave_leaverequest" ("deleted_by_id"); (params ())
CREATE INDEX "leave_leaverequest_employee_id_bf5f2be5" ON "leave_leaverequest" ("employee_id"); (params ())
CREATE INDEX "leave_leaverequest_organization_id_2465c4dc" ON "leave_leaverequest" ("organization_id"); (params ())
CREATE INDEX "leave_leaverequest_updated_by_id_c19a078b" ON "leave_leaverequest" ("updated_by_id"); (params ())
CREATE INDEX "leave_leaverequest_leave_type_id_956c23f8" ON "leave_leaverequest" ("leave_type_id"); (params ())
CREATE TABLE "leave_leaveencashment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "days_requested" decimal NOT NULL, "days_approved" decimal NULL, "per_day_amount" decimal NULL, "total_amount" decimal NULL, "status" varchar(20) NOT NULL, "approved_at" datetime NULL, "rejection_reason" text NOT NULL, "approved_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "paid_in_payroll_id" char(32) NULL REFERENCES "payroll_payrollrun" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "leave_type_id" char(32) NOT NULL REFERENCES "leave_leavetype" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_holidaycalendarentry" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "date" date NOT NULL, "day_of_week" varchar(10) NOT NULL, "is_optional" bool NOT NULL, "is_restricted" bool NOT NULL, "description" text NOT NULL, "calendar_id" char(32) NOT NULL REFERENCES "leave_holidaycalendar" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "leave_leavebalance" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "opening_balance" decimal NOT NULL, "accrued" decimal NOT NULL, "taken" decimal NOT NULL, "adjustment" decimal NOT NULL, "carry_forward" decimal NOT NULL, "encashed" decimal NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "leave_type_id" char(32) NOT NULL REFERENCES "leave_leavetype" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "leave_leaveencashment_created_at_2a8e52ff" ON "leave_leaveencashment" ("created_at"); (params ())
CREATE INDEX "leave_leaveencashment_is_deleted_83ae95be" ON "leave_leaveencashment" ("is_deleted"); (params ())
CREATE INDEX "leave_leaveencashment_is_active_4d9019a1" ON "leave_leaveencashment" ("is_active"); (params ())
CREATE INDEX "leave_leaveencashment_approved_by_id_65c055ad" ON "leave_leaveencashment" ("approved_by_id"); (params ())
CREATE INDEX "leave_leaveencashment_created_by_id_13bef07b" ON "leave_leaveencashment" ("created_by_id"); (params ())
CREATE INDEX "leave_leaveencashment_deleted_by_id_922dd54f" ON "leave_leaveencashment" ("deleted_by_id"); (params ())
CREATE INDEX "leave_leaveencashment_employee_id_3d3c017b" ON "leave_leaveencashment" ("employee_id"); (params ())
CREATE INDEX "leave_leaveencashment_organization_id_cf6c7d92" ON "leave_leaveencashment" ("organization_id"); (params ())
CREATE INDEX "leave_leaveencashment_paid_in_payroll_id_5268ce47" ON "leave_leaveencashment" ("paid_in_payroll_id"); (params ())
CREATE INDEX "leave_leaveencashment_updated_by_id_050a44a0" ON "leave_leaveencashment" ("updated_by_id"); (params ())
CREATE INDEX "leave_leaveencashment_leave_type_id_5cd6a213" ON "leave_leaveencashment" ("leave_type_id"); (params ())
CREATE UNIQUE INDEX "leave_holidaycalendarentry_calendar_id_date_19ff8016_uniq" ON "leave_holidaycalendarentry" ("calendar_id", "date"); (params ())
CREATE INDEX "leave_holidaycalendarentry_created_at_c51552ee" ON "leave_holidaycalendarentry" ("created_at"); (params ())
CREATE INDEX "leave_holidaycalendarentry_is_deleted_6ce0da03" ON "leave_holidaycalendarentry" ("is_deleted"); (params ())
CREATE INDEX "leave_holidaycalendarentry_is_active_598ceaff" ON "leave_holidaycalendarentry" ("is_active"); (params ())
CREATE INDEX "leave_holidaycalendarentry_calendar_id_4191d1c1" ON "leave_holidaycalendarentry" ("calendar_id"); (params ())
CREATE INDEX "leave_holidaycalendarentry_created_by_id_0126422d" ON "leave_holidaycalendarentry" ("created_by_id"); (params ())
CREATE INDEX "leave_holidaycalendarentry_deleted_by_id_d202ea36" ON "leave_holidaycalendarentry" ("deleted_by_id"); (params ())
CREATE INDEX "leave_holidaycalendarentry_organization_id_c534d8b5" ON "leave_holidaycalendarentry" ("organization_id"); (params ())
CREATE INDEX "leave_holidaycalendarentry_updated_by_id_10055ec1" ON "leave_holidaycalendarentry" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "leave_leavebalance_employee_id_leave_type_id_year_0f3741ca_uniq" ON "leave_leavebalance" ("employee_id", "leave_type_id", "year"); (params ())
CREATE INDEX "leave_leavebalance_created_at_b3cb5b11" ON "leave_leavebalance" ("created_at"); (params ())
CREATE INDEX "leave_leavebalance_is_deleted_5f8e2b4a" ON "leave_leavebalance" ("is_deleted"); (params ())
CREATE INDEX "leave_leavebalance_is_active_0456e621" ON "leave_leavebalance" ("is_active"); (params ())
CREATE INDEX "leave_leavebalance_created_by_id_d77064bf" ON "leave_leavebalance" ("created_by_id"); (params ())
CREATE INDEX "leave_leavebalance_deleted_by_id_19fb2e01" ON "leave_leavebalance" ("deleted_by_id"); (params ())
CREATE INDEX "leave_leavebalance_employee_id_6aa4c408" ON "leave_leavebalance" ("employee_id"); (params ())
CREATE INDEX "leave_leavebalance_organization_id_398ed394" ON "leave_leavebalance" ("organization_id"); (params ())
CREATE INDEX "leave_leavebalance_updated_by_id_5f075ed9" ON "leave_leavebalance" ("updated_by_id"); (params ())
CREATE INDEX "leave_leavebalance_leave_type_id_a8da0788" ON "leave_leavebalance" ("leave_type_id"); (params ())
CREATE TABLE "new__leave_holidaycalendar" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "country" varchar(50) NOT NULL, "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "description" text NOT NULL, "is_default" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__leave_holidaycalendar" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "country", "year", "description", "is_default", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "country", "year", "description", "is_default", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "leave_holidaycalendar"; (params ())
DROP TABLE "leave_holidaycalendar"; (params ())
ALTER TABLE "new__leave_holidaycalendar" RENAME TO "leave_holidaycalendar"; (params ())
CREATE UNIQUE INDEX "leave_holidaycalendar_code_year_51225ba8_uniq" ON "leave_holidaycalendar" ("code", "year"); (params ())
CREATE INDEX "leave_holidaycalendar_created_at_09c665ed" ON "leave_holidaycalendar" ("created_at"); (params ())
CREATE INDEX "leave_holidaycalendar_is_deleted_306e1250" ON "leave_holidaycalendar" ("is_deleted"); (params ())
CREATE INDEX "leave_holidaycalendar_created_by_id_396fc70e" ON "leave_holidaycalendar" ("created_by_id"); (params ())
CREATE INDEX "leave_holidaycalendar_deleted_by_id_2de69f92" ON "leave_holidaycalendar" ("deleted_by_id"); (params ())
CREATE INDEX "leave_holidaycalendar_organization_id_1087a634" ON "leave_holidaycalendar" ("organization_id"); (params ())
CREATE INDEX "leave_holidaycalendar_updated_by_id_4a4cabe2" ON "leave_holidaycalendar" ("updated_by_id"); (params ())
CREATE INDEX "leave_holidaycalendar_is_active_24a05c77" ON "leave_holidaycalendar" ("is_active"); (params ())
CREATE TABLE "notifications_notificationpreference" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "email_enabled" bool NOT NULL, "push_enabled" bool NOT NULL, "sms_enabled" bool NOT NULL, "leave_notifications" bool NOT NULL, "attendance_notifications" bool NOT NULL, "payroll_notifications" bool NOT NULL, "task_notifications" bool NOT NULL, "announcement_notifications" bool NOT NULL, "quiet_hours_enabled" bool NOT NULL, "quiet_hours_start" time NULL, "quiet_hours_end" time NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "user_id" char(32) NOT NULL UNIQUE REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "notifications_notificationtemplate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL, "subject" varchar(255) NOT NULL, "body" text NOT NULL, "channel" varchar(20) NOT NULL, "variables" text NOT NULL CHECK ((JSON_VALID("variables") OR "variables" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "notifications_notification" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "channel" varchar(20) NOT NULL, "subject" varchar(255) NOT NULL, "body" text NOT NULL, "status" varchar(20) NOT NULL, "sent_at" datetime NULL, "read_at" datetime NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "recipient_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NULL REFERENCES "notifications_notificationtemplate" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "notifications_notificationpreference_created_at_1434e59f" ON "notifications_notificationpreference" ("created_at"); (params ())
CREATE INDEX "notifications_notificationpreference_is_deleted_2c8dacc3" ON "notifications_notificationpreference" ("is_deleted"); (params ())
CREATE INDEX "notifications_notificationpreference_is_active_e60ac311" ON "notifications_notificationpreference" ("is_active"); (params ())
CREATE INDEX "notifications_notificationpreference_created_by_id_8743df55" ON "notifications_notificationpreference" ("created_by_id"); (params ())
CREATE INDEX "notifications_notificationpreference_deleted_by_id_1b78928b" ON "notifications_notificationpreference" ("deleted_by_id"); (params ())
CREATE INDEX "notifications_notificationpreference_organization_id_5203b766" ON "notifications_notificationpreference" ("organization_id"); (params ())
CREATE INDEX "notifications_notificationpreference_updated_by_id_f73d1994" ON "notifications_notificationpreference" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "notifications_notificationtemplate_organization_id_code_fedec75c_uniq" ON "notifications_notificationtemplate" ("organization_id", "code"); (params ())
CREATE INDEX "notifications_notificationtemplate_created_at_01280efa" ON "notifications_notificationtemplate" ("created_at"); (params ())
CREATE INDEX "notifications_notificationtemplate_is_deleted_cf1cb416" ON "notifications_notificationtemplate" ("is_deleted"); (params ())
CREATE INDEX "notifications_notificationtemplate_is_active_4f13bdbe" ON "notifications_notificationtemplate" ("is_active"); (params ())
CREATE INDEX "notifications_notificationtemplate_created_by_id_6cc57002" ON "notifications_notificationtemplate" ("created_by_id"); (params ())
CREATE INDEX "notifications_notificationtemplate_deleted_by_id_b9686bb5" ON "notifications_notificationtemplate" ("deleted_by_id"); (params ())
CREATE INDEX "notifications_notificationtemplate_organization_id_8a9e0134" ON "notifications_notificationtemplate" ("organization_id"); (params ())
CREATE INDEX "notifications_notificationtemplate_updated_by_id_2f49b580" ON "notifications_notificationtemplate" ("updated_by_id"); (params ())
CREATE INDEX "notifications_notification_created_at_10160fdd" ON "notifications_notification" ("created_at"); (params ())
CREATE INDEX "notifications_notification_is_deleted_0cd19779" ON "notifications_notification" ("is_deleted"); (params ())
CREATE INDEX "notifications_notification_is_active_9b740d73" ON "notifications_notification" ("is_active"); (params ())
CREATE INDEX "notifications_notification_created_by_id_44297423" ON "notifications_notification" ("created_by_id"); (params ())
CREATE INDEX "notifications_notification_deleted_by_id_612d2553" ON "notifications_notification" ("deleted_by_id"); (params ())
CREATE INDEX "notifications_notification_organization_id_696639cb" ON "notifications_notification" ("organization_id"); (params ())
CREATE INDEX "notifications_notification_recipient_id_d055f3f0" ON "notifications_notification" ("recipient_id"); (params ())
CREATE INDEX "notifications_notification_updated_by_id_120f5f7a" ON "notifications_notification" ("updated_by_id"); (params ())
CREATE INDEX "notifications_notification_template_id_4027a99c" ON "notifications_notification" ("template_id"); (params ())
CREATE TABLE "new__notifications_notification" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "channel" varchar(20) NOT NULL, "subject" varchar(255) NOT NULL, "body" text NOT NULL, "status" varchar(20) NOT NULL, "sent_at" datetime NULL, "read_at" datetime NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "recipient_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NULL REFERENCES "notifications_notificationtemplate" ("id") DEFERRABLE INITIALLY DEFERRED, "delivery_attempts" smallint unsigned NOT NULL CHECK ("delivery_attempts" >= 0)); (params None)
INSERT INTO "new__notifications_notification" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "channel", "subject", "body", "status", "sent_at", "read_at", "entity_type", "entity_id", "created_by_id", "deleted_by_id", "organization_id", "recipient_id", "updated_by_id", "template_id", "delivery_attempts") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "channel", "subject", "body", "status", "sent_at", "read_at", "entity_type", "entity_id", "created_by_id", "deleted_by_id", "organization_id", "recipient_id", "updated_by_id", "template_id", 0 FROM "notifications_notification"; (params ())
DROP TABLE "notifications_notification"; (params ())
ALTER TABLE "new__notifications_notification" RENAME TO "notifications_notification"; (params ())
CREATE INDEX "notifications_notification_created_at_10160fdd" ON "notifications_notification" ("created_at"); (params ())
CREATE INDEX "notifications_notification_is_deleted_0cd19779" ON "notifications_notification" ("is_deleted"); (params ())
CREATE INDEX "notifications_notification_is_active_9b740d73" ON "notifications_notification" ("is_active"); (params ())
CREATE INDEX "notifications_notification_created_by_id_44297423" ON "notifications_notification" ("created_by_id"); (params ())
CREATE INDEX "notifications_notification_deleted_by_id_612d2553" ON "notifications_notification" ("deleted_by_id"); (params ())
CREATE INDEX "notifications_notification_organization_id_696639cb" ON "notifications_notification" ("organization_id"); (params ())
CREATE INDEX "notifications_notification_recipient_id_d055f3f0" ON "notifications_notification" ("recipient_id"); (params ())
CREATE INDEX "notifications_notification_updated_by_id_120f5f7a" ON "notifications_notification" ("updated_by_id"); (params ())
CREATE INDEX "notifications_notification_template_id_4027a99c" ON "notifications_notification" ("template_id"); (params ())
CREATE TABLE "new__notifications_notification" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "channel" varchar(20) NOT NULL, "subject" varchar(255) NOT NULL, "body" text NOT NULL, "status" varchar(20) NOT NULL, "sent_at" datetime NULL, "read_at" datetime NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "recipient_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NULL REFERENCES "notifications_notificationtemplate" ("id") DEFERRABLE INITIALLY DEFERRED, "delivery_attempts" smallint unsigned NOT NULL CHECK ("delivery_attempts" >= 0), "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL))); (params None)
INSERT INTO "new__notifications_notification" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "channel", "subject", "body", "status", "sent_at", "read_at", "entity_type", "entity_id", "created_by_id", "deleted_by_id", "organization_id", "recipient_id", "updated_by_id", "template_id", "delivery_attempts", "metadata") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "channel", "subject", "body", "status", "sent_at", "read_at", "entity_type", "entity_id", "created_by_id", "deleted_by_id", "organization_id", "recipient_id", "updated_by_id", "template_id", "delivery_attempts", '{}' FROM "notifications_notification"; (params ())
DROP TABLE "notifications_notification"; (params ())
ALTER TABLE "new__notifications_notification" RENAME TO "notifications_notification"; (params ())
CREATE INDEX "notifications_notification_created_at_10160fdd" ON "notifications_notification" ("created_at"); (params ())
CREATE INDEX "notifications_notification_is_deleted_0cd19779" ON "notifications_notification" ("is_deleted"); (params ())
CREATE INDEX "notifications_notification_is_active_9b740d73" ON "notifications_notification" ("is_active"); (params ())
CREATE INDEX "notifications_notification_created_by_id_44297423" ON "notifications_notification" ("created_by_id"); (params ())
CREATE INDEX "notifications_notification_deleted_by_id_612d2553" ON "notifications_notification" ("deleted_by_id"); (params ())
CREATE INDEX "notifications_notification_organization_id_696639cb" ON "notifications_notification" ("organization_id"); (params ())
CREATE INDEX "notifications_notification_recipient_id_d055f3f0" ON "notifications_notification" ("recipient_id"); (params ())
CREATE INDEX "notifications_notification_updated_by_id_120f5f7a" ON "notifications_notification" ("updated_by_id"); (params ())
CREATE INDEX "notifications_notification_template_id_4027a99c" ON "notifications_notification" ("template_id"); (params ())
CREATE TABLE "new__notifications_notification" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "channel" varchar(20) NOT NULL, "subject" varchar(255) NOT NULL, "body" text NOT NULL, "status" varchar(20) NOT NULL, "sent_at" datetime NULL, "read_at" datetime NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "recipient_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NULL REFERENCES "notifications_notificationtemplate" ("id") DEFERRABLE INITIALLY DEFERRED, "delivery_attempts" smallint unsigned NOT NULL CHECK ("delivery_attempts" >= 0), "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "priority" varchar(10) NOT NULL); (params None)
INSERT INTO "new__notifications_notification" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "channel", "subject", "body", "status", "sent_at", "read_at", "entity_type", "entity_id", "created_by_id", "deleted_by_id", "organization_id", "recipient_id", "updated_by_id", "template_id", "delivery_attempts", "metadata", "priority") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "channel", "subject", "body", "status", "sent_at", "read_at", "entity_type", "entity_id", "created_by_id", "deleted_by_id", "organization_id", "recipient_id", "updated_by_id", "template_id", "delivery_attempts", "metadata", 'normal' FROM "notifications_notification"; (params ())
DROP TABLE "notifications_notification"; (params ())
ALTER TABLE "new__notifications_notification" RENAME TO "notifications_notification"; (params ())
CREATE INDEX "notifications_notification_created_at_10160fdd" ON "notifications_notification" ("created_at"); (params ())
CREATE INDEX "notifications_notification_is_deleted_0cd19779" ON "notifications_notification" ("is_deleted"); (params ())
CREATE INDEX "notifications_notification_is_active_9b740d73" ON "notifications_notification" ("is_active"); (params ())
CREATE INDEX "notifications_notification_created_by_id_44297423" ON "notifications_notification" ("created_by_id"); (params ())
CREATE INDEX "notifications_notification_deleted_by_id_612d2553" ON "notifications_notification" ("deleted_by_id"); (params ())
CREATE INDEX "notifications_notification_organization_id_696639cb" ON "notifications_notification" ("organization_id"); (params ())
CREATE INDEX "notifications_notification_recipient_id_d055f3f0" ON "notifications_notification" ("recipient_id"); (params ())
CREATE INDEX "notifications_notification_updated_by_id_120f5f7a" ON "notifications_notification" ("updated_by_id"); (params ())
CREATE INDEX "notifications_notification_template_id_4027a99c" ON "notifications_notification" ("template_id"); (params ())
ALTER TABLE "notifications_notification" ADD COLUMN "scheduled_for" datetime NULL; (params [])
CREATE TABLE "onboarding_employeeonboarding" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "joining_date" date NOT NULL, "start_date" date NOT NULL, "target_completion_date" date NOT NULL, "actual_completion_date" date NULL, "status" varchar(20) NOT NULL, "total_tasks" smallint unsigned NOT NULL CHECK ("total_tasks" >= 0), "completed_tasks" smallint unsigned NOT NULL CHECK ("completed_tasks" >= 0), "progress_percentage" smallint unsigned NOT NULL CHECK ("progress_percentage" >= 0), "notes" text NOT NULL, "buddy_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL UNIQUE REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "hr_responsible_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "onboarding_onboardingdocument" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "document_type" varchar(20) NOT NULL, "document_name" varchar(100) NOT NULL, "file" varchar(100) NOT NULL, "is_mandatory" bool NOT NULL, "status" varchar(20) NOT NULL, "verified_at" datetime NULL, "rejection_reason" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "onboarding_id" char(32) NOT NULL REFERENCES "onboarding_employeeonboarding" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "onboarding_onboardingtasktemplate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "description" text NOT NULL, "stage" varchar(20) NOT NULL, "assigned_to_type" varchar(20) NOT NULL, "due_days_offset" smallint NOT NULL, "is_mandatory" bool NOT NULL, "requires_attachment" bool NOT NULL, "requires_acknowledgement" bool NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0), "assigned_to_role_id" char(32) NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "depends_on_id" char(32) NULL REFERENCES "onboarding_onboardingtasktemplate" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "onboarding_onboardingtaskprogress" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "description" text NOT NULL, "stage" varchar(20) NOT NULL, "is_mandatory" bool NOT NULL, "due_date" date NOT NULL, "status" varchar(20) NOT NULL, "started_at" datetime NULL, "completed_at" datetime NULL, "notes" text NOT NULL, "attachment" varchar(100) NULL, "acknowledged" bool NOT NULL, "assigned_to_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "completed_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "onboarding_id" char(32) NOT NULL REFERENCES "onboarding_employeeonboarding" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "task_template_id" char(32) NULL REFERENCES "onboarding_onboardingtasktemplate" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "onboarding_onboardingtemplate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "days_before_joining" smallint unsigned NOT NULL CHECK ("days_before_joining" >= 0), "days_to_complete" smallint unsigned NOT NULL CHECK ("days_to_complete" >= 0), "is_default" bool NOT NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__onboarding_onboardingtasktemplate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "description" text NOT NULL, "stage" varchar(20) NOT NULL, "assigned_to_type" varchar(20) NOT NULL, "due_days_offset" smallint NOT NULL, "is_mandatory" bool NOT NULL, "requires_attachment" bool NOT NULL, "requires_acknowledgement" bool NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0), "assigned_to_role_id" char(32) NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NOT NULL REFERENCES "onboarding_onboardingtemplate" ("id") DEFERRABLE INITIALLY DEFERRED, "depends_on_id" char(32) NULL REFERENCES "onboarding_onboardingtasktemplate" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__onboarding_onboardingtasktemplate" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "title", "description", "stage", "assigned_to_type", "due_days_offset", "is_mandatory", "requires_attachment", "requires_acknowledgement", "order", "assigned_to_role_id", "created_by_id", "deleted_by_id", "depends_on_id", "organization_id", "updated_by_id", "template_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "title", "description", "stage", "assigned_to_type", "due_days_offset", "is_mandatory", "requires_attachment", "requires_acknowledgement", "order", "assigned_to_role_id", "created_by_id", "deleted_by_id", "depends_on_id", "organization_id", "updated_by_id", NULL FROM "onboarding_onboardingtasktemplate"; (params ())
DROP TABLE "onboarding_onboardingtasktemplate"; (params ())
ALTER TABLE "new__onboarding_onboardingtasktemplate" RENAME TO "onboarding_onboardingtasktemplate"; (params ())
CREATE INDEX "onboarding_employeeonboarding_created_at_99cae890" ON "onboarding_employeeonboarding" ("created_at"); (params ())
CREATE INDEX "onboarding_employeeonboarding_is_deleted_b47f6e03" ON "onboarding_employeeonboarding" ("is_deleted"); (params ())
CREATE INDEX "onboarding_employeeonboarding_is_active_9ccf07f5" ON "onboarding_employeeonboarding" ("is_active"); (params ())
CREATE INDEX "onboarding_employeeonboarding_buddy_id_cd765d4b" ON "onboarding_employeeonboarding" ("buddy_id"); (params ())
CREATE INDEX "onboarding_employeeonboarding_created_by_id_a9085174" ON "onboarding_employeeonboarding" ("created_by_id"); (params ())
CREATE INDEX "onboarding_employeeonboarding_deleted_by_id_9bdff29d" ON "onboarding_employeeonboarding" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_employeeonboarding_hr_responsible_id_5d7b4064" ON "onboarding_employeeonboarding" ("hr_responsible_id"); (params ())
CREATE INDEX "onboarding_employeeonboarding_organization_id_4328d327" ON "onboarding_employeeonboarding" ("organization_id"); (params ())
CREATE INDEX "onboarding_employeeonboarding_updated_by_id_d7130c8a" ON "onboarding_employeeonboarding" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_created_at_b0174f94" ON "onboarding_onboardingdocument" ("created_at"); (params ())
CREATE INDEX "onboarding_onboardingdocument_is_deleted_f1257d93" ON "onboarding_onboardingdocument" ("is_deleted"); (params ())
CREATE INDEX "onboarding_onboardingdocument_is_active_f9585d2d" ON "onboarding_onboardingdocument" ("is_active"); (params ())
CREATE INDEX "onboarding_onboardingdocument_created_by_id_6578a2ba" ON "onboarding_onboardingdocument" ("created_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_deleted_by_id_b758665c" ON "onboarding_onboardingdocument" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_onboarding_id_9821b66c" ON "onboarding_onboardingdocument" ("onboarding_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_organization_id_cb2ed514" ON "onboarding_onboardingdocument" ("organization_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_updated_by_id_ec73fefd" ON "onboarding_onboardingdocument" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_verified_by_id_66180394" ON "onboarding_onboardingdocument" ("verified_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_created_at_4ed9eb38" ON "onboarding_onboardingtaskprogress" ("created_at"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_is_deleted_fff32e65" ON "onboarding_onboardingtaskprogress" ("is_deleted"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_is_active_49a631d3" ON "onboarding_onboardingtaskprogress" ("is_active"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_assigned_to_id_e2bb68eb" ON "onboarding_onboardingtaskprogress" ("assigned_to_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_completed_by_id_351e50f8" ON "onboarding_onboardingtaskprogress" ("completed_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_created_by_id_54bfab4e" ON "onboarding_onboardingtaskprogress" ("created_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_deleted_by_id_d2c7c11c" ON "onboarding_onboardingtaskprogress" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_onboarding_id_23b44331" ON "onboarding_onboardingtaskprogress" ("onboarding_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_organization_id_90550c0b" ON "onboarding_onboardingtaskprogress" ("organization_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_updated_by_id_3cf54c18" ON "onboarding_onboardingtaskprogress" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtaskprogress_task_template_id_bb11e2c4" ON "onboarding_onboardingtaskprogress" ("task_template_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_created_at_d0d82018" ON "onboarding_onboardingtemplate" ("created_at"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_is_deleted_afaf27cc" ON "onboarding_onboardingtemplate" ("is_deleted"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_created_by_id_818c8640" ON "onboarding_onboardingtemplate" ("created_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_deleted_by_id_04317a9d" ON "onboarding_onboardingtemplate" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_department_id_d58a2df6" ON "onboarding_onboardingtemplate" ("department_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_designation_id_0739ddce" ON "onboarding_onboardingtemplate" ("designation_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_location_id_4743e3e0" ON "onboarding_onboardingtemplate" ("location_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_organization_id_36d84033" ON "onboarding_onboardingtemplate" ("organization_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_updated_by_id_076e44ba" ON "onboarding_onboardingtemplate" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_created_at_e7f8087f" ON "onboarding_onboardingtasktemplate" ("created_at"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_is_deleted_9886a4d9" ON "onboarding_onboardingtasktemplate" ("is_deleted"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_is_active_e1aad508" ON "onboarding_onboardingtasktemplate" ("is_active"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_assigned_to_role_id_b859c994" ON "onboarding_onboardingtasktemplate" ("assigned_to_role_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_created_by_id_50699371" ON "onboarding_onboardingtasktemplate" ("created_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_deleted_by_id_d425865d" ON "onboarding_onboardingtasktemplate" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_organization_id_467d1dc3" ON "onboarding_onboardingtasktemplate" ("organization_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_updated_by_id_405513da" ON "onboarding_onboardingtasktemplate" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_template_id_022978b4" ON "onboarding_onboardingtasktemplate" ("template_id"); (params ())
CREATE INDEX "onboarding_onboardingtasktemplate_depends_on_id_f99ba08f" ON "onboarding_onboardingtasktemplate" ("depends_on_id"); (params ())
ALTER TABLE "onboarding_employeeonboarding" ADD COLUMN "template_id" char(32) NULL REFERENCES "onboarding_onboardingtemplate" ("id") DEFERRABLE INITIALLY DEFERRED; (params [])
CREATE INDEX "onboarding_employeeonboarding_template_id_a03ea8eb" ON "onboarding_employeeonboarding" ("template_id"); (params ())
CREATE TABLE "new__onboarding_onboardingdocument" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "document_type" varchar(20) NOT NULL, "document_name" varchar(100) NOT NULL, "file" varchar(100) NOT NULL, "is_mandatory" bool NOT NULL, "status" varchar(20) NOT NULL, "verified_at" datetime NULL, "rejection_reason" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "onboarding_id" char(32) NOT NULL REFERENCES "onboarding_employeeonboarding" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "verified_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "file_size" integer unsigned NOT NULL CHECK ("file_size" >= 0)); (params None)
INSERT INTO "new__onboarding_onboardingdocument" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "document_type", "document_name", "file", "is_mandatory", "status", "verified_at", "rejection_reason", "created_by_id", "deleted_by_id", "onboarding_id", "organization_id", "updated_by_id", "verified_by_id", "file_size") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "document_type", "document_name", "file", "is_mandatory", "status", "verified_at", "rejection_reason", "created_by_id", "deleted_by_id", "onboarding_id", "organization_id", "updated_by_id", "verified_by_id", 0 FROM "onboarding_onboardingdocument"; (params ())
DROP TABLE "onboarding_onboardingdocument"; (params ())
ALTER TABLE "new__onboarding_onboardingdocument" RENAME TO "onboarding_onboardingdocument"; (params ())
CREATE INDEX "onboarding_onboardingdocument_created_at_b0174f94" ON "onboarding_onboardingdocument" ("created_at"); (params ())
CREATE INDEX "onboarding_onboardingdocument_is_deleted_f1257d93" ON "onboarding_onboardingdocument" ("is_deleted"); (params ())
CREATE INDEX "onboarding_onboardingdocument_is_active_f9585d2d" ON "onboarding_onboardingdocument" ("is_active"); (params ())
CREATE INDEX "onboarding_onboardingdocument_created_by_id_6578a2ba" ON "onboarding_onboardingdocument" ("created_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_deleted_by_id_b758665c" ON "onboarding_onboardingdocument" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_onboarding_id_9821b66c" ON "onboarding_onboardingdocument" ("onboarding_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_organization_id_cb2ed514" ON "onboarding_onboardingdocument" ("organization_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_updated_by_id_ec73fefd" ON "onboarding_onboardingdocument" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingdocument_verified_by_id_66180394" ON "onboarding_onboardingdocument" ("verified_by_id"); (params ())
CREATE TABLE "new__onboarding_onboardingtemplate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "days_before_joining" smallint unsigned NOT NULL CHECK ("days_before_joining" >= 0), "days_to_complete" smallint unsigned NOT NULL CHECK ("days_to_complete" >= 0), "is_default" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__onboarding_onboardingtemplate" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "days_before_joining", "days_to_complete", "is_default", "created_by_id", "deleted_by_id", "department_id", "designation_id", "location_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "days_before_joining", "days_to_complete", "is_default", "created_by_id", "deleted_by_id", "department_id", "designation_id", "location_id", "organization_id", "updated_by_id", "is_active" FROM "onboarding_onboardingtemplate"; (params ())
DROP TABLE "onboarding_onboardingtemplate"; (params ())
ALTER TABLE "new__onboarding_onboardingtemplate" RENAME TO "onboarding_onboardingtemplate"; (params ())
CREATE INDEX "onboarding_onboardingtemplate_created_at_d0d82018" ON "onboarding_onboardingtemplate" ("created_at"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_is_deleted_afaf27cc" ON "onboarding_onboardingtemplate" ("is_deleted"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_created_by_id_818c8640" ON "onboarding_onboardingtemplate" ("created_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_deleted_by_id_04317a9d" ON "onboarding_onboardingtemplate" ("deleted_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_department_id_d58a2df6" ON "onboarding_onboardingtemplate" ("department_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_designation_id_0739ddce" ON "onboarding_onboardingtemplate" ("designation_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_location_id_4743e3e0" ON "onboarding_onboardingtemplate" ("location_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_organization_id_36d84033" ON "onboarding_onboardingtemplate" ("organization_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_updated_by_id_076e44ba" ON "onboarding_onboardingtemplate" ("updated_by_id"); (params ())
CREATE INDEX "onboarding_onboardingtemplate_is_active_0bd2c817" ON "onboarding_onboardingtemplate" ("is_active"); (params ())
DROP INDEX "payroll_ful_organiz_feba69_idx"; (params ())
DROP INDEX "payroll_pfc_organiz_969d39_idx"; (params ())
DROP INDEX "payroll_rei_organiz_d760ff_idx"; (params ())
DROP INDEX "payroll_sal_organiz_8ff23a_idx"; (params ())
CREATE TABLE "new__payroll_employeesalary" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "effective_from" date NOT NULL, "effective_to" date NULL, "basic" decimal NOT NULL, "hra" decimal NOT NULL, "da" decimal NOT NULL, "special_allowance" decimal NOT NULL, "conveyance" decimal NOT NULL, "medical_allowance" decimal NOT NULL, "lta" decimal NOT NULL, "other_allowances" decimal NOT NULL, "performance_bonus" decimal NOT NULL, "variable_pay" decimal NOT NULL, "arrears" decimal NOT NULL, "pf_employee" decimal NOT NULL, "esi_employee" decimal NOT NULL, "professional_tax" decimal NOT NULL, "tds" decimal NOT NULL, "other_deductions" decimal NOT NULL, "pf_employer" decimal NOT NULL, "esi_employer" decimal NOT NULL, "gratuity" decimal NOT NULL, "annual_ctc" decimal NOT NULL, "monthly_gross" decimal NOT NULL, "total_deductions" decimal NOT NULL, "net_salary" decimal NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__payroll_employeesalary" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "effective_from", "effective_to", "basic", "hra", "da", "special_allowance", "conveyance", "medical_allowance", "lta", "other_allowances", "performance_bonus", "variable_pay", "arrears", "pf_employee", "esi_employee", "professional_tax", "tds", "other_deductions", "pf_employer", "esi_employer", "gratuity", "annual_ctc", "monthly_gross", "total_deductions", "net_salary", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "effective_from", "effective_to", "basic", "hra", "da", "special_allowance", "conveyance", "medical_allowance", "lta", "other_allowances", "performance_bonus", "variable_pay", "arrears", "pf_employee", "esi_employee", "professional_tax", "tds", "other_deductions", "pf_employer", "esi_employer", "gratuity", "annual_ctc", "monthly_gross", "total_deductions", "net_salary", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "is_active" FROM "payroll_employeesalary"; (params ())
DROP TABLE "payroll_employeesalary"; (params ())
ALTER TABLE "new__payroll_employeesalary" RENAME TO "payroll_employeesalary"; (params ())
CREATE UNIQUE INDEX "uq_active_salary_per_employee" ON "payroll_employeesalary" ("employee_id", "organization_id") WHERE "is_active"; (params ())
CREATE INDEX "payroll_employeesalary_created_at_984f9793" ON "payroll_employeesalary" ("created_at"); (params ())
CREATE INDEX "payroll_employeesalary_is_deleted_9fd9cc02" ON "payroll_employeesalary" ("is_deleted"); (params ())
CREATE INDEX "payroll_employeesalary_effective_from_f30341f5" ON "payroll_employeesalary" ("effective_from"); (params ())
CREATE INDEX "payroll_employeesalary_created_by_id_ee5fd535" ON "payroll_employeesalary" ("created_by_id"); (params ())
CREATE INDEX "payroll_employeesalary_deleted_by_id_d8536ab3" ON "payroll_employeesalary" ("deleted_by_id"); (params ())
CREATE INDEX "payroll_employeesalary_employee_id_5ecbf139" ON "payroll_employeesalary" ("employee_id"); (params ())
CREATE INDEX "payroll_employeesalary_organization_id_6baed828" ON "payroll_employeesalary" ("organization_id"); (params ())
CREATE INDEX "payroll_employeesalary_updated_by_id_3fb5b9b6" ON "payroll_employeesalary" ("updated_by_id"); (params ())
CREATE INDEX "payroll_employeesalary_is_active_a0650442" ON "payroll_employeesalary" ("is_active"); (params ())
CREATE INDEX "payroll_emp_employe_033182_idx" ON "payroll_employeesalary" ("employee_id", "effective_from"); (params ())
CREATE TABLE "performance_competency" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "category" varchar(50) NOT NULL, "level_1_description" text NOT NULL, "level_2_description" text NOT NULL, "level_3_description" text NOT NULL, "level_4_description" text NOT NULL, "level_5_description" text NOT NULL, "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_keyresultarea" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "default_weightage" smallint unsigned NOT NULL CHECK ("default_weightage" >= 0), "is_active" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_employeekra" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "weightage" smallint unsigned NOT NULL CHECK ("weightage" >= 0), "target" text NOT NULL, "achievement" text NOT NULL, "self_rating" decimal NULL, "manager_rating" decimal NULL, "final_rating" decimal NULL, "comments" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "kra_id" char(32) NOT NULL REFERENCES "performance_keyresultarea" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_kpi" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(200) NOT NULL, "description" text NOT NULL, "metric_type" varchar(20) NOT NULL, "measurement_frequency" varchar(20) NOT NULL, "target_value" decimal NOT NULL, "threshold_value" decimal NULL, "stretch_value" decimal NULL, "current_value" decimal NOT NULL, "period_start" date NOT NULL, "period_end" date NOT NULL, "is_achieved" bool NOT NULL, "achievement_percentage" decimal NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_kra_id" char(32) NULL REFERENCES "performance_employeekra" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_okrobjective" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(255) NOT NULL, "description" text NOT NULL, "weight" smallint unsigned NOT NULL CHECK ("weight" >= 0), "status" varchar(20) NOT NULL, "progress" smallint unsigned NOT NULL CHECK ("progress" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "parent_id" char(32) NULL REFERENCES "performance_okrobjective" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_keyresult" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(255) NOT NULL, "description" text NOT NULL, "metric_type" varchar(20) NOT NULL, "target_value" decimal NOT NULL, "current_value" decimal NOT NULL, "weight" smallint unsigned NOT NULL CHECK ("weight" >= 0), "progress" smallint unsigned NOT NULL CHECK ("progress" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "objective_id" char(32) NOT NULL REFERENCES "performance_okrobjective" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_performancecycle" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "year" smallint unsigned NOT NULL CHECK ("year" >= 0), "start_date" date NOT NULL, "end_date" date NOT NULL, "goal_setting_start" date NULL, "goal_setting_end" date NULL, "review_start" date NULL, "review_end" date NULL, "status" varchar(20) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__performance_okrobjective" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(255) NOT NULL, "description" text NOT NULL, "weight" smallint unsigned NOT NULL CHECK ("weight" >= 0), "status" varchar(20) NOT NULL, "progress" smallint unsigned NOT NULL CHECK ("progress" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "cycle_id" char(32) NOT NULL REFERENCES "performance_performancecycle" ("id") DEFERRABLE INITIALLY DEFERRED, "parent_id" char(32) NULL REFERENCES "performance_okrobjective" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__performance_okrobjective" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "title", "description", "weight", "status", "progress", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "parent_id", "updated_by_id", "cycle_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "title", "description", "weight", "status", "progress", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "parent_id", "updated_by_id", NULL FROM "performance_okrobjective"; (params ())
DROP TABLE "performance_okrobjective"; (params ())
ALTER TABLE "new__performance_okrobjective" RENAME TO "performance_okrobjective"; (params ())
CREATE INDEX "performance_competency_created_at_74faf606" ON "performance_competency" ("created_at"); (params ())
CREATE INDEX "performance_competency_is_deleted_1807317f" ON "performance_competency" ("is_deleted"); (params ())
CREATE INDEX "performance_competency_created_by_id_662ef819" ON "performance_competency" ("created_by_id"); (params ())
CREATE INDEX "performance_competency_deleted_by_id_03350a89" ON "performance_competency" ("deleted_by_id"); (params ())
CREATE INDEX "performance_competency_organization_id_84f7e017" ON "performance_competency" ("organization_id"); (params ())
CREATE INDEX "performance_competency_updated_by_id_6b7b1277" ON "performance_competency" ("updated_by_id"); (params ())
CREATE INDEX "performance_keyresultarea_created_at_d8e063a0" ON "performance_keyresultarea" ("created_at"); (params ())
CREATE INDEX "performance_keyresultarea_is_deleted_8b84d1d1" ON "performance_keyresultarea" ("is_deleted"); (params ())
CREATE INDEX "performance_keyresultarea_created_by_id_3870b32b" ON "performance_keyresultarea" ("created_by_id"); (params ())
CREATE INDEX "performance_keyresultarea_deleted_by_id_deaf3665" ON "performance_keyresultarea" ("deleted_by_id"); (params ())
CREATE INDEX "performance_keyresultarea_department_id_e988a06f" ON "performance_keyresultarea" ("department_id"); (params ())
CREATE INDEX "performance_keyresultarea_designation_id_2f911525" ON "performance_keyresultarea" ("designation_id"); (params ())
CREATE INDEX "performance_keyresultarea_organization_id_7fd75e06" ON "performance_keyresultarea" ("organization_id"); (params ())
CREATE INDEX "performance_keyresultarea_updated_by_id_68341f76" ON "performance_keyresultarea" ("updated_by_id"); (params ())
CREATE INDEX "performance_employeekra_created_at_d3003c67" ON "performance_employeekra" ("created_at"); (params ())
CREATE INDEX "performance_employeekra_is_deleted_8b1d9d48" ON "performance_employeekra" ("is_deleted"); (params ())
CREATE INDEX "performance_employeekra_is_active_05374b90" ON "performance_employeekra" ("is_active"); (params ())
CREATE INDEX "performance_employeekra_created_by_id_9d11faf7" ON "performance_employeekra" ("created_by_id"); (params ())
CREATE INDEX "performance_employeekra_deleted_by_id_d5c9b4a8" ON "performance_employeekra" ("deleted_by_id"); (params ())
CREATE INDEX "performance_employeekra_employee_id_da094d46" ON "performance_employeekra" ("employee_id"); (params ())
CREATE INDEX "performance_employeekra_organization_id_06f35ad7" ON "performance_employeekra" ("organization_id"); (params ())
CREATE INDEX "performance_employeekra_updated_by_id_5881843f" ON "performance_employeekra" ("updated_by_id"); (params ())
CREATE INDEX "performance_employeekra_kra_id_01cab916" ON "performance_employeekra" ("kra_id"); (params ())
CREATE INDEX "performance_kpi_created_at_53345d4f" ON "performance_kpi" ("created_at"); (params ())
CREATE INDEX "performance_kpi_is_deleted_6e3d672b" ON "performance_kpi" ("is_deleted"); (params ())
CREATE INDEX "performance_kpi_is_active_53b6d535" ON "performance_kpi" ("is_active"); (params ())
CREATE INDEX "performance_kpi_created_by_id_5b53a946" ON "performance_kpi" ("created_by_id"); (params ())
CREATE INDEX "performance_kpi_deleted_by_id_47cb4b62" ON "performance_kpi" ("deleted_by_id"); (params ())
CREATE INDEX "performance_kpi_employee_id_dce9f419" ON "performance_kpi" ("employee_id"); (params ())
CREATE INDEX "performance_kpi_employee_kra_id_b2646bb7" ON "performance_kpi" ("employee_kra_id"); (params ())
CREATE INDEX "performance_kpi_organization_id_4917007f" ON "performance_kpi" ("organization_id"); (params ())
CREATE INDEX "performance_kpi_updated_by_id_a21d112d" ON "performance_kpi" ("updated_by_id"); (params ())
CREATE INDEX "performance_keyresult_created_at_94d271dd" ON "performance_keyresult" ("created_at"); (params ())
CREATE INDEX "performance_keyresult_is_deleted_d76044eb" ON "performance_keyresult" ("is_deleted"); (params ())
CREATE INDEX "performance_keyresult_is_active_0b46bd12" ON "performance_keyresult" ("is_active"); (params ())
CREATE INDEX "performance_keyresult_created_by_id_fdabe1fa" ON "performance_keyresult" ("created_by_id"); (params ())
CREATE INDEX "performance_keyresult_deleted_by_id_e666b68a" ON "performance_keyresult" ("deleted_by_id"); (params ())
CREATE INDEX "performance_keyresult_organization_id_e2a8bb24" ON "performance_keyresult" ("organization_id"); (params ())
CREATE INDEX "performance_keyresult_updated_by_id_2b6fa54c" ON "performance_keyresult" ("updated_by_id"); (params ())
CREATE INDEX "performance_keyresult_objective_id_c48e662a" ON "performance_keyresult" ("objective_id"); (params ())
CREATE INDEX "performance_performancecycle_created_at_26f866a2" ON "performance_performancecycle" ("created_at"); (params ())
CREATE INDEX "performance_performancecycle_is_deleted_3988d6d9" ON "performance_performancecycle" ("is_deleted"); (params ())
CREATE INDEX "performance_performancecycle_is_active_2ea01301" ON "performance_performancecycle" ("is_active"); (params ())
CREATE INDEX "performance_performancecycle_created_by_id_73e48fea" ON "performance_performancecycle" ("created_by_id"); (params ())
CREATE INDEX "performance_performancecycle_deleted_by_id_4e21897c" ON "performance_performancecycle" ("deleted_by_id"); (params ())
CREATE INDEX "performance_performancecycle_organization_id_d8d92aa0" ON "performance_performancecycle" ("organization_id"); (params ())
CREATE INDEX "performance_performancecycle_updated_by_id_1f4d1ec2" ON "performance_performancecycle" ("updated_by_id"); (params ())
CREATE INDEX "performance_okrobjective_created_at_38a35588" ON "performance_okrobjective" ("created_at"); (params ())
CREATE INDEX "performance_okrobjective_is_deleted_11558604" ON "performance_okrobjective" ("is_deleted"); (params ())
CREATE INDEX "performance_okrobjective_is_active_ed11dcb3" ON "performance_okrobjective" ("is_active"); (params ())
CREATE INDEX "performance_okrobjective_created_by_id_16c2382c" ON "performance_okrobjective" ("created_by_id"); (params ())
CREATE INDEX "performance_okrobjective_deleted_by_id_79b6ca90" ON "performance_okrobjective" ("deleted_by_id"); (params ())
CREATE INDEX "performance_okrobjective_employee_id_a272f21d" ON "performance_okrobjective" ("employee_id"); (params ())
CREATE INDEX "performance_okrobjective_organization_id_16df0270" ON "performance_okrobjective" ("organization_id"); (params ())
CREATE INDEX "performance_okrobjective_updated_by_id_c80b7f10" ON "performance_okrobjective" ("updated_by_id"); (params ())
CREATE INDEX "performance_okrobjective_cycle_id_c9c6641f" ON "performance_okrobjective" ("cycle_id"); (params ())
CREATE INDEX "performance_okrobjective_parent_id_f2b82f23" ON "performance_okrobjective" ("parent_id"); (params ())
CREATE TABLE "new__performance_employeekra" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "weightage" smallint unsigned NOT NULL CHECK ("weightage" >= 0), "target" text NOT NULL, "achievement" text NOT NULL, "self_rating" decimal NULL, "manager_rating" decimal NULL, "final_rating" decimal NULL, "comments" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "kra_id" char(32) NOT NULL REFERENCES "performance_keyresultarea" ("id") DEFERRABLE INITIALLY DEFERRED, "cycle_id" char(32) NOT NULL REFERENCES "performance_performancecycle" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__performance_employeekra" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "weightage", "target", "achievement", "self_rating", "manager_rating", "final_rating", "comments", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "kra_id", "cycle_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "weightage", "target", "achievement", "self_rating", "manager_rating", "final_rating", "comments", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "kra_id", NULL FROM "performance_employeekra"; (params ())
DROP TABLE "performance_employeekra"; (params ())
ALTER TABLE "new__performance_employeekra" RENAME TO "performance_employeekra"; (params ())
CREATE INDEX "performance_employeekra_created_at_d3003c67" ON "performance_employeekra" ("created_at"); (params ())
CREATE INDEX "performance_employeekra_is_deleted_8b1d9d48" ON "performance_employeekra" ("is_deleted"); (params ())
CREATE INDEX "performance_employeekra_is_active_05374b90" ON "performance_employeekra" ("is_active"); (params ())
CREATE INDEX "performance_employeekra_created_by_id_9d11faf7" ON "performance_employeekra" ("created_by_id"); (params ())
CREATE INDEX "performance_employeekra_deleted_by_id_d5c9b4a8" ON "performance_employeekra" ("deleted_by_id"); (params ())
CREATE INDEX "performance_employeekra_employee_id_da094d46" ON "performance_employeekra" ("employee_id"); (params ())
CREATE INDEX "performance_employeekra_organization_id_06f35ad7" ON "performance_employeekra" ("organization_id"); (params ())
CREATE INDEX "performance_employeekra_updated_by_id_5881843f" ON "performance_employeekra" ("updated_by_id"); (params ())
CREATE INDEX "performance_employeekra_kra_id_01cab916" ON "performance_employeekra" ("kra_id"); (params ())
CREATE INDEX "performance_employeekra_cycle_id_c3205126" ON "performance_employeekra" ("cycle_id"); (params ())
CREATE TABLE "performance_performancereview" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "self_rating" decimal NULL, "self_comments" text NOT NULL, "manager_rating" decimal NULL, "manager_comments" text NOT NULL, "final_rating" decimal NULL, "status" varchar(20) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "cycle_id" char(32) NOT NULL REFERENCES "performance_performancecycle" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_reviewfeedback" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "relationship" varchar(20) NOT NULL, "rating" decimal NULL, "feedback" text NOT NULL, "is_anonymous" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "review_id" char(32) NOT NULL REFERENCES "performance_performancereview" ("id") DEFERRABLE INITIALLY DEFERRED, "reviewer_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "performance_trainingrecommendation" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "suggested_training" varchar(255) NOT NULL, "priority" varchar(20) NOT NULL, "is_completed" bool NOT NULL, "completion_date" date NULL, "notes" text NOT NULL, "competency_id" char(32) NOT NULL REFERENCES "performance_competency" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "cycle_id" char(32) NOT NULL REFERENCES "performance_performancecycle" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE UNIQUE INDEX "performance_employeekra_employee_id_cycle_id_kra_id_16d0ad0d_uniq" ON "performance_employeekra" ("employee_id", "cycle_id", "kra_id"); (params ())
CREATE TABLE "performance_employeecompetency" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "expected_level" smallint unsigned NOT NULL CHECK ("expected_level" >= 0), "self_assessed_level" smallint unsigned NULL CHECK ("self_assessed_level" >= 0), "manager_assessed_level" smallint unsigned NULL CHECK ("manager_assessed_level" >= 0), "final_level" smallint unsigned NULL CHECK ("final_level" >= 0), "gap" smallint NOT NULL, "comments" text NOT NULL, "development_plan" text NOT NULL, "competency_id" char(32) NOT NULL REFERENCES "performance_competency" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "cycle_id" char(32) NOT NULL REFERENCES "performance_performancecycle" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE UNIQUE INDEX "performance_performancereview_cycle_id_employee_id_f1bb1ade_uniq" ON "performance_performancereview" ("cycle_id", "employee_id"); (params ())
CREATE INDEX "performance_performancereview_created_at_5c641a32" ON "performance_performancereview" ("created_at"); (params ())
CREATE INDEX "performance_performancereview_is_deleted_ddd068ee" ON "performance_performancereview" ("is_deleted"); (params ())
CREATE INDEX "performance_performancereview_is_active_4f23289b" ON "performance_performancereview" ("is_active"); (params ())
CREATE INDEX "performance_performancereview_created_by_id_f23d1f5f" ON "performance_performancereview" ("created_by_id"); (params ())
CREATE INDEX "performance_performancereview_cycle_id_f1c15fd4" ON "performance_performancereview" ("cycle_id"); (params ())
CREATE INDEX "performance_performancereview_deleted_by_id_1650850c" ON "performance_performancereview" ("deleted_by_id"); (params ())
CREATE INDEX "performance_performancereview_employee_id_3c08abd5" ON "performance_performancereview" ("employee_id"); (params ())
CREATE INDEX "performance_performancereview_organization_id_e0c77c9f" ON "performance_performancereview" ("organization_id"); (params ())
CREATE INDEX "performance_performancereview_updated_by_id_2db554e3" ON "performance_performancereview" ("updated_by_id"); (params ())
CREATE INDEX "performance_reviewfeedback_created_at_3af00e7e" ON "performance_reviewfeedback" ("created_at"); (params ())
CREATE INDEX "performance_reviewfeedback_is_deleted_2690e7b7" ON "performance_reviewfeedback" ("is_deleted"); (params ())
CREATE INDEX "performance_reviewfeedback_is_active_8e7f6957" ON "performance_reviewfeedback" ("is_active"); (params ())
CREATE INDEX "performance_reviewfeedback_created_by_id_d30f36ea" ON "performance_reviewfeedback" ("created_by_id"); (params ())
CREATE INDEX "performance_reviewfeedback_deleted_by_id_f9491f33" ON "performance_reviewfeedback" ("deleted_by_id"); (params ())
CREATE INDEX "performance_reviewfeedback_organization_id_d83bfdd7" ON "performance_reviewfeedback" ("organization_id"); (params ())
CREATE INDEX "performance_reviewfeedback_review_id_56e9170e" ON "performance_reviewfeedback" ("review_id"); (params ())
CREATE INDEX "performance_reviewfeedback_reviewer_id_1cc4f1be" ON "performance_reviewfeedback" ("reviewer_id"); (params ())
CREATE INDEX "performance_reviewfeedback_updated_by_id_2458d381" ON "performance_reviewfeedback" ("updated_by_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_created_at_a7fe85d3" ON "performance_trainingrecommendation" ("created_at"); (params ())
CREATE INDEX "performance_trainingrecommendation_is_deleted_24329ee9" ON "performance_trainingrecommendation" ("is_deleted"); (params ())
CREATE INDEX "performance_trainingrecommendation_is_active_d16c478b" ON "performance_trainingrecommendation" ("is_active"); (params ())
CREATE INDEX "performance_trainingrecommendation_competency_id_15e293f2" ON "performance_trainingrecommendation" ("competency_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_created_by_id_62afc626" ON "performance_trainingrecommendation" ("created_by_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_cycle_id_15ec87df" ON "performance_trainingrecommendation" ("cycle_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_deleted_by_id_a9265534" ON "performance_trainingrecommendation" ("deleted_by_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_employee_id_6fe3756a" ON "performance_trainingrecommendation" ("employee_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_organization_id_dcf7e340" ON "performance_trainingrecommendation" ("organization_id"); (params ())
CREATE INDEX "performance_trainingrecommendation_updated_by_id_463826f7" ON "performance_trainingrecommendation" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "performance_employeecompetency_employee_id_competency_id_cycle_id_5f819ceb_uniq" ON "performance_employeecompetency" ("employee_id", "competency_id", "cycle_id"); (params ())
CREATE INDEX "performance_employeecompetency_created_at_36e97752" ON "performance_employeecompetency" ("created_at"); (params ())
CREATE INDEX "performance_employeecompetency_is_deleted_a8cd644b" ON "performance_employeecompetency" ("is_deleted"); (params ())
CREATE INDEX "performance_employeecompetency_is_active_d2426f67" ON "performance_employeecompetency" ("is_active"); (params ())
CREATE INDEX "performance_employeecompetency_competency_id_4ca86283" ON "performance_employeecompetency" ("competency_id"); (params ())
CREATE INDEX "performance_employeecompetency_created_by_id_268be4a8" ON "performance_employeecompetency" ("created_by_id"); (params ())
CREATE INDEX "performance_employeecompetency_deleted_by_id_a10e0023" ON "performance_employeecompetency" ("deleted_by_id"); (params ())
CREATE INDEX "performance_employeecompetency_employee_id_36505b9e" ON "performance_employeecompetency" ("employee_id"); (params ())
CREATE INDEX "performance_employeecompetency_organization_id_9a733eea" ON "performance_employeecompetency" ("organization_id"); (params ())
CREATE INDEX "performance_employeecompetency_updated_by_id_6e4313d9" ON "performance_employeecompetency" ("updated_by_id"); (params ())
CREATE INDEX "performance_employeecompetency_cycle_id_544fd030" ON "performance_employeecompetency" ("cycle_id"); (params ())
CREATE TABLE "new__performance_competency" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(100) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "category" varchar(50) NOT NULL, "level_1_description" text NOT NULL, "level_2_description" text NOT NULL, "level_3_description" text NOT NULL, "level_4_description" text NOT NULL, "level_5_description" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__performance_competency" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "category", "level_1_description", "level_2_description", "level_3_description", "level_4_description", "level_5_description", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "category", "level_1_description", "level_2_description", "level_3_description", "level_4_description", "level_5_description", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "is_active" FROM "performance_competency"; (params ())
DROP TABLE "performance_competency"; (params ())
ALTER TABLE "new__performance_competency" RENAME TO "performance_competency"; (params ())
CREATE INDEX "performance_competency_created_at_74faf606" ON "performance_competency" ("created_at"); (params ())
CREATE INDEX "performance_competency_is_deleted_1807317f" ON "performance_competency" ("is_deleted"); (params ())
CREATE INDEX "performance_competency_created_by_id_662ef819" ON "performance_competency" ("created_by_id"); (params ())
CREATE INDEX "performance_competency_deleted_by_id_03350a89" ON "performance_competency" ("deleted_by_id"); (params ())
CREATE INDEX "performance_competency_organization_id_84f7e017" ON "performance_competency" ("organization_id"); (params ())
CREATE INDEX "performance_competency_updated_by_id_6b7b1277" ON "performance_competency" ("updated_by_id"); (params ())
CREATE INDEX "performance_competency_is_active_1c53b7d6" ON "performance_competency" ("is_active"); (params ())
CREATE TABLE "new__performance_keyresultarea" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "name" varchar(200) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "default_weightage" smallint unsigned NOT NULL CHECK ("default_weightage" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "is_active" bool NOT NULL); (params None)
INSERT INTO "new__performance_keyresultarea" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "default_weightage", "created_by_id", "deleted_by_id", "department_id", "designation_id", "organization_id", "updated_by_id", "is_active") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "name", "code", "description", "default_weightage", "created_by_id", "deleted_by_id", "department_id", "designation_id", "organization_id", "updated_by_id", "is_active" FROM "performance_keyresultarea"; (params ())
DROP TABLE "performance_keyresultarea"; (params ())
ALTER TABLE "new__performance_keyresultarea" RENAME TO "performance_keyresultarea"; (params ())
CREATE INDEX "performance_keyresultarea_created_at_d8e063a0" ON "performance_keyresultarea" ("created_at"); (params ())
CREATE INDEX "performance_keyresultarea_is_deleted_8b84d1d1" ON "performance_keyresultarea" ("is_deleted"); (params ())
CREATE INDEX "performance_keyresultarea_created_by_id_3870b32b" ON "performance_keyresultarea" ("created_by_id"); (params ())
CREATE INDEX "performance_keyresultarea_deleted_by_id_deaf3665" ON "performance_keyresultarea" ("deleted_by_id"); (params ())
CREATE INDEX "performance_keyresultarea_department_id_e988a06f" ON "performance_keyresultarea" ("department_id"); (params ())
CREATE INDEX "performance_keyresultarea_designation_id_2f911525" ON "performance_keyresultarea" ("designation_id"); (params ())
CREATE INDEX "performance_keyresultarea_organization_id_7fd75e06" ON "performance_keyresultarea" ("organization_id"); (params ())
CREATE INDEX "performance_keyresultarea_updated_by_id_68341f76" ON "performance_keyresultarea" ("updated_by_id"); (params ())
CREATE INDEX "performance_keyresultarea_is_active_41ac64d0" ON "performance_keyresultarea" ("is_active"); (params ())
CREATE TABLE "recruitment_candidate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "first_name" varchar(50) NOT NULL, "last_name" varchar(50) NOT NULL, "email" varchar(254) NOT NULL, "phone" varchar(15) NOT NULL, "resume" varchar(100) NOT NULL, "parsed_data" text NOT NULL CHECK ((JSON_VALID("parsed_data") OR "parsed_data" IS NULL)), "source" varchar(50) NOT NULL, "total_experience" decimal NULL, "current_company" varchar(200) NOT NULL, "current_designation" varchar(200) NOT NULL, "current_ctc" decimal NULL, "expected_ctc" decimal NULL, "notice_period" smallint unsigned NULL CHECK ("notice_period" >= 0), "skills" text NOT NULL CHECK ((JSON_VALID("skills") OR "skills" IS NULL)), "education" text NOT NULL CHECK ((JSON_VALID("education") OR "education" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "referred_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "recruitment_jobapplication" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "stage" varchar(30) NOT NULL, "ai_score" decimal NULL, "ai_insights" text NOT NULL CHECK ((JSON_VALID("ai_insights") OR "ai_insights" IS NULL)), "candidate_id" char(32) NOT NULL REFERENCES "recruitment_candidate" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "recruitment_interview" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "round_type" varchar(30) NOT NULL, "scheduled_at" datetime NOT NULL, "duration_minutes" smallint unsigned NOT NULL CHECK ("duration_minutes" >= 0), "mode" varchar(20) NOT NULL, "meeting_link" varchar(200) NOT NULL, "location" varchar(200) NOT NULL, "status" varchar(20) NOT NULL, "feedback" text NOT NULL, "rating" decimal NULL, "recommendation" varchar(20) NOT NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "application_id" char(32) NOT NULL REFERENCES "recruitment_jobapplication" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "recruitment_interview_interviewers" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "interview_id" char(32) NOT NULL REFERENCES "recruitment_interview" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "recruitment_jobposting" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "code" varchar(20) NOT NULL, "description" text NOT NULL, "requirements" text NOT NULL, "responsibilities" text NOT NULL, "employment_type" varchar(20) NOT NULL, "experience_min" smallint unsigned NOT NULL CHECK ("experience_min" >= 0), "experience_max" smallint unsigned NULL CHECK ("experience_max" >= 0), "salary_min" decimal NULL, "salary_max" decimal NULL, "positions" smallint unsigned NOT NULL CHECK ("positions" >= 0), "status" varchar(20) NOT NULL, "published_at" datetime NULL, "closing_date" date NULL, "branch_id" char(32) NULL REFERENCES "branches" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "department_id" char(32) NULL REFERENCES "employees_department" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "hiring_manager_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "location_id" char(32) NULL REFERENCES "employees_location" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__recruitment_jobapplication" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "stage" varchar(30) NOT NULL, "ai_score" decimal NULL, "ai_insights" text NOT NULL CHECK ((JSON_VALID("ai_insights") OR "ai_insights" IS NULL)), "candidate_id" char(32) NOT NULL REFERENCES "recruitment_candidate" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "job_id" char(32) NOT NULL REFERENCES "recruitment_jobposting" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__recruitment_jobapplication" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "stage", "ai_score", "ai_insights", "candidate_id", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", "job_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "stage", "ai_score", "ai_insights", "candidate_id", "created_by_id", "deleted_by_id", "organization_id", "updated_by_id", NULL FROM "recruitment_jobapplication"; (params ())
DROP TABLE "recruitment_jobapplication"; (params ())
ALTER TABLE "new__recruitment_jobapplication" RENAME TO "recruitment_jobapplication"; (params ())
CREATE INDEX "recruitment_candidate_created_at_9310f43f" ON "recruitment_candidate" ("created_at"); (params ())
CREATE INDEX "recruitment_candidate_is_deleted_e85d6b01" ON "recruitment_candidate" ("is_deleted"); (params ())
CREATE INDEX "recruitment_candidate_is_active_046e3838" ON "recruitment_candidate" ("is_active"); (params ())
CREATE INDEX "recruitment_candidate_created_by_id_e66d3f8b" ON "recruitment_candidate" ("created_by_id"); (params ())
CREATE INDEX "recruitment_candidate_deleted_by_id_02999865" ON "recruitment_candidate" ("deleted_by_id"); (params ())
CREATE INDEX "recruitment_candidate_organization_id_d5686c63" ON "recruitment_candidate" ("organization_id"); (params ())
CREATE INDEX "recruitment_candidate_referred_by_id_6d4f0ed5" ON "recruitment_candidate" ("referred_by_id"); (params ())
CREATE INDEX "recruitment_candidate_updated_by_id_a4b0a98b" ON "recruitment_candidate" ("updated_by_id"); (params ())
CREATE INDEX "recruitment_interview_created_at_63b22897" ON "recruitment_interview" ("created_at"); (params ())
CREATE INDEX "recruitment_interview_is_deleted_6e73eab0" ON "recruitment_interview" ("is_deleted"); (params ())
CREATE INDEX "recruitment_interview_is_active_7d1fad00" ON "recruitment_interview" ("is_active"); (params ())
CREATE INDEX "recruitment_interview_branch_id_3bf835e5" ON "recruitment_interview" ("branch_id"); (params ())
CREATE INDEX "recruitment_interview_created_by_id_2545bdfa" ON "recruitment_interview" ("created_by_id"); (params ())
CREATE INDEX "recruitment_interview_deleted_by_id_ad46e466" ON "recruitment_interview" ("deleted_by_id"); (params ())
CREATE INDEX "recruitment_interview_organization_id_ad5f97f1" ON "recruitment_interview" ("organization_id"); (params ())
CREATE INDEX "recruitment_interview_updated_by_id_8b6d976d" ON "recruitment_interview" ("updated_by_id"); (params ())
CREATE INDEX "recruitment_interview_application_id_6ea4352e" ON "recruitment_interview" ("application_id"); (params ())
CREATE UNIQUE INDEX "recruitment_interview_interviewers_interview_id_employee_id_ce055f19_uniq" ON "recruitment_interview_interviewers" ("interview_id", "employee_id"); (params ())
CREATE INDEX "recruitment_interview_interviewers_interview_id_6f9e4ea5" ON "recruitment_interview_interviewers" ("interview_id"); (params ())
CREATE INDEX "recruitment_interview_interviewers_employee_id_185cca2c" ON "recruitment_interview_interviewers" ("employee_id"); (params ())
CREATE INDEX "recruitment_jobposting_created_at_41b0eccc" ON "recruitment_jobposting" ("created_at"); (params ())
CREATE INDEX "recruitment_jobposting_is_deleted_aabb52d3" ON "recruitment_jobposting" ("is_deleted"); (params ())
CREATE INDEX "recruitment_jobposting_is_active_034bedb8" ON "recruitment_jobposting" ("is_active"); (params ())
CREATE INDEX "recruitment_jobposting_branch_id_d140641a" ON "recruitment_jobposting" ("branch_id"); (params ())
CREATE INDEX "recruitment_jobposting_created_by_id_c7887cb3" ON "recruitment_jobposting" ("created_by_id"); (params ())
CREATE INDEX "recruitment_jobposting_deleted_by_id_0bc8ae70" ON "recruitment_jobposting" ("deleted_by_id"); (params ())
CREATE INDEX "recruitment_jobposting_department_id_8a5c16c4" ON "recruitment_jobposting" ("department_id"); (params ())
CREATE INDEX "recruitment_jobposting_designation_id_d1625073" ON "recruitment_jobposting" ("designation_id"); (params ())
CREATE INDEX "recruitment_jobposting_hiring_manager_id_018423f8" ON "recruitment_jobposting" ("hiring_manager_id"); (params ())
CREATE INDEX "recruitment_jobposting_location_id_5f9353cd" ON "recruitment_jobposting" ("location_id"); (params ())
CREATE INDEX "recruitment_jobposting_organization_id_51cfbf77" ON "recruitment_jobposting" ("organization_id"); (params ())
CREATE INDEX "recruitment_jobposting_updated_by_id_3031f6a3" ON "recruitment_jobposting" ("updated_by_id"); (params ())
CREATE INDEX "recruitment_jobapplication_created_at_5e829381" ON "recruitment_jobapplication" ("created_at"); (params ())
CREATE INDEX "recruitment_jobapplication_is_deleted_f1c08e05" ON "recruitment_jobapplication" ("is_deleted"); (params ())
CREATE INDEX "recruitment_jobapplication_is_active_92736225" ON "recruitment_jobapplication" ("is_active"); (params ())
CREATE INDEX "recruitment_jobapplication_candidate_id_7e254462" ON "recruitment_jobapplication" ("candidate_id"); (params ())
CREATE INDEX "recruitment_jobapplication_created_by_id_de46436b" ON "recruitment_jobapplication" ("created_by_id"); (params ())
CREATE INDEX "recruitment_jobapplication_deleted_by_id_f088dbae" ON "recruitment_jobapplication" ("deleted_by_id"); (params ())
CREATE INDEX "recruitment_jobapplication_organization_id_1ebb52d2" ON "recruitment_jobapplication" ("organization_id"); (params ())
CREATE INDEX "recruitment_jobapplication_updated_by_id_a7315a53" ON "recruitment_jobapplication" ("updated_by_id"); (params ())
CREATE INDEX "recruitment_jobapplication_job_id_b3cfde6a" ON "recruitment_jobapplication" ("job_id"); (params ())
CREATE TABLE "recruitment_offerletter" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "offered_ctc" decimal NOT NULL, "joining_date" date NOT NULL, "offer_letter_file" varchar(100) NULL, "status" varchar(20) NOT NULL, "valid_until" date NULL, "accepted_at" datetime NULL, "application_id" char(32) NOT NULL UNIQUE REFERENCES "recruitment_jobapplication" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "designation_id" char(32) NULL REFERENCES "employees_designation" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE UNIQUE INDEX "recruitment_jobapplication_job_id_candidate_id_f2d6d4af_uniq" ON "recruitment_jobapplication" ("job_id", "candidate_id"); (params ())
CREATE INDEX "recruitment_offerletter_created_at_f117ebce" ON "recruitment_offerletter" ("created_at"); (params ())
CREATE INDEX "recruitment_offerletter_is_deleted_bf25aa6d" ON "recruitment_offerletter" ("is_deleted"); (params ())
CREATE INDEX "recruitment_offerletter_is_active_4d92bc8f" ON "recruitment_offerletter" ("is_active"); (params ())
CREATE INDEX "recruitment_offerletter_created_by_id_91f615cf" ON "recruitment_offerletter" ("created_by_id"); (params ())
CREATE INDEX "recruitment_offerletter_deleted_by_id_d66379b3" ON "recruitment_offerletter" ("deleted_by_id"); (params ())
CREATE INDEX "recruitment_offerletter_designation_id_25c1f67f" ON "recruitment_offerletter" ("designation_id"); (params ())
CREATE INDEX "recruitment_offerletter_organization_id_5aa41533" ON "recruitment_offerletter" ("organization_id"); (params ())
CREATE INDEX "recruitment_offerletter_updated_by_id_b9b4cf0f" ON "recruitment_offerletter" ("updated_by_id"); (params ())
CREATE TABLE "reports_reporttemplate" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL UNIQUE, "description" text NOT NULL, "report_type" varchar(30) NOT NULL, "query_config" text NOT NULL CHECK ((JSON_VALID("query_config") OR "query_config" IS NULL)), "columns" text NOT NULL CHECK ((JSON_VALID("columns") OR "columns" IS NULL)), "filters" text NOT NULL CHECK ((JSON_VALID("filters") OR "filters" IS NULL)), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "reports_reportexecution" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "template_code" varchar(50) NOT NULL, "template_name" varchar(100) NOT NULL, "filters" text NOT NULL CHECK ((JSON_VALID("filters") OR "filters" IS NULL)), "parameters" text NOT NULL CHECK ((JSON_VALID("parameters") OR "parameters" IS NULL)), "status" varchar(20) NOT NULL, "output_format" varchar(10) NOT NULL, "started_at" datetime NULL, "completed_at" datetime NULL, "execution_time_ms" integer unsigned NULL CHECK ("execution_time_ms" >= 0), "row_count" integer unsigned NULL CHECK ("row_count" >= 0), "columns" text NOT NULL CHECK ((JSON_VALID("columns") OR "columns" IS NULL)), "file" varchar(100) NULL, "file_size" bigint unsigned NULL CHECK ("file_size" >= 0), "error_message" text NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "requested_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NULL REFERENCES "reports_reporttemplate" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "reports_generatedreport" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "filters_applied" text NOT NULL CHECK ((JSON_VALID("filters_applied") OR "filters_applied" IS NULL)), "file" varchar(100) NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "generated_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NULL REFERENCES "reports_reporttemplate" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "reports_scheduledreport" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "schedule" varchar(50) NOT NULL, "recipients" text NOT NULL CHECK ((JSON_VALID("recipients") OR "recipients" IS NULL)), "format" varchar(10) NOT NULL, "last_run" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "template_id" char(32) NOT NULL REFERENCES "reports_reporttemplate" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "reports_rep_organiz_35edc1_idx" ON "reports_reporttemplate" ("organization_id", "created_at"); (params None)
CREATE INDEX "reports_gen_organiz_155bcc_idx" ON "reports_generatedreport" ("organization_id", "created_at"); (params None)
CREATE INDEX "reports_sch_organiz_98bd67_idx" ON "reports_scheduledreport" ("organization_id", "created_at"); (params None)
CREATE INDEX "reports_reporttemplate_created_at_66f0be9b" ON "reports_reporttemplate" ("created_at"); (params ())
CREATE INDEX "reports_reporttemplate_is_deleted_6ee74c8f" ON "reports_reporttemplate" ("is_deleted"); (params ())
CREATE INDEX "reports_reporttemplate_is_active_070f2b13" ON "reports_reporttemplate" ("is_active"); (params ())
CREATE INDEX "reports_reporttemplate_created_by_id_d379b15b" ON "reports_reporttemplate" ("created_by_id"); (params ())
CREATE INDEX "reports_reporttemplate_deleted_by_id_d8b5e7ca" ON "reports_reporttemplate" ("deleted_by_id"); (params ())
CREATE INDEX "reports_reporttemplate_organization_id_c2dfc69d" ON "reports_reporttemplate" ("organization_id"); (params ())
CREATE INDEX "reports_reporttemplate_updated_by_id_8f09b720" ON "reports_reporttemplate" ("updated_by_id"); (params ())
CREATE INDEX "reports_reportexecution_created_at_6580ce3b" ON "reports_reportexecution" ("created_at"); (params ())
CREATE INDEX "reports_reportexecution_is_deleted_f17c221f" ON "reports_reportexecution" ("is_deleted"); (params ())
CREATE INDEX "reports_reportexecution_is_active_1ad020e0" ON "reports_reportexecution" ("is_active"); (params ())
CREATE INDEX "reports_reportexecution_created_by_id_0f89b4c2" ON "reports_reportexecution" ("created_by_id"); (params ())
CREATE INDEX "reports_reportexecution_deleted_by_id_654463ae" ON "reports_reportexecution" ("deleted_by_id"); (params ())
CREATE INDEX "reports_reportexecution_organization_id_84d426a6" ON "reports_reportexecution" ("organization_id"); (params ())
CREATE INDEX "reports_reportexecution_requested_by_id_a18eb42f" ON "reports_reportexecution" ("requested_by_id"); (params ())
CREATE INDEX "reports_reportexecution_updated_by_id_f66ee724" ON "reports_reportexecution" ("updated_by_id"); (params ())
CREATE INDEX "reports_reportexecution_template_id_25d44b83" ON "reports_reportexecution" ("template_id"); (params ())
CREATE INDEX "reports_generatedreport_created_at_26f1d70d" ON "reports_generatedreport" ("created_at"); (params ())
CREATE INDEX "reports_generatedreport_is_deleted_3ab2d372" ON "reports_generatedreport" ("is_deleted"); (params ())
CREATE INDEX "reports_generatedreport_is_active_3d4a3285" ON "reports_generatedreport" ("is_active"); (params ())
CREATE INDEX "reports_generatedreport_created_by_id_e1eea51a" ON "reports_generatedreport" ("created_by_id"); (params ())
CREATE INDEX "reports_generatedreport_deleted_by_id_9f21a50a" ON "reports_generatedreport" ("deleted_by_id"); (params ())
CREATE INDEX "reports_generatedreport_generated_by_id_634c8b8f" ON "reports_generatedreport" ("generated_by_id"); (params ())
CREATE INDEX "reports_generatedreport_organization_id_c0d9e745" ON "reports_generatedreport" ("organization_id"); (params ())
CREATE INDEX "reports_generatedreport_updated_by_id_1f9300a0" ON "reports_generatedreport" ("updated_by_id"); (params ())
CREATE INDEX "reports_generatedreport_template_id_cc9efa1c" ON "reports_generatedreport" ("template_id"); (params ())
CREATE INDEX "reports_scheduledreport_created_at_22abf190" ON "reports_scheduledreport" ("created_at"); (params ())
CREATE INDEX "reports_scheduledreport_is_deleted_74ecda4d" ON "reports_scheduledreport" ("is_deleted"); (params ())
CREATE INDEX "reports_scheduledreport_is_active_63b82582" ON "reports_scheduledreport" ("is_active"); (params ())
CREATE INDEX "reports_scheduledreport_created_by_id_b7c91302" ON "reports_scheduledreport" ("created_by_id"); (params ())
CREATE INDEX "reports_scheduledreport_deleted_by_id_0775f3e9" ON "reports_scheduledreport" ("deleted_by_id"); (params ())
CREATE INDEX "reports_scheduledreport_organization_id_bd003080" ON "reports_scheduledreport" ("organization_id"); (params ())
CREATE INDEX "reports_scheduledreport_template_id_b98fb5bc" ON "reports_scheduledreport" ("template_id"); (params ())
CREATE INDEX "reports_scheduledreport_updated_by_id_c81891db" ON "reports_scheduledreport" ("updated_by_id"); (params ())
CREATE INDEX "rpt_exec_org_status_idx" ON "reports_reportexecution" ("organization_id", "status", "created_at"); (params None)
CREATE INDEX "rpt_exec_user_status_idx" ON "reports_reportexecution" ("requested_by_id", "status", "created_at"); (params None)
CREATE INDEX "rpt_exec_tpl_status_idx" ON "reports_reportexecution" ("template_id", "status", "created_at"); (params None)
DROP INDEX "reports_gen_organiz_155bcc_idx"; (params ())
DROP INDEX "reports_rep_organiz_35edc1_idx"; (params ())
DROP INDEX "reports_sch_organiz_98bd67_idx"; (params ())
CREATE TABLE "django_session" ("session_key" varchar(40) NOT NULL PRIMARY KEY, "session_data" text NOT NULL, "expire_date" datetime NOT NULL); (params None)
CREATE INDEX "django_session_expire_date_a5c62663" ON "django_session" ("expire_date"); (params ())
CREATE TABLE "token_blacklist_blacklistedtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "blacklisted_at" datetime NOT NULL); (params None)
CREATE TABLE "token_blacklist_outstandingtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "jti" char(32) NOT NULL UNIQUE, "token" text NOT NULL, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__token_blacklist_blacklistedtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "blacklisted_at" datetime NOT NULL, "token_id" integer NOT NULL UNIQUE REFERENCES "token_blacklist_outstandingtoken" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__token_blacklist_blacklistedtoken" ("id", "blacklisted_at", "token_id") SELECT "id", "blacklisted_at", NULL FROM "token_blacklist_blacklistedtoken"; (params ())
DROP TABLE "token_blacklist_blacklistedtoken"; (params ())
ALTER TABLE "new__token_blacklist_blacklistedtoken" RENAME TO "token_blacklist_blacklistedtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
ALTER TABLE "token_blacklist_outstandingtoken" ADD COLUMN "jti_hex" varchar(255) NULL; (params [])
CREATE TABLE "new__token_blacklist_outstandingtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "jti" char(32) NOT NULL UNIQUE, "token" text NOT NULL, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "jti_hex" varchar(255) NOT NULL UNIQUE); (params None)
INSERT INTO "new__token_blacklist_outstandingtoken" ("id", "jti", "token", "created_at", "expires_at", "user_id", "jti_hex") SELECT "id", "jti", "token", "created_at", "expires_at", "user_id", coalesce("jti_hex", NULL) FROM "token_blacklist_outstandingtoken"; (params ())
DROP TABLE "token_blacklist_outstandingtoken"; (params ())
ALTER TABLE "new__token_blacklist_outstandingtoken" RENAME TO "token_blacklist_outstandingtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
CREATE TABLE "new__token_blacklist_outstandingtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "token" text NOT NULL, "created_at" datetime NOT NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "jti_hex" varchar(255) NOT NULL UNIQUE); (params None)
INSERT INTO "new__token_blacklist_outstandingtoken" ("id", "token", "created_at", "expires_at", "user_id", "jti_hex") SELECT "id", "token", "created_at", "expires_at", "user_id", "jti_hex" FROM "token_blacklist_outstandingtoken"; (params ())
DROP TABLE "token_blacklist_outstandingtoken"; (params ())
ALTER TABLE "new__token_blacklist_outstandingtoken" RENAME TO "token_blacklist_outstandingtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
ALTER TABLE "token_blacklist_outstandingtoken" RENAME COLUMN "jti_hex" TO "jti"; (params ())
CREATE TABLE "new__token_blacklist_outstandingtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "token" text NOT NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NOT NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "jti" varchar(255) NOT NULL UNIQUE, "created_at" datetime NULL); (params None)
INSERT INTO "new__token_blacklist_outstandingtoken" ("id", "token", "expires_at", "user_id", "jti", "created_at") SELECT "id", "token", "expires_at", "user_id", "jti", "created_at" FROM "token_blacklist_outstandingtoken"; (params ())
DROP TABLE "token_blacklist_outstandingtoken"; (params ())
ALTER TABLE "new__token_blacklist_outstandingtoken" RENAME TO "token_blacklist_outstandingtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
CREATE TABLE "new__token_blacklist_outstandingtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "token" text NOT NULL, "created_at" datetime NULL, "expires_at" datetime NOT NULL, "jti" varchar(255) NOT NULL UNIQUE, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__token_blacklist_outstandingtoken" ("id", "token", "created_at", "expires_at", "jti", "user_id") SELECT "id", "token", "created_at", "expires_at", "jti", "user_id" FROM "token_blacklist_outstandingtoken"; (params ())
DROP TABLE "token_blacklist_outstandingtoken"; (params ())
ALTER TABLE "new__token_blacklist_outstandingtoken" RENAME TO "token_blacklist_outstandingtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
CREATE TABLE "new__token_blacklist_blacklistedtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "blacklisted_at" datetime NOT NULL, "token_id" integer NOT NULL UNIQUE REFERENCES "token_blacklist_outstandingtoken" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__token_blacklist_blacklistedtoken" ("blacklisted_at", "token_id", "id") SELECT "blacklisted_at", "token_id", "id" FROM "token_blacklist_blacklistedtoken"; (params ())
DROP TABLE "token_blacklist_blacklistedtoken"; (params ())
ALTER TABLE "new__token_blacklist_blacklistedtoken" RENAME TO "token_blacklist_blacklistedtoken"; (params ())
CREATE TABLE "new__token_blacklist_outstandingtoken" ("id" integer NOT NULL PRIMARY KEY AUTOINCREMENT, "token" text NOT NULL, "created_at" datetime NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "jti" varchar(255) NOT NULL UNIQUE); (params None)
INSERT INTO "new__token_blacklist_outstandingtoken" ("token", "created_at", "expires_at", "user_id", "jti", "id") SELECT "token", "created_at", "expires_at", "user_id", "jti", "id" FROM "token_blacklist_outstandingtoken"; (params ())
DROP TABLE "token_blacklist_outstandingtoken"; (params ())
ALTER TABLE "new__token_blacklist_outstandingtoken" RENAME TO "token_blacklist_outstandingtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
CREATE TABLE "new__token_blacklist_blacklistedtoken" ("blacklisted_at" datetime NOT NULL, "token_id" bigint NOT NULL UNIQUE REFERENCES "token_blacklist_outstandingtoken" ("id") DEFERRABLE INITIALLY DEFERRED, "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT); (params None)
INSERT INTO "new__token_blacklist_blacklistedtoken" ("blacklisted_at", "token_id", "id") SELECT "blacklisted_at", "token_id", "id" FROM "token_blacklist_blacklistedtoken"; (params ())
DROP TABLE "token_blacklist_blacklistedtoken"; (params ())
ALTER TABLE "new__token_blacklist_blacklistedtoken" RENAME TO "token_blacklist_blacklistedtoken"; (params ())
CREATE TABLE "new__token_blacklist_outstandingtoken" ("token" text NOT NULL, "created_at" datetime NULL, "expires_at" datetime NOT NULL, "user_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "jti" varchar(255) NOT NULL UNIQUE, "id" integer NOT NULL PRIMARY KEY AUTOINCREMENT); (params None)
INSERT INTO "new__token_blacklist_outstandingtoken" ("token", "created_at", "expires_at", "user_id", "jti", "id") SELECT "token", "created_at", "expires_at", "user_id", "jti", "id" FROM "token_blacklist_outstandingtoken"; (params ())
DROP TABLE "token_blacklist_outstandingtoken"; (params ())
ALTER TABLE "new__token_blacklist_outstandingtoken" RENAME TO "token_blacklist_outstandingtoken"; (params ())
CREATE INDEX "token_blacklist_outstandingtoken_user_id_83bc629a" ON "token_blacklist_outstandingtoken" ("user_id"); (params ())
CREATE TABLE "training_trainingcategory" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(120) NOT NULL, "code" varchar(40) NOT NULL, "description" text NOT NULL, "display_order" integer unsigned NOT NULL CHECK ("display_order" >= 0), "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "training_trainingenrollment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "status" varchar(20) NOT NULL, "enrolled_at" datetime NOT NULL, "started_at" datetime NULL, "completed_at" datetime NULL, "due_date" date NULL, "progress_percent" smallint unsigned NOT NULL CHECK ("progress_percent" >= 0), "score" decimal NULL, "certificate_file" varchar(100) NULL, "assigned_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "training_trainingcompletion" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "completed_at" datetime NOT NULL, "score" decimal NULL, "feedback" text NOT NULL, "certificate_file" varchar(100) NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "enrollment_id" char(32) NOT NULL UNIQUE REFERENCES "training_trainingenrollment" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "training_trainingprogram" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(200) NOT NULL, "code" varchar(60) NOT NULL, "description" text NOT NULL, "provider" varchar(200) NOT NULL, "delivery_mode" varchar(20) NOT NULL, "location" varchar(200) NOT NULL, "start_date" date NULL, "end_date" date NULL, "enrollment_deadline" date NULL, "duration_hours" decimal NULL, "capacity" integer unsigned NULL CHECK ("capacity" >= 0), "is_mandatory" bool NOT NULL, "status" varchar(20) NOT NULL, "prerequisites" text NOT NULL CHECK ((JSON_VALID("prerequisites") OR "prerequisites" IS NULL)), "tags" text NOT NULL CHECK ((JSON_VALID("tags") OR "tags" IS NULL)), "metadata" text NOT NULL CHECK ((JSON_VALID("metadata") OR "metadata" IS NULL)), "category_id" char(32) NULL REFERENCES "training_trainingcategory" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "training_trainingmaterial" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "title" varchar(200) NOT NULL, "description" text NOT NULL, "material_type" varchar(20) NOT NULL, "file" varchar(100) NULL, "url" varchar(200) NOT NULL, "order" integer unsigned NOT NULL CHECK ("order" >= 0), "is_required" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "uploaded_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "program_id" char(32) NOT NULL REFERENCES "training_trainingprogram" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "new__training_trainingenrollment" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "status" varchar(20) NOT NULL, "enrolled_at" datetime NOT NULL, "started_at" datetime NULL, "completed_at" datetime NULL, "due_date" date NULL, "progress_percent" smallint unsigned NOT NULL CHECK ("progress_percent" >= 0), "score" decimal NULL, "certificate_file" varchar(100) NULL, "assigned_by_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "employee_id" char(32) NOT NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "program_id" char(32) NOT NULL REFERENCES "training_trainingprogram" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__training_trainingenrollment" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "status", "enrolled_at", "started_at", "completed_at", "due_date", "progress_percent", "score", "certificate_file", "assigned_by_id", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", "program_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "status", "enrolled_at", "started_at", "completed_at", "due_date", "progress_percent", "score", "certificate_file", "assigned_by_id", "created_by_id", "deleted_by_id", "employee_id", "organization_id", "updated_by_id", NULL FROM "training_trainingenrollment"; (params ())
DROP TABLE "training_trainingenrollment"; (params ())
ALTER TABLE "new__training_trainingenrollment" RENAME TO "training_trainingenrollment"; (params ())
CREATE UNIQUE INDEX "training_trainingcategory_organization_id_code_02f6eb8d_uniq" ON "training_trainingcategory" ("organization_id", "code"); (params ())
CREATE INDEX "training_trainingcategory_created_at_bb224eb0" ON "training_trainingcategory" ("created_at"); (params ())
CREATE INDEX "training_trainingcategory_is_deleted_609a8c13" ON "training_trainingcategory" ("is_deleted"); (params ())
CREATE INDEX "training_trainingcategory_is_active_e384382b" ON "training_trainingcategory" ("is_active"); (params ())
CREATE INDEX "training_trainingcategory_created_by_id_caf5b78e" ON "training_trainingcategory" ("created_by_id"); (params ())
CREATE INDEX "training_trainingcategory_deleted_by_id_7d73a497" ON "training_trainingcategory" ("deleted_by_id"); (params ())
CREATE INDEX "training_trainingcategory_organization_id_afac3441" ON "training_trainingcategory" ("organization_id"); (params ())
CREATE INDEX "training_trainingcategory_updated_by_id_838361b0" ON "training_trainingcategory" ("updated_by_id"); (params ())
CREATE INDEX "training_trainingcompletion_created_at_cadd5209" ON "training_trainingcompletion" ("created_at"); (params ())
CREATE INDEX "training_trainingcompletion_is_deleted_48ff1f3f" ON "training_trainingcompletion" ("is_deleted"); (params ())
CREATE INDEX "training_trainingcompletion_is_active_5bb1f366" ON "training_trainingcompletion" ("is_active"); (params ())
CREATE INDEX "training_trainingcompletion_created_by_id_a68efdf5" ON "training_trainingcompletion" ("created_by_id"); (params ())
CREATE INDEX "training_trainingcompletion_deleted_by_id_e1710711" ON "training_trainingcompletion" ("deleted_by_id"); (params ())
CREATE INDEX "training_trainingcompletion_organization_id_cff367dc" ON "training_trainingcompletion" ("organization_id"); (params ())
CREATE INDEX "training_trainingcompletion_updated_by_id_69c4b172" ON "training_trainingcompletion" ("updated_by_id"); (params ())
CREATE UNIQUE INDEX "training_trainingprogram_organization_id_code_41201ac4_uniq" ON "training_trainingprogram" ("organization_id", "code"); (params ())
CREATE INDEX "training_trainingprogram_created_at_3f08c214" ON "training_trainingprogram" ("created_at"); (params ())
CREATE INDEX "training_trainingprogram_is_deleted_d91fe7da" ON "training_trainingprogram" ("is_deleted"); (params ())
CREATE INDEX "training_trainingprogram_is_active_8254bdba" ON "training_trainingprogram" ("is_active"); (params ())
CREATE INDEX "training_trainingprogram_category_id_9ad39850" ON "training_trainingprogram" ("category_id"); (params ())
CREATE INDEX "training_trainingprogram_created_by_id_ee6337b0" ON "training_trainingprogram" ("created_by_id"); (params ())
CREATE INDEX "training_trainingprogram_deleted_by_id_2326e586" ON "training_trainingprogram" ("deleted_by_id"); (params ())
CREATE INDEX "training_trainingprogram_organization_id_785fd0f8" ON "training_trainingprogram" ("organization_id"); (params ())
CREATE INDEX "training_trainingprogram_updated_by_id_343edb43" ON "training_trainingprogram" ("updated_by_id"); (params ())
CREATE INDEX "training_trainingmaterial_created_at_401b5d25" ON "training_trainingmaterial" ("created_at"); (params ())
CREATE INDEX "training_trainingmaterial_is_deleted_afa8c212" ON "training_trainingmaterial" ("is_deleted"); (params ())
CREATE INDEX "training_trainingmaterial_is_active_7f73e194" ON "training_trainingmaterial" ("is_active"); (params ())
CREATE INDEX "training_trainingmaterial_created_by_id_96546de8" ON "training_trainingmaterial" ("created_by_id"); (params ())
CREATE INDEX "training_trainingmaterial_deleted_by_id_20effa03" ON "training_trainingmaterial" ("deleted_by_id"); (params ())
CREATE INDEX "training_trainingmaterial_organization_id_fd4e9f98" ON "training_trainingmaterial" ("organization_id"); (params ())
CREATE INDEX "training_trainingmaterial_updated_by_id_25c8b59c" ON "training_trainingmaterial" ("updated_by_id"); (params ())
CREATE INDEX "training_trainingmaterial_uploaded_by_id_260f26d3" ON "training_trainingmaterial" ("uploaded_by_id"); (params ())
CREATE INDEX "training_trainingmaterial_program_id_aa537dd5" ON "training_trainingmaterial" ("program_id"); (params ())
CREATE INDEX "training_trainingenrollment_created_at_e8dc2f54" ON "training_trainingenrollment" ("created_at"); (params ())
CREATE INDEX "training_trainingenrollment_is_deleted_b5441786" ON "training_trainingenrollment" ("is_deleted"); (params ())
CREATE INDEX "training_trainingenrollment_is_active_7192ff78" ON "training_trainingenrollment" ("is_active"); (params ())
CREATE INDEX "training_trainingenrollment_assigned_by_id_4ba8b707" ON "training_trainingenrollment" ("assigned_by_id"); (params ())
CREATE INDEX "training_trainingenrollment_created_by_id_19fcd4cd" ON "training_trainingenrollment" ("created_by_id"); (params ())
CREATE INDEX "training_trainingenrollment_deleted_by_id_4761bc64" ON "training_trainingenrollment" ("deleted_by_id"); (params ())
CREATE INDEX "training_trainingenrollment_employee_id_1a0bc4f7" ON "training_trainingenrollment" ("employee_id"); (params ())
CREATE INDEX "training_trainingenrollment_organization_id_a1d11399" ON "training_trainingenrollment" ("organization_id"); (params ())
CREATE INDEX "training_trainingenrollment_updated_by_id_63104fd5" ON "training_trainingenrollment" ("updated_by_id"); (params ())
CREATE INDEX "training_trainingenrollment_program_id_bbd4473e" ON "training_trainingenrollment" ("program_id"); (params ())
CREATE UNIQUE INDEX "training_trainingenrollment_program_id_employee_id_0d5915e8_uniq" ON "training_trainingenrollment" ("program_id", "employee_id"); (params ())
CREATE TABLE "workflows_workflowdefinition" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL UNIQUE, "description" text NOT NULL, "entity_type" varchar(50) NOT NULL, "steps" text NOT NULL CHECK ((JSON_VALID("steps") OR "steps" IS NULL)), "conditions" text NOT NULL CHECK ((JSON_VALID("conditions") OR "conditions" IS NULL)), "sla_hours" integer unsigned NULL CHECK ("sla_hours" >= 0), "auto_approve_on_sla" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "workflows_workflowinstance" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NOT NULL, "current_step" smallint unsigned NOT NULL CHECK ("current_step" >= 0), "status" varchar(20) NOT NULL, "started_at" datetime NOT NULL, "completed_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "workflow_id" char(32) NULL REFERENCES "workflows_workflowdefinition" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "workflows_workflowaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "step" smallint unsigned NOT NULL CHECK ("step" >= 0), "action" varchar(20) NOT NULL, "comments" text NOT NULL, "actor_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "instance_id" char(32) NOT NULL REFERENCES "workflows_workflowinstance" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE TABLE "workflows_workflowstep" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0), "name" varchar(100) NOT NULL, "approver_type" varchar(30) NOT NULL, "is_optional" bool NOT NULL, "can_delegate" bool NOT NULL, "sla_hours" integer unsigned NULL CHECK ("sla_hours" >= 0), "approver_role_id" char(32) NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "approver_user_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "escalate_to_id" char(32) NULL REFERENCES "workflows_workflowstep" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "workflow_id" char(32) NOT NULL REFERENCES "workflows_workflowdefinition" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
CREATE INDEX "workflows_workflowdefinition_created_at_3fb67d29" ON "workflows_workflowdefinition" ("created_at"); (params ())
CREATE INDEX "workflows_workflowdefinition_is_deleted_04190de4" ON "workflows_workflowdefinition" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowdefinition_is_active_fc099a43" ON "workflows_workflowdefinition" ("is_active"); (params ())
CREATE INDEX "workflows_workflowdefinition_created_by_id_2ee3add0" ON "workflows_workflowdefinition" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_deleted_by_id_3a87edda" ON "workflows_workflowdefinition" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_organization_id_158bdb9b" ON "workflows_workflowdefinition" ("organization_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_updated_by_id_0f3a98b8" ON "workflows_workflowdefinition" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_created_at_2101887b" ON "workflows_workflowinstance" ("created_at"); (params ())
CREATE INDEX "workflows_workflowinstance_is_deleted_e03bda35" ON "workflows_workflowinstance" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowinstance_is_active_564cacca" ON "workflows_workflowinstance" ("is_active"); (params ())
CREATE INDEX "workflows_workflowinstance_created_by_id_38964368" ON "workflows_workflowinstance" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_current_approver_id_1bfca0c3" ON "workflows_workflowinstance" ("current_approver_id"); (params ())
CREATE INDEX "workflows_workflowinstance_deleted_by_id_4455840b" ON "workflows_workflowinstance" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_organization_id_053896bd" ON "workflows_workflowinstance" ("organization_id"); (params ())
CREATE INDEX "workflows_workflowinstance_updated_by_id_9cbc95dd" ON "workflows_workflowinstance" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_workflow_id_2fff7f1d" ON "workflows_workflowinstance" ("workflow_id"); (params ())
CREATE INDEX "workflows_workflowaction_created_at_6e3a55d9" ON "workflows_workflowaction" ("created_at"); (params ())
CREATE INDEX "workflows_workflowaction_is_deleted_afe23911" ON "workflows_workflowaction" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowaction_is_active_3066ffa6" ON "workflows_workflowaction" ("is_active"); (params ())
CREATE INDEX "workflows_workflowaction_actor_id_6fc0aa00" ON "workflows_workflowaction" ("actor_id"); (params ())
CREATE INDEX "workflows_workflowaction_created_by_id_e9fcafde" ON "workflows_workflowaction" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_deleted_by_id_c719aa1e" ON "workflows_workflowaction" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_organization_id_8485a980" ON "workflows_workflowaction" ("organization_id"); (params ())
CREATE INDEX "workflows_workflowaction_updated_by_id_45ea1354" ON "workflows_workflowaction" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_instance_id_2f3b39b9" ON "workflows_workflowaction" ("instance_id"); (params ())
CREATE UNIQUE INDEX "workflows_workflowstep_workflow_id_order_da1a18a4_uniq" ON "workflows_workflowstep" ("workflow_id", "order"); (params ())
CREATE INDEX "workflows_workflowstep_created_at_5019edd2" ON "workflows_workflowstep" ("created_at"); (params ())
CREATE INDEX "workflows_workflowstep_is_deleted_d5a055f2" ON "workflows_workflowstep" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowstep_is_active_df784fec" ON "workflows_workflowstep" ("is_active"); (params ())
CREATE INDEX "workflows_workflowstep_approver_role_id_8fc787da" ON "workflows_workflowstep" ("approver_role_id"); (params ())
CREATE INDEX "workflows_workflowstep_approver_user_id_bcf805b9" ON "workflows_workflowstep" ("approver_user_id"); (params ())
CREATE INDEX "workflows_workflowstep_created_by_id_d9da0c00" ON "workflows_workflowstep" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_deleted_by_id_8a634377" ON "workflows_workflowstep" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_escalate_to_id_6a66829f" ON "workflows_workflowstep" ("escalate_to_id"); (params ())
CREATE INDEX "workflows_workflowstep_organization_id_c6007c1c" ON "workflows_workflowstep" ("organization_id"); (params ())
CREATE INDEX "workflows_workflowstep_updated_by_id_e24ab0b0" ON "workflows_workflowstep" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_workflow_id_0c43313f" ON "workflows_workflowstep" ("workflow_id"); (params ())
CREATE TABLE "new__workflows_workflowaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "step" smallint unsigned NOT NULL CHECK ("step" >= 0), "action" varchar(20) NOT NULL, "comments" text NOT NULL, "actor_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "instance_id" char(32) NOT NULL REFERENCES "workflows_workflowinstance" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowaction" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "step", "action", "comments", "actor_id", "created_by_id", "deleted_by_id", "updated_by_id", "instance_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "step", "action", "comments", "actor_id", "created_by_id", "deleted_by_id", "updated_by_id", "instance_id", coalesce("organization_id", NULL) FROM "workflows_workflowaction"; (params ())
DROP TABLE "workflows_workflowaction"; (params ())
ALTER TABLE "new__workflows_workflowaction" RENAME TO "workflows_workflowaction"; (params ())
CREATE INDEX "workflows_workflowaction_created_at_6e3a55d9" ON "workflows_workflowaction" ("created_at"); (params ())
CREATE INDEX "workflows_workflowaction_is_deleted_afe23911" ON "workflows_workflowaction" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowaction_is_active_3066ffa6" ON "workflows_workflowaction" ("is_active"); (params ())
CREATE INDEX "workflows_workflowaction_actor_id_6fc0aa00" ON "workflows_workflowaction" ("actor_id"); (params ())
CREATE INDEX "workflows_workflowaction_created_by_id_e9fcafde" ON "workflows_workflowaction" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_deleted_by_id_c719aa1e" ON "workflows_workflowaction" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_updated_by_id_45ea1354" ON "workflows_workflowaction" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_instance_id_2f3b39b9" ON "workflows_workflowaction" ("instance_id"); (params ())
CREATE INDEX "workflows_workflowaction_organization_id_8485a980" ON "workflows_workflowaction" ("organization_id"); (params ())
CREATE TABLE "new__workflows_workflowdefinition" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL UNIQUE, "description" text NOT NULL, "entity_type" varchar(50) NOT NULL, "steps" text NOT NULL CHECK ((JSON_VALID("steps") OR "steps" IS NULL)), "conditions" text NOT NULL CHECK ((JSON_VALID("conditions") OR "conditions" IS NULL)), "sla_hours" integer unsigned NULL CHECK ("sla_hours" >= 0), "auto_approve_on_sla" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowdefinition" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "entity_type", "steps", "conditions", "sla_hours", "auto_approve_on_sla", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "entity_type", "steps", "conditions", "sla_hours", "auto_approve_on_sla", "created_by_id", "deleted_by_id", "updated_by_id", coalesce("organization_id", NULL) FROM "workflows_workflowdefinition"; (params ())
DROP TABLE "workflows_workflowdefinition"; (params ())
ALTER TABLE "new__workflows_workflowdefinition" RENAME TO "workflows_workflowdefinition"; (params ())
CREATE INDEX "workflows_workflowdefinition_created_at_3fb67d29" ON "workflows_workflowdefinition" ("created_at"); (params ())
CREATE INDEX "workflows_workflowdefinition_is_deleted_04190de4" ON "workflows_workflowdefinition" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowdefinition_is_active_fc099a43" ON "workflows_workflowdefinition" ("is_active"); (params ())
CREATE INDEX "workflows_workflowdefinition_created_by_id_2ee3add0" ON "workflows_workflowdefinition" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_deleted_by_id_3a87edda" ON "workflows_workflowdefinition" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_updated_by_id_0f3a98b8" ON "workflows_workflowdefinition" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_organization_id_158bdb9b" ON "workflows_workflowdefinition" ("organization_id"); (params ())
CREATE TABLE "new__workflows_workflowinstance" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NOT NULL, "current_step" smallint unsigned NOT NULL CHECK ("current_step" >= 0), "status" varchar(20) NOT NULL, "started_at" datetime NOT NULL, "completed_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "workflow_id" char(32) NULL REFERENCES "workflows_workflowdefinition" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowinstance" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "current_step", "status", "started_at", "completed_at", "created_by_id", "current_approver_id", "deleted_by_id", "updated_by_id", "workflow_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "current_step", "status", "started_at", "completed_at", "created_by_id", "current_approver_id", "deleted_by_id", "updated_by_id", "workflow_id", coalesce("organization_id", NULL) FROM "workflows_workflowinstance"; (params ())
DROP TABLE "workflows_workflowinstance"; (params ())
ALTER TABLE "new__workflows_workflowinstance" RENAME TO "workflows_workflowinstance"; (params ())
CREATE INDEX "workflows_workflowinstance_created_at_2101887b" ON "workflows_workflowinstance" ("created_at"); (params ())
CREATE INDEX "workflows_workflowinstance_is_deleted_e03bda35" ON "workflows_workflowinstance" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowinstance_is_active_564cacca" ON "workflows_workflowinstance" ("is_active"); (params ())
CREATE INDEX "workflows_workflowinstance_created_by_id_38964368" ON "workflows_workflowinstance" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_current_approver_id_1bfca0c3" ON "workflows_workflowinstance" ("current_approver_id"); (params ())
CREATE INDEX "workflows_workflowinstance_deleted_by_id_4455840b" ON "workflows_workflowinstance" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_updated_by_id_9cbc95dd" ON "workflows_workflowinstance" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_workflow_id_2fff7f1d" ON "workflows_workflowinstance" ("workflow_id"); (params ())
CREATE INDEX "workflows_workflowinstance_organization_id_053896bd" ON "workflows_workflowinstance" ("organization_id"); (params ())
CREATE TABLE "new__workflows_workflowstep" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0), "name" varchar(100) NOT NULL, "approver_type" varchar(30) NOT NULL, "is_optional" bool NOT NULL, "can_delegate" bool NOT NULL, "sla_hours" integer unsigned NULL CHECK ("sla_hours" >= 0), "approver_role_id" char(32) NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "approver_user_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "workflow_id" char(32) NOT NULL REFERENCES "workflows_workflowdefinition" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NOT NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "escalate_to_id" char(32) NULL REFERENCES "workflows_workflowstep" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowstep" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "order", "name", "approver_type", "is_optional", "can_delegate", "sla_hours", "approver_role_id", "approver_user_id", "created_by_id", "deleted_by_id", "escalate_to_id", "updated_by_id", "workflow_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "order", "name", "approver_type", "is_optional", "can_delegate", "sla_hours", "approver_role_id", "approver_user_id", "created_by_id", "deleted_by_id", "escalate_to_id", "updated_by_id", "workflow_id", coalesce("organization_id", NULL) FROM "workflows_workflowstep"; (params ())
DROP TABLE "workflows_workflowstep"; (params ())
ALTER TABLE "new__workflows_workflowstep" RENAME TO "workflows_workflowstep"; (params ())
CREATE UNIQUE INDEX "workflows_workflowstep_workflow_id_order_da1a18a4_uniq" ON "workflows_workflowstep" ("workflow_id", "order"); (params ())
CREATE INDEX "workflows_workflowstep_created_at_5019edd2" ON "workflows_workflowstep" ("created_at"); (params ())
CREATE INDEX "workflows_workflowstep_is_deleted_d5a055f2" ON "workflows_workflowstep" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowstep_is_active_df784fec" ON "workflows_workflowstep" ("is_active"); (params ())
CREATE INDEX "workflows_workflowstep_approver_role_id_8fc787da" ON "workflows_workflowstep" ("approver_role_id"); (params ())
CREATE INDEX "workflows_workflowstep_approver_user_id_bcf805b9" ON "workflows_workflowstep" ("approver_user_id"); (params ())
CREATE INDEX "workflows_workflowstep_created_by_id_d9da0c00" ON "workflows_workflowstep" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_deleted_by_id_8a634377" ON "workflows_workflowstep" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_updated_by_id_e24ab0b0" ON "workflows_workflowstep" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_workflow_id_0c43313f" ON "workflows_workflowstep" ("workflow_id"); (params ())
CREATE INDEX "workflows_workflowstep_organization_id_c6007c1c" ON "workflows_workflowstep" ("organization_id"); (params ())
CREATE INDEX "workflows_workflowstep_escalate_to_id_6a66829f" ON "workflows_workflowstep" ("escalate_to_id"); (params ())
CREATE INDEX "workflows_w_organiz_6ca38d_idx" ON "workflows_workflowaction" ("organization_id", "created_at"); (params None)
CREATE INDEX "workflows_w_organiz_ef2d2e_idx" ON "workflows_workflowdefinition" ("organization_id", "created_at"); (params None)
CREATE INDEX "workflows_w_organiz_82007f_idx" ON "workflows_workflowinstance" ("organization_id", "created_at"); (params None)
CREATE INDEX "workflows_w_organiz_b88c8a_idx" ON "workflows_workflowstep" ("organization_id", "created_at"); (params None)
CREATE TABLE "new__workflows_workflowaction" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "step" smallint unsigned NOT NULL CHECK ("step" >= 0), "action" varchar(20) NOT NULL, "comments" text NOT NULL, "actor_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "instance_id" char(32) NOT NULL REFERENCES "workflows_workflowinstance" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowaction" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "step", "action", "comments", "actor_id", "created_by_id", "deleted_by_id", "updated_by_id", "instance_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "step", "action", "comments", "actor_id", "created_by_id", "deleted_by_id", "updated_by_id", "instance_id", "organization_id" FROM "workflows_workflowaction"; (params ())
DROP TABLE "workflows_workflowaction"; (params ())
ALTER TABLE "new__workflows_workflowaction" RENAME TO "workflows_workflowaction"; (params ())
CREATE INDEX "workflows_workflowaction_created_at_6e3a55d9" ON "workflows_workflowaction" ("created_at"); (params ())
CREATE INDEX "workflows_workflowaction_is_deleted_afe23911" ON "workflows_workflowaction" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowaction_is_active_3066ffa6" ON "workflows_workflowaction" ("is_active"); (params ())
CREATE INDEX "workflows_workflowaction_actor_id_6fc0aa00" ON "workflows_workflowaction" ("actor_id"); (params ())
CREATE INDEX "workflows_workflowaction_created_by_id_e9fcafde" ON "workflows_workflowaction" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_deleted_by_id_c719aa1e" ON "workflows_workflowaction" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_updated_by_id_45ea1354" ON "workflows_workflowaction" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowaction_instance_id_2f3b39b9" ON "workflows_workflowaction" ("instance_id"); (params ())
CREATE INDEX "workflows_workflowaction_organization_id_8485a980" ON "workflows_workflowaction" ("organization_id"); (params ())
CREATE INDEX "workflows_w_organiz_6ca38d_idx" ON "workflows_workflowaction" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__workflows_workflowdefinition" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "name" varchar(100) NOT NULL, "code" varchar(50) NOT NULL UNIQUE, "description" text NOT NULL, "entity_type" varchar(50) NOT NULL, "steps" text NOT NULL CHECK ((JSON_VALID("steps") OR "steps" IS NULL)), "conditions" text NOT NULL CHECK ((JSON_VALID("conditions") OR "conditions" IS NULL)), "sla_hours" integer unsigned NULL CHECK ("sla_hours" >= 0), "auto_approve_on_sla" bool NOT NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowdefinition" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "entity_type", "steps", "conditions", "sla_hours", "auto_approve_on_sla", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "name", "code", "description", "entity_type", "steps", "conditions", "sla_hours", "auto_approve_on_sla", "created_by_id", "deleted_by_id", "updated_by_id", "organization_id" FROM "workflows_workflowdefinition"; (params ())
DROP TABLE "workflows_workflowdefinition"; (params ())
ALTER TABLE "new__workflows_workflowdefinition" RENAME TO "workflows_workflowdefinition"; (params ())
CREATE INDEX "workflows_workflowdefinition_created_at_3fb67d29" ON "workflows_workflowdefinition" ("created_at"); (params ())
CREATE INDEX "workflows_workflowdefinition_is_deleted_04190de4" ON "workflows_workflowdefinition" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowdefinition_is_active_fc099a43" ON "workflows_workflowdefinition" ("is_active"); (params ())
CREATE INDEX "workflows_workflowdefinition_created_by_id_2ee3add0" ON "workflows_workflowdefinition" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_deleted_by_id_3a87edda" ON "workflows_workflowdefinition" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_updated_by_id_0f3a98b8" ON "workflows_workflowdefinition" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowdefinition_organization_id_158bdb9b" ON "workflows_workflowdefinition" ("organization_id"); (params ())
CREATE INDEX "workflows_w_organiz_ef2d2e_idx" ON "workflows_workflowdefinition" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__workflows_workflowinstance" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "entity_type" varchar(50) NOT NULL, "entity_id" char(32) NOT NULL, "current_step" smallint unsigned NOT NULL CHECK ("current_step" >= 0), "status" varchar(20) NOT NULL, "started_at" datetime NOT NULL, "completed_at" datetime NULL, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "current_approver_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "workflow_id" char(32) NULL REFERENCES "workflows_workflowdefinition" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowinstance" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "current_step", "status", "started_at", "completed_at", "created_by_id", "current_approver_id", "deleted_by_id", "updated_by_id", "workflow_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "entity_type", "entity_id", "current_step", "status", "started_at", "completed_at", "created_by_id", "current_approver_id", "deleted_by_id", "updated_by_id", "workflow_id", "organization_id" FROM "workflows_workflowinstance"; (params ())
DROP TABLE "workflows_workflowinstance"; (params ())
ALTER TABLE "new__workflows_workflowinstance" RENAME TO "workflows_workflowinstance"; (params ())
CREATE INDEX "workflows_workflowinstance_created_at_2101887b" ON "workflows_workflowinstance" ("created_at"); (params ())
CREATE INDEX "workflows_workflowinstance_is_deleted_e03bda35" ON "workflows_workflowinstance" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowinstance_is_active_564cacca" ON "workflows_workflowinstance" ("is_active"); (params ())
CREATE INDEX "workflows_workflowinstance_created_by_id_38964368" ON "workflows_workflowinstance" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_current_approver_id_1bfca0c3" ON "workflows_workflowinstance" ("current_approver_id"); (params ())
CREATE INDEX "workflows_workflowinstance_deleted_by_id_4455840b" ON "workflows_workflowinstance" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_updated_by_id_9cbc95dd" ON "workflows_workflowinstance" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowinstance_workflow_id_2fff7f1d" ON "workflows_workflowinstance" ("workflow_id"); (params ())
CREATE INDEX "workflows_workflowinstance_organization_id_053896bd" ON "workflows_workflowinstance" ("organization_id"); (params ())
CREATE INDEX "workflows_w_organiz_82007f_idx" ON "workflows_workflowinstance" ("organization_id", "created_at"); (params ())
CREATE TABLE "new__workflows_workflowstep" ("created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "is_deleted" bool NOT NULL, "deleted_at" datetime NULL, "id" char(32) NOT NULL PRIMARY KEY, "is_active" bool NOT NULL, "order" smallint unsigned NOT NULL CHECK ("order" >= 0), "name" varchar(100) NOT NULL, "approver_type" varchar(30) NOT NULL, "is_optional" bool NOT NULL, "can_delegate" bool NOT NULL, "sla_hours" integer unsigned NULL CHECK ("sla_hours" >= 0), "approver_role_id" char(32) NULL REFERENCES "abac_role" ("id") DEFERRABLE INITIALLY DEFERRED, "approver_user_id" char(32) NULL REFERENCES "employees_employee" ("id") DEFERRABLE INITIALLY DEFERRED, "created_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "deleted_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "updated_by_id" char(32) NULL REFERENCES "authentication_user" ("id") DEFERRABLE INITIALLY DEFERRED, "workflow_id" char(32) NOT NULL REFERENCES "workflows_workflowdefinition" ("id") DEFERRABLE INITIALLY DEFERRED, "organization_id" char(32) NULL REFERENCES "organizations" ("id") DEFERRABLE INITIALLY DEFERRED, "escalate_to_id" char(32) NULL REFERENCES "workflows_workflowstep" ("id") DEFERRABLE INITIALLY DEFERRED); (params None)
INSERT INTO "new__workflows_workflowstep" ("created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "order", "name", "approver_type", "is_optional", "can_delegate", "sla_hours", "approver_role_id", "approver_user_id", "created_by_id", "deleted_by_id", "escalate_to_id", "updated_by_id", "workflow_id", "organization_id") SELECT "created_at", "updated_at", "is_deleted", "deleted_at", "id", "is_active", "order", "name", "approver_type", "is_optional", "can_delegate", "sla_hours", "approver_role_id", "approver_user_id", "created_by_id", "deleted_by_id", "escalate_to_id", "updated_by_id", "workflow_id", "organization_id" FROM "workflows_workflowstep"; (params ())
DROP TABLE "workflows_workflowstep"; (params ())
ALTER TABLE "new__workflows_workflowstep" RENAME TO "workflows_workflowstep"; (params ())
CREATE UNIQUE INDEX "workflows_workflowstep_workflow_id_order_da1a18a4_uniq" ON "workflows_workflowstep" ("workflow_id", "order"); (params ())
CREATE INDEX "workflows_workflowstep_created_at_5019edd2" ON "workflows_workflowstep" ("created_at"); (params ())
CREATE INDEX "workflows_workflowstep_is_deleted_d5a055f2" ON "workflows_workflowstep" ("is_deleted"); (params ())
CREATE INDEX "workflows_workflowstep_is_active_df784fec" ON "workflows_workflowstep" ("is_active"); (params ())
CREATE INDEX "workflows_workflowstep_approver_role_id_8fc787da" ON "workflows_workflowstep" ("approver_role_id"); (params ())
CREATE INDEX "workflows_workflowstep_approver_user_id_bcf805b9" ON "workflows_workflowstep" ("approver_user_id"); (params ())
CREATE INDEX "workflows_workflowstep_created_by_id_d9da0c00" ON "workflows_workflowstep" ("created_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_deleted_by_id_8a634377" ON "workflows_workflowstep" ("deleted_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_updated_by_id_e24ab0b0" ON "workflows_workflowstep" ("updated_by_id"); (params ())
CREATE INDEX "workflows_workflowstep_workflow_id_0c43313f" ON "workflows_workflowstep" ("workflow_id"); (params ())
CREATE INDEX "workflows_workflowstep_organization_id_c6007c1c" ON "workflows_workflowstep" ("organization_id"); (params ())
CREATE INDEX "workflows_workflowstep_escalate_to_id_6a66829f" ON "workflows_workflowstep" ("escalate_to_id"); (params ())
CREATE INDEX "workflows_w_organiz_b88c8a_idx" ON "workflows_workflowstep" ("organization_id", "created_at"); (params ())
test_no_org_returns_none (tests.test_security_regression.FailClosedMixinTests.test_no_org_returns_none)
Without organization context, get_queryset must return .none(). ... ok
test_cors_before_csrf (tests.test_security_regression.MiddlewareOrderingTests.test_cors_before_csrf) ... ok
test_security_middleware_first (tests.test_security_regression.MiddlewareOrderingTests.test_security_middleware_first) ... ok
test_default_permission_is_authenticated (tests.test_security_regression.SettingsSecurityTests.test_default_permission_is_authenticated) ... ok
test_default_throttle_configured (tests.test_security_regression.SettingsSecurityTests.test_default_throttle_configured) ... ok
test_jwt_access_token_not_excessive (tests.test_security_regression.SettingsSecurityTests.test_jwt_access_token_not_excessive) ... ok
test_jwt_rotation_enabled (tests.test_security_regression.SettingsSecurityTests.test_jwt_rotation_enabled) ... ok
test_secret_key_not_hardcoded (tests.test_security_regression.SettingsSecurityTests.test_secret_key_not_hardcoded) ... ok
test_enroll_source_has_org_filter (tests.test_security_regression.TrainingEnrollOrgFilterTest.test_enroll_source_has_org_filter)
The enroll action must contain organization filtering. ... ok
test_double_extension_blocked (tests.test_security_regression.UploadValidatorTests.test_double_extension_blocked) ... ok
test_exe_extension_blocked (tests.test_security_regression.UploadValidatorTests.test_exe_extension_blocked) ... ok
test_oversized_file_rejected (tests.test_security_regression.UploadValidatorTests.test_oversized_file_rejected) ... ok
test_svg_extension_blocked (tests.test_security_regression.UploadValidatorTests.test_svg_extension_blocked) ... ok
test_svg_mime_blocked (tests.test_security_regression.UploadValidatorTests.test_svg_mime_blocked) ... ok
test_valid_pdf_accepted (tests.test_security_regression.UploadValidatorTests.test_valid_pdf_accepted) ... ok
test_abac_viewsets_use_super (tests.test_security_regression.ViewSetMixinComplianceTests.test_abac_viewsets_use_super)
ABAC ViewSets must call super().get_queryset(). ... ok
test_class_level_queryset_is_none (tests.test_security_regression.ViewSetMixinComplianceTests.test_class_level_queryset_is_none)
All org-scoped ViewSets must have queryset = Model.objects.none(). ... FAIL
test_training_viewsets_use_super (tests.test_security_regression.ViewSetMixinComplianceTests.test_training_viewsets_use_super)
Training ViewSets must call super().get_queryset(). ... ok
test_workflow_step_viewset_uses_super (tests.test_security_regression.ViewSetMixinComplianceTests.test_workflow_step_viewset_uses_super)
WorkflowStepViewSet must call super().get_queryset(). ... ok
test_plan_viewset_does_not_require_org (tests.test_billing_certification.PlansCatalogTests.test_plan_viewset_does_not_require_org)
PlanViewSet should serve plans without org context (public catalog). ... ok
test_health_exempt_from_billing (tests.test_billing_certification.SubscriptionMiddlewareTests.test_health_exempt_from_billing)
Health endpoints should not require subscription. ... FAIL
test_middleware_exists_in_settings (tests.test_billing_certification.SubscriptionMiddlewareTests.test_middleware_exists_in_settings)
SubscriptionMiddleware must be in MIDDLEWARE. ... ok
test_invalid_signature_rejected (tests.test_billing_certification.WebhookSignatureTests.test_invalid_signature_rejected)
A forged signature should be rejected with 400. ... razorpay_webhook_signature_invalid
ok
test_missing_signature_rejected (tests.test_billing_certification.WebhookSignatureTests.test_missing_signature_rejected)
A request with no signature should be rejected. ... razorpay_webhook_signature_invalid
ok
test_no_secret_configured_returns_500 (tests.test_billing_certification.WebhookSignatureTests.test_no_secret_configured_returns_500)
If RAZORPAY_WEBHOOK_SECRET is empty, should return 500. ... razorpay_webhook_no_secret configured
ok
test_valid_signature_accepted (tests.test_billing_certification.WebhookSignatureTests.test_valid_signature_accepted)
A correctly signed webhook payload should process. ... razorpay_webhook_txn_not_found order_id=ord_test123
ok

======================================================================
FAIL: test_class_level_queryset_is_none (tests.test_security_regression.ViewSetMixinComplianceTests.test_class_level_queryset_is_none)
All org-scoped ViewSets must have queryset = Model.objects.none().
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ruchi\ppcp\hrms_frontend\hrms_project\tests\test_security_regression.py", line 237, in test_class_level_queryset_is_none
    self.assertFalse(
AssertionError: <WhereNode: (AND: Exact(Col(training_trainingcategory, training.TrainingCategory.is_deleted), False), <django.db.models.sql.where.NothingNode object at 0x000001EC8890D8E0>)> is not false : TrainingCategoryViewSet.queryset should be .none(), not .all()

======================================================================
FAIL: test_health_exempt_from_billing (tests.test_billing_certification.SubscriptionMiddlewareTests.test_health_exempt_from_billing)
Health endpoints should not require subscription.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ruchi\ppcp\hrms_frontend\hrms_project\tests\test_billing_certification.py", line 97, in test_health_exempt_from_billing
    self.assertIn("health", src, "SubscriptionMiddleware must exempt health endpoints")
AssertionError: 'health' not found in 'class SubscriptionMiddleware(MiddlewareMixin):\n    """Block tenant requests when subscription or trial has expired."""\n\n    def process_request(self, request):\n        if self._should_skip(request):\n            return None\n\n        organization = getattr(request, \'organization\', None)\n        if not organization:\n            return None\n\n        subscription = SubscriptionService.get_active_subscription(organization)\n        if not subscription:\n            return self._payment_required(\'No active subscription for organization\')\n\n        request._subscription_grace_warning = False\n\n        if RenewalService.has_grace_passed(subscription):\n            subscription.deactivate(reason=\'grace_period_ended\')\n            return self._payment_required(\n                \'Subscription expired after the grace window. Renew to continue.\'\n            )\n\n        if RenewalService.is_within_grace(subscription):\n            RenewalService.mark_org_past_due(subscription)\n            request._subscription_grace_warning = True\n            return None\n\n        RenewalService.mark_org_active(subscription)\n\n        if subscription.is_trial and subscription.trial_end_date:\n            if timezone.now().date() > subscription.trial_end_date:\n                subscription.deactivate()\n                return self._payment_required(\n                    \'Trial period has ended. Please activate a paid subscription.\'\n                )\n\n        # Feature gate: block disabled modules\n        feature_flag = self._match_feature(request.path)\n        if feature_flag:\n            plan = subscription.plan\n            if plan and not getattr(plan, feature_flag, True):\n                return JsonResponse(\n                    {\n                        \'error\': \'This feature is not available on your current plan.\',\n                        \'code\': \'FEATURE_DISABLED\',\n                        \'feature\': feature_flag,\n                    },\n                    status=403,\n                )\n\n        return None\n\n    @staticmethod\n    def _should_skip(request):\n        if not getattr(request, \'user\', None) or not request.user.is_authenticated:\n            return True\n        if getattr(request.user, \'is_superuser\', False):\n            return True\n        if request.method == \'OPTIONS\':\n            return True\n        for prefix in EXEMPT_PATH_PREFIXES:\n            if request.path.startswith(prefix):\n                return True\n        return False\n\n    @staticmethod\n    def _match_feature(path):\n        for prefix, flag in FEATURE_PATH_MAP.items():\n            if path.startswith(prefix):\n                return flag\n        return None\n\n    @staticmethod\n    def _payment_required(message):\n        return JsonResponse(\n            {\'error\': message, \'code\': \'PAYMENT_REQUIRED\'},\n            status=402,\n        )\n\n    def process_response(self, request, response):\n        if getattr(request, \'_subscription_grace_warning\', False):\n            response[\'X-Subscription-Grace\'] = \'true\'\n        return response\n' : SubscriptionMiddleware must exempt health endpoints

----------------------------------------------------------------------
Ran 26 tests in 0.064s

FAILED (failures=2)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...


=== EXIT CODE: 1 ===
